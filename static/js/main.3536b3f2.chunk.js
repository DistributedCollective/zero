(this["webpackJsonp@liquity/dev-frontend"]=this["webpackJsonp@liquity/dev-frontend"]||[]).push([[0],[,,,,,,,,,function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(101),t),r(n(72),t),r(n(221),t),r(n(222),t),r(n(223),t),r(n(224),t),r(n(225),t),r(n(226),t),r(n(227),t),r(n(228),t),r(n(229),t),r(n(230),t),r(n(231),t)},,,,function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(143),t),r(n(102),t),r(n(244),t),r(n(245),t)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(39),i=n(50),s=n(76),o=n(29),u=n(44),l=n(45),c=n(135),d=n(87),p=n(100),y=n(54),b=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._connect=t._connectByChainId=t._connectToDeployment=t.UnsupportedNetworkError=t._usingStore=t._requireFrontendAddress=t._requireAddress=t._getProvider=t._requireSigner=t._getBlockTimestamp=t._getContracts=void 0;var f=n(60),m=b(n(193)),h=b(n(194)),v=b(n(195)),T=n(136),j=n(216),g=m.default,O=y(y(p({},h.default.chainId,h.default),v.default?p({},v.default.chainId,v.default):{}),null!==g?p({},g.chainId,g):{}),x=function(e,t,n,a,r,i){var s=r.deploymentDate,o=d(r,["deploymentDate"]);if(i&&void 0!==i.useStore&&!C.includes(i.useStore))throw new Error("Invalid useStore value ".concat(i.useStore));return y(y({provider:e,signer:t,_contracts:n,_multicall:a,deploymentDate:new Date(s)},o),i)};t._getContracts=function(e){return e._contracts};var w=function(e){return e._multicall},_=function(e){return e.toNumber()},S=function(e){return e.timestamp};t._getBlockTimestamp=function(e){var n,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest";return null!==(a=null===(n=w(e))||void 0===n?void 0:n.getCurrentBlockTimestamp({blockTag:r}).then(_))&&void 0!==a?a:t._getProvider(e).getBlock(r).then(S)};var k=function(e){throw e};t._requireSigner=function(e){var t;return null!==(t=e.signer)&&void 0!==t?t:k(new Error("Must be connected through a Signer"))};t._getProvider=function(e){return e.provider};t._requireAddress=function(e,t){var n,a;return null!==(a=null!==(n=null===t||void 0===t?void 0:t.from)&&void 0!==n?n:e.userAddress)&&void 0!==a?a:k(new Error("A user address is required"))};t._requireFrontendAddress=function(e){var t;return null!==(t=e.frontendTag)&&void 0!==t?t:k(new Error("A frontend address is required"))};t._usingStore=function(e){return void 0!==e.useStore};var E=function(e){u(n,e);var t=l(n);function n(e){var a;return o(this,n),(a=t.call(this,"Unsupported network (chainId = ".concat(e,")"))).name="UnsupportedNetworkError",a.chainId=e,a}return n}(c(Error));t.UnsupportedNetworkError=E;var D=function(e){var t;return[f.Signer.isSigner(e)?null!==(t=e.provider)&&void 0!==t?t:k(new Error("Signer must have a Provider")):e,f.Signer.isSigner(e)?e:void 0]};t._connectToDeployment=function(e,t,n){return x.apply(void 0,s(D(t)).concat([T._connectToContracts(t,e),void 0,e,n]))};var C=["blockPolled"];function R(e,t,n,a){var r,i=null!==(r=O[n])&&void 0!==r?r:k(new E(n));return x(e,t,T._connectToContracts(null!==t&&void 0!==t?t:e,i),j._connectToMulticall(null!==t&&void 0!==t?t:e,n),i,a)}t._connectByChainId=R;var M=function(){var e=i(a.mark((function e(t,n){var i,s,o,u;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=D(t),s=r(i,2),o=s[0],!(u=s[1])){e.next=12;break}if(void 0===(null===n||void 0===n?void 0:n.userAddress)){e.next=4;break}throw new Error("Can't override userAddress when connecting through Signer");case 4:return e.t0=y,e.t1=y({},n),e.t2={},e.next=9,u.getAddress();case 9:e.t3=e.sent,e.t4={userAddress:e.t3},n=(0,e.t0)(e.t1,e.t2,e.t4);case 12:return e.t5=R,e.t6=o,e.t7=u,e.next=17,o.getNetwork();case 17:return e.t8=e.sent.chainId,e.t9=n,e.abrupt("return",(0,e.t5)(e.t6,e.t7,e.t8,e.t9));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t._connect=M},function(e,t,n){"use strict";var a=n(39),r=n(29),i=n(31),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Percent=t.Difference=t.Decimal=void 0;var o=s(n(79)),u=n(32),l=function(e){return p.pow(e)},c=18,d=u.BigNumber.from(1),p=u.BigNumber.from(10),y=l(c),b=/^[0-9]*(\.[0-9]*)?(e[-+]?[0-9]+)?$/,f=/0*$/,m=["","K","M","B","T"],h=function(e,t){return e.mul(t).add(v.HALF.hex).div(y)},v=function(){function e(t){if(r(this,e),t.isNegative())throw new Error("negatives not supported by Decimal");this._bigNumber=t}return i(e,[{key:"hex",get:function(){return this._bigNumber.toHexString()}},{key:"bigNumber",get:function(){return this._bigNumber.toString()}},{key:"_toStringWithAutomaticPrecision",value:function(){var e=this._bigNumber.div(y),t=this._bigNumber.mod(y);if(t.isZero())return e.toString();var n=t.toString().padStart(c,"0").replace(f,"");return e.toString()+"."+n}},{key:"_roundUp",value:function(e){var t=l(17-e).mul(5);return this._bigNumber.add(t)}},{key:"_toStringWithPrecision",value:function(e){if(e<0)throw new Error("precision must not be negative");var t=e<c?this._roundUp(e):this._bigNumber,n=t.div(y),a=t.mod(y);if(0===e)return n.toString();var r=a.toString().padStart(c,"0").substr(0,e);return n.toString()+"."+r}},{key:"toString",value:function(e){return this.infinite?"\u221e":void 0!==e?this._toStringWithPrecision(e):this._toStringWithAutomaticPrecision()}},{key:"prettify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.toString(e).split("."),n=a(t,2),r=n[0],i=n[1],s=r.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");return void 0!==i?s+"."+i:s}},{key:"shorten",value:function(){var t=this.toString(0).length,n=Math.min(Math.floor((t-1)/3),m.length-1),a=Math.max(3*(n+1)-t,0);return this.div(new e(l(c+3*n))).prettify(a)+m[n]}},{key:"add",value:function(t){return new e(this._bigNumber.add(e.from(t)._bigNumber))}},{key:"sub",value:function(t){return new e(this._bigNumber.sub(e.from(t)._bigNumber))}},{key:"mul",value:function(t){return new e(this._bigNumber.mul(e.from(t)._bigNumber).div(y))}},{key:"div",value:function(t){return(t=e.from(t)).isZero?e.INFINITY:new e(this._bigNumber.mul(y).div(t._bigNumber))}},{key:"_divCeil",value:function(t){return(t=e.from(t)).isZero?e.INFINITY:new e(this._bigNumber.mul(y).add(t._bigNumber.sub(d)).div(t._bigNumber))}},{key:"mulDiv",value:function(t,n){return t=e.from(t),(n=e.from(n)).isZero?e.INFINITY:new e(this._bigNumber.mul(t._bigNumber).div(n._bigNumber))}},{key:"pow",value:function(t){if(o.default(Number.isInteger(t)),o.default(0<=t&&t<=4294967295),0===t)return e.ONE;if(1===t)return this;for(var n=this._bigNumber,a=y;t>1;t>>>=1)1&t&&(a=h(n,a)),n=h(n,n);return new e(h(n,a))}},{key:"isZero",get:function(){return this._bigNumber.isZero()}},{key:"zero",get:function(){if(this.isZero)return this}},{key:"nonZero",get:function(){if(!this.isZero)return this}},{key:"infinite",get:function(){if(this.eq(e.INFINITY))return this}},{key:"finite",get:function(){if(!this.eq(e.INFINITY))return this}},{key:"absoluteValue",get:function(){return this}},{key:"lt",value:function(t){return this._bigNumber.lt(e.from(t)._bigNumber)}},{key:"eq",value:function(t){return this._bigNumber.eq(e.from(t)._bigNumber)}},{key:"gt",value:function(t){return this._bigNumber.gt(e.from(t)._bigNumber)}},{key:"gte",value:function(t){return this._bigNumber.gte(e.from(t)._bigNumber)}},{key:"lte",value:function(t){return this._bigNumber.lte(e.from(t)._bigNumber)}}],[{key:"fromBigNumberString",value:function(t){return new e(u.BigNumber.from(t))}},{key:"_fromString",value:function(t){if(!t||!t.match(b))throw new Error('bad decimal format: "'.concat(t,'"'));if(t.includes("e")){var n=t.split("e"),r=a(n,2),i=r[0],s=r[1];return s.startsWith("-")?new e(e._fromString(i)._bigNumber.div(p.pow(u.BigNumber.from(s.substr(1))))):(s.startsWith("+")&&(s=s.substr(1)),new e(e._fromString(i)._bigNumber.mul(p.pow(u.BigNumber.from(s)))))}if(!t.includes("."))return new e(u.BigNumber.from(t).mul(y));var o=t.split("."),l=a(o,2),d=l[0],f=l[1];return f.length<c?f+="0".repeat(c-f.length):f=f.substr(0,c),new e(u.BigNumber.from(d||0).mul(y).add(f))}},{key:"from",value:function(t){switch(typeof t){case"object":if(t instanceof e)return t;throw new Error("invalid Decimalish value");case"string":return e._fromString(t);case"number":return e._fromString(t.toString());default:throw new Error("invalid Decimalish value")}}},{key:"min",value:function(t,n){return t=e.from(t),n=e.from(n),t.lt(n)?t:n}},{key:"max",value:function(t,n){return t=e.from(t),n=e.from(n),t.gt(n)?t:n}}]),e}();t.Decimal=v,v.INFINITY=v.fromBigNumberString("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),v.ZERO=v.from(0),v.HALF=v.from(.5),v.ONE=v.from(1);var T=function(){function e(t){r(this,e),this._number=t}return i(e,[{key:"toString",value:function(e){return this._number?this._number.sign+this._number.absoluteValue.toString(e):"N/A"}},{key:"prettify",value:function(e){return this._number?this._number.sign+this._number.absoluteValue.prettify(e):this.toString()}},{key:"mul",value:function(t){return new e(this._number&&{sign:this._number.sign,absoluteValue:this._number.absoluteValue.mul(t)})}},{key:"nonZero",get:function(){var e;return(null===(e=this._number)||void 0===e?void 0:e.absoluteValue.nonZero)&&this}},{key:"positive",get:function(){var e;return"+"===(null===(e=this._number)||void 0===e?void 0:e.sign)?this:void 0}},{key:"negative",get:function(){var e;return"-"===(null===(e=this._number)||void 0===e?void 0:e.sign)?this:void 0}},{key:"absoluteValue",get:function(){var e;return null===(e=this._number)||void 0===e?void 0:e.absoluteValue}},{key:"infinite",get:function(){var e;return(null===(e=this._number)||void 0===e?void 0:e.absoluteValue.infinite)&&this}},{key:"finite",get:function(){var e;return(null===(e=this._number)||void 0===e?void 0:e.absoluteValue.finite)&&this}}],[{key:"between",value:function(t,n){return void 0===t||void 0===n?new e(void 0):(t=v.from(t),n=v.from(n),t.infinite&&n.infinite?new e(void 0):t.infinite?new e({sign:"+",absoluteValue:t}):n.infinite?new e({sign:"-",absoluteValue:n}):t.gt(n)?new e({sign:"+",absoluteValue:v.from(t).sub(n)}):n.gt(t)?new e({sign:"-",absoluteValue:v.from(n).sub(t)}):new e({sign:"",absoluteValue:v.ZERO}))}}]),e}();t.Difference=T;var j=function(){function e(t){r(this,e),this._percent=t.infinite||t.mul&&t.mul(100)||t}return i(e,[{key:"nonZeroish",value:function(e){var t,n="0.".concat("0".repeat(e),"5");if(null===(t=this._percent.absoluteValue)||void 0===t?void 0:t.gte(n))return this}},{key:"toString",value:function(e){return this._percent.toString(e)+(this._percent.absoluteValue&&!this._percent.infinite?"%":"")}},{key:"prettify",value:function(){var e,t;return(null===(e=this._percent.absoluteValue)||void 0===e?void 0:e.gte("1000"))?this.toString(0):(null===(t=this._percent.absoluteValue)||void 0===t?void 0:t.gte("10"))?this.toString(1):this.toString(2)}}]),e}();t.Percent=j},,,,,,,,,,function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(168),t),r(n(123),t),r(n(134),t)},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINIMUM_REDEMPTION_RATE=t.MAXIMUM_BORROWING_RATE=t.MINIMUM_BORROWING_RATE=t.ZUSD_MINIMUM_DEBT=t.ZUSD_MINIMUM_NET_DEBT=t.ZUSD_LIQUIDATION_RESERVE=t.MINIMUM_COLLATERAL_RATIO=t.CRITICAL_COLLATERAL_RATIO=void 0;var a=n(72);t.CRITICAL_COLLATERAL_RATIO=a.Decimal.from(1.5),t.MINIMUM_COLLATERAL_RATIO=a.Decimal.from(1.1),t.ZUSD_LIQUIDATION_RESERVE=a.Decimal.from(20),t.ZUSD_MINIMUM_NET_DEBT=a.Decimal.from(180),t.ZUSD_MINIMUM_DEBT=t.ZUSD_LIQUIDATION_RESERVE.add(t.ZUSD_MINIMUM_NET_DEBT),t.MINIMUM_BORROWING_RATE=a.Decimal.from(.005),t.MAXIMUM_BORROWING_RATE=a.Decimal.from(.05),t.MINIMUM_REDEMPTION_RATE=a.Decimal.from(.005)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useLiquityStore=void 0;var a=n(1),r=n(143);t.useLiquityStore=function(){var e=a.useContext(r.LiquityStoreContext);if(!e)throw new Error("You must provide a LiquityStore via LiquityStoreProvider");return e}},,,,,,function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedNetworkError=t._connectByChainId=void 0;var i=n(71);Object.defineProperty(t,"_connectByChainId",{enumerable:!0,get:function(){return i._connectByChainId}}),Object.defineProperty(t,"UnsupportedNetworkError",{enumerable:!0,get:function(){return i.UnsupportedNetworkError}}),r(n(217),t),r(n(137),t),r(n(232),t),r(n(138),t),r(n(139),t),r(n(140),t),r(n(235),t)},,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(50),i=n(76),s=n(29),o=n(31),u=n(122),l=n(98),c=n(70),d=n(44),p=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketAugmentedWeb3Provider=t.WebSocketAugmented=t.isWebSocketAugmentedProvider=void 0;var y=n(145),b=n(134),f=[];t.isWebSocketAugmentedProvider=function(e){return f.some((function(t){return e instanceof t}))};var m=function(e){return new Promise((function(t){return setTimeout(t,e)}))};t.WebSocketAugmented=function(e){var t=function(e){d(n,e);var t=p(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments))._seenBlock=0,e._blockListenerScheduled=!1,e._blockListeners=new Set,e._blockListener=e._onBlock.bind(u(e)),e}return o(n,[{key:"openWebSocket",value:function(e,t){this._wsProvider=new b.WebSocketProvider(e,t),this._wsProvider.onClose=this._onWebSocketClose.bind(this),this._wsParams=[e,t],this._switchover()}},{key:"_onWebSocketClose",value:function(){var e=this;this.closeWebSocket(),console.warn("WebSocketProvider disconnected. Retrying in 10 seconds."),this._reconnectTimerId=setTimeout((function(){return e.openWebSocket.apply(e,i(e._wsParams))}),1e4)}},{key:"closeWebSocket",value:function(){this._wsProvider&&(this._wsProvider.onClose=null,this._wsProvider.close(1e3),this._wsProvider=void 0,this._switchover(),void 0!==this._reconnectTimerId&&(clearTimeout(this._reconnectTimerId),this._reconnectTimerId=void 0))}},{key:"_switchover",value:function(){this._blockListeners.size>0&&(this._wsProvider&&l(c(n.prototype),"off",this).call(this,"block",this._blockListener),this._startBlockEvents())}},{key:"_onBlock",value:function(e){var t=this;this._seenBlock=e,this._blockListenerScheduled||(this._blockListenerScheduled=!0,setTimeout((function(){t._blockListenerScheduled=!1,i(t._blockListeners).forEach((function(e){return e(t._seenBlock)}))}),50))}},{key:"_retrySeenBlock",value:function(){var e=r(a.mark((function e(t,n){var r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:return e.prev=1,e.next=4,t();case 4:return r=e.sent,e.abrupt("return",r);case 9:if(e.prev=9,e.t0=e.catch(1),this._seenBlock===n&&("object"===typeof(a=e.t0)&&"string"===typeof a.message&&a.message.includes("header not found"))){e.next=13;break}throw e.t0;case 13:return e.next=15,m(200);case 15:e.next=1;break;case 18:case"end":return e.stop()}var a}),e,this,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=r(a.mark((function e(t,r){var i,s,o=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:return i=e.sent,s=function(){var e;return(null===(e=o._wsProvider)||void 0===e?void 0:e.isReady)?o._wsProvider.call(t,i):l(c(n.prototype),"call",o).call(o,t,i)},e.abrupt("return",i===this._seenBlock?this._retrySeenBlock(s,this._seenBlock):s());case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=r(a.mark((function e(t,r){var i,s,o=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:return i=e.sent,s=function(){var e;return(null===(e=o._wsProvider)||void 0===e?void 0:e.isReady)?o._wsProvider.getBalance(t,i):l(c(n.prototype),"getBalance",o).call(o,t,i)},e.abrupt("return",i===this._seenBlock?this._retrySeenBlock(s,this._seenBlock):s());case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_startBlockEvents",value:function(){this._wsProvider?(console.log("Listening for new blocks on WebSocketProvider"),this._wsProvider.on("block",this._blockListener)):(console.log("Listening for new blocks on basic Provider"),l(c(n.prototype),"on",this).call(this,"block",this._blockListener))}},{key:"_stopBlockEvents",value:function(){this._wsProvider?this._wsProvider.off("block",this._blockListener):l(c(n.prototype),"off",this).call(this,"block",this._blockListener)}},{key:"on",value:function(e,t){return"block"===e?this._addBlockListener(t):l(c(n.prototype),"on",this).call(this,e,t)}},{key:"_addBlockListener",value:function(e){return this._blockListeners.has(e)||(this._blockListeners.add(e),1===this._blockListeners.size&&this._startBlockEvents()),this}},{key:"once",value:function(e,t){var a=this;if("block"===e){return this._addBlockListener((function e(n){t(n),a._removeBlockListener(e)}))}return l(c(n.prototype),"once",this).call(this,e,t)}},{key:"off",value:function(e,t){return"block"===e?this._removeBlockListener(t):l(c(n.prototype),"off",this).call(this,e,t)}},{key:"_removeBlockListener",value:function(e){return this._blockListeners.has(e)&&(this._blockListeners.delete(e),0===this._blockListeners.size&&this._stopBlockEvents()),this}},{key:"getTransactionReceipt",value:function(e){var t;return(null===(t=this._wsProvider)||void 0===t?void 0:t.ready)?this._wsProvider.getTransactionReceipt(e):l(c(n.prototype),"getTransactionReceipt",this).call(this,e)}},{key:"_blockContainsTx",value:function(){var e=r(a.mark((function e(t,n){var r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null;case 1:if(r){e.next=9;break}return e.next=4,m(200);case 4:return e.next=6,this.getBlock(t);case 6:r=e.sent,e.next=1;break;case 9:return e.abrupt("return",r.transactions.some((function(e){return e===n})));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getTransactionReceiptFromLatest",value:function(){var e=r(a.mark((function e(t,n){var r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:t=e.sent,0;case 4:return e.next=6,this.getTransactionReceipt(t);case 6:if(r=e.sent,e.t1=void 0===n,e.t1){e.next=15;break}if(e.t2=null===r,!e.t2){e.next=14;break}return e.next=13,this._blockContainsTx(n,t);case 13:e.t2=!e.sent;case 14:e.t1=e.t2;case 15:if(e.t0=e.t1,e.t0){e.next=18;break}e.t0=null!==r&&r.blockNumber+r.confirmations-1>=n;case 18:if(!e.t0){e.next=21;break}return e.abrupt("return",r);case 21:return e.next=23,m(200);case 23:e.next=4;break;case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"waitForTransaction",value:function(){var e=r(a.mark((function e(t,r,i){var s,o,u=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i){e.next=2;break}return e.abrupt("return",l(c(n.prototype),"waitForTransaction",this).call(this,t,r,i));case 2:s=void 0;case 3:return e.next=5,this._getTransactionReceiptFromLatest(t,s);case 5:if(null===(o=e.sent)||!(void 0===r||o.confirmations>=r)){e.next=8;break}return e.abrupt("return",o);case 8:return e.next=10,new Promise((function(e){return u.once("block",e)}));case 10:s=e.sent;case 11:e.next=3;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),n}(e);return f.push(t),t},t.WebSocketAugmentedWeb3Provider=t.WebSocketAugmented(y.Web3Provider)},,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(50),i=n(29),s=n(31),o=n(44),u=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketProvider=void 0;var l=function(e){o(n,e);var t=u(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"isReady",get:function(){return this._websocket.readyState===WebSocket.OPEN}},{key:"onClose",set:function(e){this._websocket.onclose=e}},{key:"close",value:function(e){this._websocket.close(e)}},{key:"detectNetwork",value:function(){var e=r(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.network);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(145).WebSocketProvider);t.WebSocketProvider=l},,function(e,t,n){"use strict";var a=n(39),r=n(29),i=n(31),s=n(44),o=n(45),u=n(5),l=n(54),c=n(50),d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._connectToContracts=t._priceFeedIsTestnet=t._LiquityContract=void 0;var p=n(103),y=d(n(196)),b=d(n(197)),f=d(n(198)),m=d(n(199)),h=d(n(200)),v=d(n(201)),T=d(n(202)),j=d(n(203)),g=d(n(204)),O=d(n(205)),x=d(n(206)),w=d(n(207)),_=d(n(208)),S=d(n(209)),k=d(n(210)),E=d(n(211)),D=d(n(212)),C=d(n(213)),R=d(n(214)),M=d(n(215)),A=function(e){s(n,e);var t=o(n);function n(e,a,i){var s,o,d;return r(this,n),(s=t.call(this,e,a,i)).estimateAndPopulate=(o=s.estimateGas,d=s.populateTransaction,Object.fromEntries(Object.keys(o).map((function(e){return[e,function(){var t=c(u.mark((function t(n,a){var r,i,s,c,p=arguments;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=p.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=p[s];if(void 0!==n.gasLimit){t.next=6;break}return t.next=4,o[e].apply(o,i.concat([n]));case 4:c=t.sent,n=l(l({},n),{},{gasLimit:a(c)});case 6:return t.abrupt("return",d[e].apply(d,i.concat([n])));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()]})))),s}return i(n,[{key:"extractEvents",value:function(e,t){var n=this;return e.filter((function(e){return e.address===n.address})).map((function(e){return n.interface.parseLog(e)})).filter((function(e){return e.name===t}))}}]),n}(p.Contract);t._LiquityContract=A;t._priceFeedIsTestnet=function(e){return"setPrice"in e};t._connectToContracts=function(e,t){var n,r,i,s=t.addresses,o=t._priceFeedIsTestnet,u=(n=o,{activePool:y.default,borrowerOperations:b.default,troveManager:f.default,troveManagerRedeemOps:m.default,zusdToken:h.default,nueToken:v.default,communityIssuance:j.default,defaultPool:g.default,zeroToken:O.default,hintHelpers:x.default,zeroStaking:w.default,multiTroveGetter:_.default,priceFeed:n?k.default:S.default,sortedTroves:E.default,stabilityPool:D.default,gasPool:C.default,collSurplusPool:T.default,liquityBaseParams:R.default,feeDistributor:M.default});return r=s,i=function(t,n){return new A(t,u[n],e)},Object.fromEntries(Object.entries(r).map((function(e){var t=a(e,2),n=t[0],r=t[1];return[n,i(r,n)]})))}},function(e,t,n){"use strict";var a=n(44),r=n(45),i=n(5),s=n(54),o=n(39),u=n(50),l=n(29),c=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableEthersLiquity=void 0;var d,p=n(9),y=n(71),b=n(138),f=p.Decimal.from("0.999037758833783000"),m=p.Decimal.from(2);!function(e){e[e.nonExistent=0]="nonExistent",e[e.active=1]="active",e[e.closedByOwner=2]="closedByOwner",e[e.closedByLiquidation=3]="closedByLiquidation",e[e.closedByRedemption=4]="closedByRedemption"}(d||(d={}));var h=function(e){return e===d.nonExistent?"nonExistent":e===d.active?"open":e===d.closedByOwner?"closedByOwner":e===d.closedByLiquidation?"closedByLiquidation":e===d.closedByRedemption?"closedByRedemption":function(e){throw e}(new Error("invalid backendStatus ".concat(e)))},v=function(e){return p.Decimal.fromBigNumberString(e.toHexString())},T=function(e){return new Date(1e3*e)},j=["ascendingCollateralRatio","descendingCollateralRatio"],g=function(e,t){if(void 0!==e[t]){if(!Number.isInteger(e[t]))throw new Error("".concat(t," must be an integer"));if(e[t]<0)throw new Error("".concat(t," must not be negative"))}},O=function(){function e(t){l(this,e),this.connection=t}return c(e,[{key:"hasStore",value:function(){return!1}},{key:"getTotalRedistributed",value:function(){var e=u(i.mark((function e(t){var n,a,r,u,l,c;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y._getContracts(this.connection),a=n.troveManager,e.next=3,Promise.all([a.L_ETH(s({},t)).then(v),a.L_ZUSDDebt(s({},t)).then(v)]);case 3:return r=e.sent,u=o(r,2),l=u[0],c=u[1],e.abrupt("return",new p.Trove(l,c));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTroveBeforeRedistribution",value:function(){var e=u(i.mark((function e(t,n){var a,r,u,l,c,b;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=y._requireAddress(this.connection)),a=y._getContracts(this.connection),r=a.troveManager,e.next=4,Promise.all([r.Troves(t,s({},n)),r.rewardSnapshots(t,s({},n))]);case 4:if(u=e.sent,l=o(u,2),c=l[0],b=l[1],c.status!==d.active){e.next=12;break}return e.abrupt("return",new p.TroveWithPendingRedistribution(t,h(c.status),v(c.coll),v(c.debt),v(c.stake),new p.Trove(v(b.ETH),v(b.ZUSDDebt))));case 12:return e.abrupt("return",new p.TroveWithPendingRedistribution(t,h(c.status)));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTrove",value:function(){var e=u(i.mark((function e(t,n){var a,r,s,u;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getTroveBeforeRedistribution(t,n),this.getTotalRedistributed(n)]);case 2:return a=e.sent,r=o(a,2),s=r[0],u=r[1],e.abrupt("return",s.applyRedistribution(u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNumberOfTroves",value:function(){var e=u(i.mark((function e(t){var n,a;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y._getContracts(this.connection),a=n.troveManager,e.next=3,a.getTroveOwnersCount(s({},t));case 3:return e.abrupt("return",e.sent.toNumber());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPrice",value:function(e){return y._getContracts(this.connection).priceFeed.callStatic.fetchPrice(s({},e)).then(v)}},{key:"_getActivePool",value:function(){var e=u(i.mark((function e(t){var n,a,r,u,l,c;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y._getContracts(this.connection),a=n.activePool,e.next=3,Promise.all([a.getETH(s({},t)),a.getZUSDDebt(s({},t))].map((function(e){return e.then(v)})));case 3:return r=e.sent,u=o(r,2),l=u[0],c=u[1],e.abrupt("return",new p.Trove(l,c));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getDefaultPool",value:function(){var e=u(i.mark((function e(t){var n,a,r,u,l,c;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y._getContracts(this.connection),a=n.defaultPool,e.next=3,Promise.all([a.getETH(s({},t)),a.getZUSDDebt(s({},t))].map((function(e){return e.then(v)})));case 3:return r=e.sent,u=o(r,2),l=u[0],c=u[1],e.abrupt("return",new p.Trove(l,c));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotal",value:function(){var e=u(i.mark((function e(t){var n,a,r,s;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getActivePool(t),this._getDefaultPool(t)]);case 2:return n=e.sent,a=o(n,2),r=a[0],s=a[1],e.abrupt("return",r.add(s));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStabilityDeposit",value:function(){var e=u(i.mark((function e(t,n){var a,r,u,l,c,d,b,f,m,h;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=y._requireAddress(this.connection)),a=y._getContracts(this.connection),r=a.stabilityPool,e.next=4,Promise.all([r.deposits(t,s({},n)),r.getCompoundedZUSDDeposit(t,s({},n)),r.getDepositorETHGain(t,s({},n)),r.getDepositorZEROGain(t,s({},n))]);case 4:return u=e.sent,l=o(u,4),c=l[0],d=c.frontEndTag,b=c.initialValue,f=l[1],m=l[2],h=l[3],e.abrupt("return",new p.StabilityDeposit(v(b),v(f),v(m),v(h),d));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRemainingStabilityPoolZEROReward",value:function(){var e=u(i.mark((function e(t){var n,a,r,o;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y._getContracts(this.connection),a=n.communityIssuance,r=p.Decimal.from(0),e.t0=v,e.next=5,a.totalZEROIssued(s({},t));case 5:return e.t1=e.sent,o=(0,e.t0)(e.t1),e.abrupt("return",r.sub(o));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getZUSDInStabilityPool",value:function(e){return y._getContracts(this.connection).stabilityPool.getTotalZUSDDeposits(s({},e)).then(v)}},{key:"getZUSDBalance",value:function(e,t){return null!==e&&void 0!==e||(e=y._requireAddress(this.connection)),y._getContracts(this.connection).zusdToken.balanceOf(e,s({},t)).then(v)}},{key:"getNUEBalance",value:function(e,t){null!==e&&void 0!==e||(e=y._requireAddress(this.connection));var n=y._getContracts(this.connection).nueToken;if(!n)throw"nue token address not set";return n.balanceOf(e,s({},t)).then(v)}},{key:"getZEROBalance",value:function(e,t){return null!==e&&void 0!==e||(e=y._requireAddress(this.connection)),y._getContracts(this.connection).zeroToken.balanceOf(e,s({},t)).then(v)}},{key:"getCollateralSurplusBalance",value:function(e,t){return null!==e&&void 0!==e||(e=y._requireAddress(this.connection)),y._getContracts(this.connection).collSurplusPool.getCollateral(e,s({},t)).then(v)}},{key:"getTroves",value:function(){var e=u(i.mark((function e(t,n){var a,r,u,l,c,d,p,b,f;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=y._getContracts(this.connection),l=u.multiTroveGetter,g(t,"first"),g(t,"startingAt"),j.includes(t.sortedBy)){e.next=5;break}throw new Error("sortedBy must be one of: ".concat(j.map((function(e){return'"'.concat(e,'"')})).join(", ")));case 5:return e.next=7,Promise.all([t.beforeRedistribution?void 0:this.getTotalRedistributed(s({},n)),l.getMultipleSortedTroves("descendingCollateralRatio"===t.sortedBy?null!==(a=t.startingAt)&&void 0!==a?a:0:-((null!==(r=t.startingAt)&&void 0!==r?r:0)+1),t.first,s({},n))]);case 7:if(c=e.sent,d=o(c,2),p=d[0],b=d[1],f=x(b),!p){e.next=16;break}return e.abrupt("return",f.map((function(e){return e.applyRedistribution(p)})));case 16:return e.abrupt("return",f);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getFeesFactory",value:function(){var e=u(i.mark((function e(t){var n,a,r,u,l,c;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y._getContracts(this.connection),a=n.troveManager,e.next=3,Promise.all([a.lastFeeOperationTime(s({},t)),a.baseRate(s({},t)).then(v)]);case 3:return r=e.sent,u=o(r,2),l=u[0],c=u[1],e.abrupt("return",(function(e,t){return new p.Fees(c,f,m,T(l.toNumber()),T(e),t)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFees",value:function(){var e=u(i.mark((function e(t){var n,a,r,s,u,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getFeesFactory(t),this.getTotal(t),this.getPrice(t),y._getBlockTimestamp(this.connection,null===t||void 0===t?void 0:t.blockTag)]);case 2:return n=e.sent,a=o(n,4),r=a[0],s=a[1],u=a[2],l=a[3],e.abrupt("return",r(l,s.collateralRatioIsBelowCritical(u)));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getZEROStake",value:function(){var e=u(i.mark((function e(t,n){var a,r,u,l,c,d,b;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=y._requireAddress(this.connection)),a=y._getContracts(this.connection),r=a.zeroStaking,e.next=4,Promise.all([r.stakes(t,s({},n)),r.getPendingETHGain(t,s({},n)),r.getPendingZUSDGain(t,s({},n))].map((function(e){return e.then(v)})));case 4:return u=e.sent,l=o(u,3),c=l[0],d=l[1],b=l[2],e.abrupt("return",new p.ZEROStake(c,d,b));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTotalStakedZERO",value:function(){var e=u(i.mark((function e(t){var n,a;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y._getContracts(this.connection),a=n.zeroStaking,e.abrupt("return",a.totalZEROStaked(s({},t)).then(v));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFrontendStatus",value:function(){var e=u(i.mark((function e(t,n){var a,r,o,u,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=y._requireFrontendAddress(this.connection)),a=y._getContracts(this.connection),r=a.stabilityPool,e.next=4,r.frontEnds(t,s({},n));case 4:return o=e.sent,u=o.registered,l=o.kickbackRate,e.abrupt("return",u?{status:"registered",kickbackRate:v(l)}:{status:"unregistered"});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_from",value:function(t){var n=new e(t);return"blockPolled"===t.useStore?new _(n):n}},{key:"connect",value:function(){var t=u(i.mark((function t(n,a){return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,y._connect(n,a);case 3:return t.t1=t.sent,t.abrupt("return",t.t0._from.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();t.ReadableEthersLiquity=O;var x=function(e){return e.map((function(e){return new p.TroveWithPendingRedistribution(e.owner,"open",v(e.coll),v(e.debt),v(e.stake),new p.Trove(v(e.snapshotETH),v(e.snapshotZUSDDebt)))}))},w=function(){function e(t){l(this,e),this._store=t}return c(e,[{key:"_blockHit",value:function(e){return!e||void 0===e.blockTag||e.blockTag===this._store.state.blockTag}},{key:"_userHit",value:function(e,t){return this._blockHit(t)&&(void 0===e||e===this._store.connection.userAddress)}},{key:"_frontendHit",value:function(e,t){return this._blockHit(t)&&(void 0===e||e===this._store.connection.frontendTag)}},{key:"getTotalRedistributed",value:function(e){if(this._blockHit(e))return this._store.state.totalRedistributed}},{key:"getTroveBeforeRedistribution",value:function(e,t){if(this._userHit(e,t))return this._store.state.troveBeforeRedistribution}},{key:"getTrove",value:function(e,t){if(this._userHit(e,t))return this._store.state.trove}},{key:"getNumberOfTroves",value:function(e){if(this._blockHit(e))return this._store.state.numberOfTroves}},{key:"getPrice",value:function(e){if(this._blockHit(e))return this._store.state.price}},{key:"getTotal",value:function(e){if(this._blockHit(e))return this._store.state.total}},{key:"getStabilityDeposit",value:function(e,t){if(this._userHit(e,t))return this._store.state.stabilityDeposit}},{key:"getRemainingStabilityPoolZEROReward",value:function(e){if(this._blockHit(e))return this._store.state.remainingStabilityPoolZEROReward}},{key:"getZUSDInStabilityPool",value:function(e){if(this._blockHit(e))return this._store.state.zusdInStabilityPool}},{key:"getZUSDBalance",value:function(e,t){if(this._userHit(e,t))return this._store.state.zusdBalance}},{key:"getNUEBalance",value:function(e,t){if(this._userHit(e,t))return this._store.state.nueBalance}},{key:"getZEROBalance",value:function(e,t){if(this._userHit(e,t))return this._store.state.zeroBalance}},{key:"getCollateralSurplusBalance",value:function(e,t){if(this._userHit(e,t))return this._store.state.collateralSurplusBalance}},{key:"getFees",value:function(e){if(this._blockHit(e))return this._store.state.fees}},{key:"getZEROStake",value:function(e,t){if(this._userHit(e,t))return this._store.state.zeroStake}},{key:"getTotalStakedZERO",value:function(e){if(this._blockHit(e))return this._store.state.totalStakedZERO}},{key:"getFrontendStatus",value:function(e,t){if(this._frontendHit(e,t))return this._store.state.frontend}},{key:"getTroves",value:function(){}}]),e}(),_=function(e){a(n,e);var t=r(n);function n(e){var a;l(this,n);var r=new b.BlockPolledLiquityStore(e);return(a=t.call(this,e,new w(r))).store=r,a.connection=e.connection,a}return c(n,[{key:"hasStore",value:function(e){return void 0===e||"blockPolled"===e}},{key:"_getActivePool",value:function(){throw new Error("Method not implemented.")}},{key:"_getDefaultPool",value:function(){throw new Error("Method not implemented.")}},{key:"_getFeesFactory",value:function(){throw new Error("Method not implemented.")}},{key:"_getRemainingLiquidityMiningZERORewardCalculator",value:function(){throw new Error("Method not implemented.")}}]),n}(p._CachedReadableLiquity)},function(e,t,n){"use strict";var a=n(76),r=n(54),i=n(87),s=n(5),o=n(50),u=n(29),l=n(31),c=n(44),d=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.BlockPolledLiquityStore=void 0;var p=n(46),y=n(9),b=n(71),f=function(e){var t=Object.keys(e);return Promise.all(Object.values(e)).then((function(e){return Object.fromEntries(e.map((function(e,n){return[t[n],e]})))}))},m=function(e){return y.Decimal.fromBigNumberString(e.toHexString())},h=function(e){c(n,e);var t=d(n);function n(e){var a;return u(this,n),(a=t.call(this)).connection=e.connection,a._readable=e,a._provider=b._getProvider(e.connection),a}return l(n,[{key:"_getRiskiestTroveBeforeRedistribution",value:function(){var e=o(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readable.getTroves({first:1,sortedBy:"ascendingCollateralRatio",beforeRedistribution:!0},t);case 2:if(0!==(n=e.sent).length){e.next=5;break}return e.abrupt("return",new y.TroveWithPendingRedistribution(p.AddressZero,"nonExistent"));case 5:return e.abrupt("return",n[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=o(s.mark((function e(t){var n,a,o,u,l,c,d;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.connection,a=n.userAddress,o=n.frontendTag,e.next=3,f(r({blockTimestamp:b._getBlockTimestamp(this.connection,t),createFees:this._readable._getFeesFactory({blockTag:t}),price:this._readable.getPrice({blockTag:t}),numberOfTroves:this._readable.getNumberOfTroves({blockTag:t}),totalRedistributed:this._readable.getTotalRedistributed({blockTag:t}),total:this._readable.getTotal({blockTag:t}),zusdInStabilityPool:this._readable.getZUSDInStabilityPool({blockTag:t}),totalStakedZERO:this._readable.getTotalStakedZERO({blockTag:t}),_riskiestTroveBeforeRedistribution:this._getRiskiestTroveBeforeRedistribution({blockTag:t}),remainingStabilityPoolZEROReward:this._readable.getRemainingStabilityPoolZEROReward({blockTag:t}),frontend:o?this._readable.getFrontendStatus(o,{blockTag:t}):{status:"unregistered"}},a?{accountBalance:this._provider.getBalance(a,t).then(m),zusdBalance:this._readable.getZUSDBalance(a,{blockTag:t}),nueBalance:this._readable.getNUEBalance(a,{blockTag:t}),zeroBalance:this._readable.getZEROBalance(a,{blockTag:t}),collateralSurplusBalance:this._readable.getCollateralSurplusBalance(a,{blockTag:t}),troveBeforeRedistribution:this._readable.getTroveBeforeRedistribution(a,{blockTag:t}),stabilityDeposit:this._readable.getStabilityDeposit(a,{blockTag:t}),zeroStake:this._readable.getZEROStake(a,{blockTag:t}),ownFrontend:this._readable.getFrontendStatus(a,{blockTag:t})}:{accountBalance:y.Decimal.ZERO,zusdBalance:y.Decimal.ZERO,nueBalance:y.Decimal.ZERO,zeroBalance:y.Decimal.ZERO,uniTokenBalance:y.Decimal.ZERO,uniTokenAllowance:y.Decimal.ZERO,liquidityMiningStake:y.Decimal.ZERO,liquidityMiningZEROReward:y.Decimal.ZERO,collateralSurplusBalance:y.Decimal.ZERO,troveBeforeRedistribution:new y.TroveWithPendingRedistribution(p.AddressZero,"nonExistent"),stabilityDeposit:new y.StabilityDeposit(y.Decimal.ZERO,y.Decimal.ZERO,y.Decimal.ZERO,y.Decimal.ZERO,p.AddressZero),zeroStake:new y.ZEROStake,ownFrontend:{status:"unregistered"}}));case 3:return u=e.sent,l=u.blockTimestamp,c=u.createFees,d=i(u,["blockTimestamp","createFees"]),e.abrupt("return",[r(r({},d),{},{_feesInNormalMode:c(l,!1)}),{blockTag:t,blockTimestamp:l}]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_doStart",value:function(){var e=this;this._get().then((function(t){e._loaded||e._load.apply(e,a(t))}));var t=function(){var t=o(s.mark((function t(n){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._get(n);case 2:r=t.sent,e._loaded?e._update.apply(e,a(r)):e._load.apply(e,a(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return this._provider.on("block",t),function(){e._provider.off("block",t)}}},{key:"_reduceExtra",value:function(e,t){var n,a;return{blockTag:null!==(n=t.blockTag)&&void 0!==n?n:e.blockTag,blockTimestamp:null!==(a=t.blockTimestamp)&&void 0!==a?a:e.blockTimestamp}}}]),n}(y.LiquityStore);t.BlockPolledLiquityStore=h},function(e,t,n){"use strict";var a=n(76),r=n(87),i=n(233),s=n(54),o=n(39),u=n(44),l=n(45),c=n(50),d=n(29),p=n(31),y=n(5),b=y.mark(R),f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PopulatableEthersLiquity=t.PopulatedEthersRedemption=t.PopulatedEthersLiquityTransaction=t.SentEthersLiquityTransaction=t._redeemMaxIterations=void 0;var m=f(n(79)),h=n(46),v=n(9),T=n(71),j=n(136),g=n(234),O=function(e){return v.Decimal.fromBigNumberString(e.toHexString())};t._redeemMaxIterations=70;var x=v.Decimal.from(.005),w=v.Decimal.from(.001),_=function(){},S=function(e,t){return function(n){return e(t(n))}},k=function(e){return e},E=function(e){return e.add(1e4)},D=function(e){return e.add(8e4)},C=function(e){return e.add(5e4)};function R(e){var t;return y.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:m.default(Number.isInteger(e)&&e>0);case 1:if(!e){n.next=8;break}return t=Math.min(e,2500),n.next=5,t;case 5:e-=t,n.next=1;break;case 8:case"end":return n.stop()}}),b)}var M=function(){function e(t,n,a){d(this,e),this.rawSentTransaction=t,this._connection=n,this._parse=a}return p(e,[{key:"_receiptFrom",value:function(e){var t=this;return e?e.status?v._successfulReceipt(e,this._parse(e),(function(){return g.logsToString(e,T._getContracts(t._connection))})):v._failedReceipt(e):v._pendingReceipt}},{key:"getReceipt",value:function(){var e=c(y.mark((function e(){return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,T._getProvider(this._connection).getTransactionReceipt(this.rawSentTransaction.hash);case 3:return e.t1=e.sent,e.abrupt("return",e.t0._receiptFrom.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForReceipt",value:function(){var e=c(y.mark((function e(){var t;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,T._getProvider(this._connection).waitForTransaction(this.rawSentTransaction.hash);case 3:return e.t1=e.sent,t=e.t0._receiptFrom.call(e.t0,e.t1),m.default("pending"!==t.status),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.SentEthersLiquityTransaction=M;var A=function(){function e(t,n,a){d(this,e),this.rawPopulatedTransaction=t,this._connection=n,this._parse=a}return p(e,[{key:"send",value:function(){var e=c(y.mark((function e(){return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M,e.next=3,T._requireSigner(this._connection).sendTransaction(this.rawPopulatedTransaction);case 3:return e.t1=e.sent,e.t2=this._connection,e.t3=this._parse,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.PopulatedEthersLiquityTransaction=A;var P=function(e){u(n,e);var t=l(n);function n(e,a,r,i,s){var o;d(this,n);var u=T._getContracts(a).troveManager;return(o=t.call(this,e,a,(function(e){var t=e.logs;return u.extractEvents(t,"Redemption").map((function(e){var t=e.args,n=t._ETHSent,a=t._ETHFee,r=t._actualZUSDAmount,i=t._attemptedZUSDAmount;return{attemptedZUSDAmount:O(i),actualZUSDAmount:O(r),collateralTaken:O(n),fee:O(a)}}))[0]}))).attemptedZUSDAmount=r,o.redeemableZUSDAmount=i,o.isTruncated=i.lt(r),o._increaseAmountByMinimumNetDebt=s,o}return p(n,[{key:"increaseAmountByMinimumNetDebt",value:function(e){if(!this._increaseAmountByMinimumNetDebt)throw new Error("PopulatedEthersRedemption: increaseAmountByMinimumNetDebt() can only be called when amount is truncated");return this._increaseAmountByMinimumNetDebt(e)}}]),n}(A);t.PopulatedEthersRedemption=P;var I=function(){function e(t){d(this,e),this._readable=t}return p(e,[{key:"_wrapSimpleTransaction",value:function(e){return new A(e,this._readable.connection,_)}},{key:"_wrapTroveChangeWithFees",value:function(e,t){var n=T._getContracts(this._readable.connection).borrowerOperations;return new A(t,this._readable.connection,(function(t){var a=t.logs,r=n.extractEvents(a,"TroveUpdated").map((function(e){var t=e.args,n=t._coll,a=t._debt;return new v.Trove(O(n),O(a))})),i=o(r,1)[0],s=n.extractEvents(a,"ZUSDBorrowingFeePaid").map((function(e){var t=e.args._ZUSDFee;return O(t)})),u=o(s,1)[0];return{params:e,newTrove:i,fee:u}}))}},{key:"_wrapTroveClosure",value:function(){var e=c(y.mark((function e(t){var n,a,r;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T._getContracts(this._readable.connection),a=n.activePool,r=n.zusdToken,e.abrupt("return",new A(t,this._readable.connection,(function(e){var t=e.logs,n=e.from,i=r.extractEvents(t,"Transfer").filter((function(e){var t=e.args,a=t.from,r=t.to;return a===n&&r===h.AddressZero})).map((function(e){var t=e.args.value;return O(t)})),s=o(i,1)[0],u=a.extractEvents(t,"EtherSent").filter((function(e){return e.args._to===n})).map((function(e){var t=e.args._amount;return O(t)})),l=o(u,1)[0];return{params:s.nonZero?{withdrawCollateral:l,repayZUSD:s}:{withdrawCollateral:l}}})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wrapLiquidation",value:function(e){var t=T._getContracts(this._readable.connection).troveManager;return new A(e,this._readable.connection,(function(e){var n=e.logs,a=t.extractEvents(n,"TroveLiquidated").map((function(e){return e.args._borrower})),r=t.extractEvents(n,"Liquidation").map((function(e){var t=e.args,n=t._ZUSDGasCompensation,a=t._collGasCompensation,r=t._liquidatedColl,i=t._liquidatedDebt;return{collateralGasCompensation:O(a),zusdGasCompensation:O(n),totalLiquidated:new v.Trove(O(r),O(i))}})),i=o(r,1)[0];return s({liquidatedAddresses:a},i)}))}},{key:"_extractStabilityPoolGainsWithdrawalDetails",value:function(e){var t=T._getContracts(this._readable.connection).stabilityPool,n=t.extractEvents(e,"UserDepositChanged").map((function(e){var t=e.args._newDeposit;return O(t)})),a=o(n,1)[0],r=t.extractEvents(e,"ETHGainWithdrawn").map((function(e){var t=e.args,n=t._ETH,a=t._ZUSDLoss;return[O(n),O(a)]})),i=o(r,1),s=o(i[0],2),u=s[0],l=s[1],c=t.extractEvents(e,"ZEROPaidToDepositor").map((function(e){var t=e.args._ZERO;return O(t)}));return{zusdLoss:l,newZUSDDeposit:a,collateralGain:u,zeroReward:o(c,1)[0]}}},{key:"_wrapStabilityPoolGainsWithdrawal",value:function(e){var t=this;return new A(e,this._readable.connection,(function(e){var n=e.logs;return t._extractStabilityPoolGainsWithdrawalDetails(n)}))}},{key:"_wrapStabilityDepositTopup",value:function(e,t){var n=this;return new A(t,this._readable.connection,(function(t){var a=t.logs;return s(s({},n._extractStabilityPoolGainsWithdrawalDetails(a)),{},{change:e})}))}},{key:"_wrapStabilityDepositWithdrawal",value:function(){var e=c(y.mark((function e(t){var n,a,r,i=this;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T._getContracts(this._readable.connection),a=n.stabilityPool,r=n.zusdToken,e.abrupt("return",new A(t,this._readable.connection,(function(e){var t=e.logs,n=e.from,u=i._extractStabilityPoolGainsWithdrawalDetails(t),l=r.extractEvents(t,"Transfer").filter((function(e){var t=e.args,r=t.from,i=t.to;return r===a.address&&i===n})).map((function(e){var t=e.args.value;return O(t)})),c=o(l,1)[0];return s(s({},u),{},{change:{withdrawZUSD:c,withdrawAllZUSD:u.newZUSDDeposit.isZero}})})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wrapCollateralGainTransfer",value:function(e){var t=this,n=T._getContracts(this._readable.connection).borrowerOperations;return new A(e,this._readable.connection,(function(e){var a=e.logs,r=n.extractEvents(a,"TroveUpdated").map((function(e){var t=e.args,n=t._coll,a=t._debt;return new v.Trove(O(n),O(a))})),i=o(r,1)[0];return s(s({},t._extractStabilityPoolGainsWithdrawalDetails(a)),{},{newTrove:i})}))}},{key:"_findHintsForNominalCollateralRatio",value:function(){var e=c(y.mark((function e(t){var n,s,o,u,l,c,d,p,b,f,m,v,j,g;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T._getContracts(this._readable.connection),s=n.sortedTroves,o=n.hintHelpers,e.next=3,this._readable.getNumberOfTroves();case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",[h.AddressZero,h.AddressZero]);case 6:if(!t.infinite){e.next=12;break}return e.t0=h.AddressZero,e.next=10,s.getFirst();case 10:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 12:return l=Math.ceil(10*Math.sqrt(u)),c=R(l),d=i(c),p=d[0],b=d.slice(1),f=function(e,n){var i=e.latestRandomSeed,s=e.results;return o.getApproxHint(t.hex,n,i).then((function(e){var t=e.latestRandomSeed,n=r(e,["latestRandomSeed"]);return{latestRandomSeed:t,results:[].concat(a(s),[n])}}))},e.next=17,b.reduce((function(e,t){return e.then((function(e){return f(e,t)}))}),f({latestRandomSeed:Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),results:[]},p));case 17:return m=e.sent,v=m.results,j=v.reduce((function(e,t){return e.diff.lt(t.diff)?e:t})),g=j.hintAddress,e.abrupt("return",s.findInsertPosition(t.hex,g,g));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_findHints",value:function(){var e=c(y.mark((function e(t){return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof v.TroveWithPendingRedistribution)){e.next=2;break}throw new Error("Rewards must be applied to this Trove");case 2:return e.abrupt("return",this._findHintsForNominalCollateralRatio(t._nominalCollateralRatio));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_findRedemptionHints",value:function(){var e=c(y.mark((function e(n){var a,r,i,s,u,l,c,d,p,b,f;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T._getContracts(this._readable.connection),r=a.hintHelpers,e.next=3,this._readable.getPrice();case 3:return i=e.sent,e.next=6,r.getRedemptionHints(n.hex,i.hex,t._redeemMaxIterations);case 6:if(s=e.sent,u=s.firstRedemptionHint,l=s.partialRedemptionHintNICR,c=s.truncatedZUSDamount,!l.isZero()){e.next=14;break}e.t0=[h.AddressZero,h.AddressZero],e.next=17;break;case 14:return e.next=16,this._findHintsForNominalCollateralRatio(O(l));case 16:e.t0=e.sent;case 17:return d=e.t0,p=o(d,2),b=p[0],f=p[1],e.abrupt("return",[O(c),u,b,f,l]);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openTrove",value:function(){var e=c(y.mark((function e(t,n,r){var i,o,u,l,c,d,p,b,f;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=T._getContracts(this._readable.connection),u=o.borrowerOperations,l=v._normalizeTroveCreation(t),c=l.depositCollateral,d=l.borrowZUSD,e.next=5,this._readable.getFees();case 5:return p=e.sent,b=p.borrowingRate(),f=v.Trove.create(l,b),n=void 0!==n?v.Decimal.from(n):b.add(x),e.t0=this,e.t1=l,e.t2=(i=u.estimateAndPopulate).openTrove,e.t3=i,e.t4=[s({value:c.hex},r),S(E,D),n.hex,d.hex],e.t5=a,e.next=17,this._findHints(f);case 17:return e.t6=e.sent,e.t7=(0,e.t5)(e.t6),e.t8=e.t4.concat.call(e.t4,e.t7),e.next=22,e.t2.apply.call(e.t2,e.t3,e.t8);case 22:return e.t9=e.sent,e.abrupt("return",e.t0._wrapTroveChangeWithFees.call(e.t0,e.t1,e.t9));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"openNueTrove",value:function(){var e=c(y.mark((function e(t,n,r){var i,o,u,l,c,d,p,b,f;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=T._getContracts(this._readable.connection),u=o.borrowerOperations,l=v._normalizeTroveCreation(t),c=l.depositCollateral,d=l.borrowZUSD,e.next=5,this._readable.getFees();case 5:return p=e.sent,b=p.borrowingRate(),f=v.Trove.create(l,b),n=void 0!==n?v.Decimal.from(n):b.add(x),e.t0=this,e.t1=l,e.t2=(i=u.estimateAndPopulate).openNueTrove,e.t3=i,e.t4=[s({value:c.hex},r),S(E,D),n.hex,d.hex],e.t5=a,e.next=17,this._findHints(f);case 17:return e.t6=e.sent,e.t7=(0,e.t5)(e.t6),e.t8=e.t4.concat.call(e.t4,e.t7),e.next=22,e.t2.apply.call(e.t2,e.t3,e.t8);case 22:return e.t9=e.sent,e.abrupt("return",e.t0._wrapTroveChangeWithFees.call(e.t0,e.t1,e.t9));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"closeTrove",value:function(){var e=c(y.mark((function e(t){var n,a;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T._getContracts(this._readable.connection),a=n.borrowerOperations,e.t0=this,e.next=4,a.estimateAndPopulate.closeTrove(s({},t),k);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapTroveClosure.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeNueTrove",value:function(){var e=c(y.mark((function e(t){var n,a;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T._getContracts(this._readable.connection),a=n.borrowerOperations,e.t0=this,e.next=4,a.estimateAndPopulate.closeNueTrove(s({},t),k);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapTroveClosure.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"depositCollateral",value:function(e,t){return this.adjustTrove({depositCollateral:e},void 0,t)}},{key:"withdrawCollateral",value:function(e,t){return this.adjustTrove({withdrawCollateral:e},void 0,t)}},{key:"borrowZUSD",value:function(e,t,n){return this.adjustTrove({borrowZUSD:e},t,n)}},{key:"repayZUSD",value:function(e,t){return this.adjustTrove({repayZUSD:e},void 0,t)}},{key:"adjustTrove",value:function(){var e=c(y.mark((function e(t,n,r){var i,u,l,c,d,p,b,f,m,h,j,g,O,w,_,C,R;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=T._requireAddress(this._readable.connection,r),d=T._getContracts(this._readable.connection),p=d.borrowerOperations,b=v._normalizeTroveAdjustment(t),f=b.depositCollateral,m=b.withdrawCollateral,h=b.borrowZUSD,j=b.repayZUSD,e.next=6,Promise.all([this._readable.getTrove(c),h&&this._readable.getFees()]);case 6:return g=e.sent,O=o(g,2),w=O[0],_=O[1],C=null===_||void 0===_?void 0:_.borrowingRate(),R=w.adjust(b,C),n=void 0!==n?v.Decimal.from(n):null!==(u=null===C||void 0===C?void 0:C.add(x))&&void 0!==u?u:v.Decimal.ZERO,e.t0=this,e.t1=b,e.t2=(i=p.estimateAndPopulate).adjustTrove,e.t3=i,e.t4=[s({value:null===f||void 0===f?void 0:f.hex},r),S(h?E:k,D),n.hex,(null!==m&&void 0!==m?m:v.Decimal.ZERO).hex,(null!==(l=null!==h&&void 0!==h?h:j)&&void 0!==l?l:v.Decimal.ZERO).hex,!!h],e.t5=a,e.next=21,this._findHints(R);case 21:return e.t6=e.sent,e.t7=(0,e.t5)(e.t6),e.t8=e.t4.concat.call(e.t4,e.t7),e.next=26,e.t2.apply.call(e.t2,e.t3,e.t8);case 26:return e.t9=e.sent,e.abrupt("return",e.t0._wrapTroveChangeWithFees.call(e.t0,e.t1,e.t9));case 28:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"adjustNueTrove",value:function(){var e=c(y.mark((function e(t,n,r){var i,u,l,c,d,p,b,f,m,h,j,g,O,w,_,C,R;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=T._requireAddress(this._readable.connection,r),d=T._getContracts(this._readable.connection),p=d.borrowerOperations,b=v._normalizeTroveAdjustment(t),f=b.depositCollateral,m=b.withdrawCollateral,h=b.borrowZUSD,j=b.repayZUSD,e.next=6,Promise.all([this._readable.getTrove(c),h&&this._readable.getFees()]);case 6:return g=e.sent,O=o(g,2),w=O[0],_=O[1],C=null===_||void 0===_?void 0:_.borrowingRate(),R=w.adjust(b,C),n=void 0!==n?v.Decimal.from(n):null!==(u=null===C||void 0===C?void 0:C.add(x))&&void 0!==u?u:v.Decimal.ZERO,e.t0=this,e.t1=b,e.t2=(i=p.estimateAndPopulate).adjustNueTrove,e.t3=i,e.t4=[s({value:null===f||void 0===f?void 0:f.hex},r),S(h?E:k,D),n.hex,(null!==m&&void 0!==m?m:v.Decimal.ZERO).hex,(null!==(l=null!==h&&void 0!==h?h:j)&&void 0!==l?l:v.Decimal.ZERO).hex,!!h],e.t5=a,e.next=21,this._findHints(R);case 21:return e.t6=e.sent,e.t7=(0,e.t5)(e.t6),e.t8=e.t4.concat.call(e.t4,e.t7),e.next=26,e.t2.apply.call(e.t2,e.t3,e.t8);case 26:return e.t9=e.sent,e.abrupt("return",e.t0._wrapTroveChangeWithFees.call(e.t0,e.t1,e.t9));case 28:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"claimCollateralSurplus",value:function(){var e=c(y.mark((function e(t){var n,a;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T._getContracts(this._readable.connection),a=n.borrowerOperations,e.t0=this,e.next=4,a.estimateAndPopulate.claimCollateral(s({},t),k);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setPrice",value:function(){var e=c(y.mark((function e(t,n){var a,r;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=T._getContracts(this._readable.connection),r=a.priceFeed,j._priceFeedIsTestnet(r)){e.next=3;break}throw new Error("setPrice() unavailable on this deployment of Liquity");case 3:return e.t0=this,e.next=6,r.estimateAndPopulate.setPrice(s({},n),k,v.Decimal.from(t).hex);case 6:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"liquidate",value:function(){var e=c(y.mark((function e(t,n){var a,r;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=T._getContracts(this._readable.connection),r=a.troveManager,!Array.isArray(t)){e.next=9;break}return e.t0=this,e.next=5,r.estimateAndPopulate.batchLiquidateTroves(s({},n),C,t);case 5:return e.t1=e.sent,e.abrupt("return",e.t0._wrapLiquidation.call(e.t0,e.t1));case 9:return e.t2=this,e.next=12,r.estimateAndPopulate.liquidate(s({},n),C,t);case 12:return e.t3=e.sent,e.abrupt("return",e.t2._wrapLiquidation.call(e.t2,e.t3));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"liquidateUpTo",value:function(){var e=c(y.mark((function e(t,n){var a,r;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T._getContracts(this._readable.connection),r=a.troveManager,e.t0=this,e.next=4,r.estimateAndPopulate.liquidateTroves(s({},n),C,t);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapLiquidation.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"depositZUSDInStabilityPool",value:function(){var e=c(y.mark((function e(t,n,a){var r,i,o,u;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=T._getContracts(this._readable.connection),o=i.stabilityPool,u=v.Decimal.from(t),e.t0=this,e.t1={depositZUSD:u},e.next=6,o.estimateAndPopulate.provideToSP(s({},a),C,u.hex,null!==(r=null!==n&&void 0!==n?n:this._readable.connection.frontendTag)&&void 0!==r?r:h.AddressZero);case 6:return e.t2=e.sent,e.abrupt("return",e.t0._wrapStabilityDepositTopup.call(e.t0,e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"withdrawZUSDFromStabilityPool",value:function(){var e=c(y.mark((function e(t,n){var a,r;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T._getContracts(this._readable.connection),r=a.stabilityPool,e.t0=this,e.next=4,r.estimateAndPopulate.withdrawFromSP(s({},n),C,v.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapStabilityDepositWithdrawal.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawGainsFromStabilityPool",value:function(){var e=c(y.mark((function e(t){var n,a;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T._getContracts(this._readable.connection),a=n.stabilityPool,e.t0=this,e.next=4,a.estimateAndPopulate.withdrawFromSP(s({},t),C,v.Decimal.ZERO.hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapStabilityPoolGainsWithdrawal.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transferCollateralGainToTrove",value:function(){var e=c(y.mark((function e(t){var n,r,i,u,l,c,d,p,b;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=T._requireAddress(this._readable.connection,t),i=T._getContracts(this._readable.connection),u=i.stabilityPool,e.next=4,Promise.all([this._readable.getTrove(r),this._readable.getStabilityDeposit(r)]);case 4:return l=e.sent,c=o(l,2),d=c[0],p=c[1],b=d.addCollateral(p.collateralGain),e.t0=this,e.t1=(n=u.estimateAndPopulate).withdrawETHGainToTrove,e.t2=n,e.t3=[s({},t),S(D,C)],e.t4=a,e.next=16,this._findHints(b);case 16:return e.t5=e.sent,e.t6=(0,e.t4)(e.t5),e.t7=e.t3.concat.call(e.t3,e.t6),e.next=21,e.t1.apply.call(e.t1,e.t2,e.t7);case 21:return e.t8=e.sent,e.abrupt("return",e.t0._wrapCollateralGainTransfer.call(e.t0,e.t8));case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendZUSD",value:function(){var e=c(y.mark((function e(t,n,a){var r,i;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=T._getContracts(this._readable.connection),i=r.zusdToken,e.t0=this,e.next=4,i.estimateAndPopulate.transfer(s({},a),k,t,v.Decimal.from(n).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"sendZERO",value:function(){var e=c(y.mark((function e(t,n,a){var r,i;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=T._getContracts(this._readable.connection),i=r.zeroToken,e.t0=this,e.next=4,i.estimateAndPopulate.transfer(s({},a),k,t,v.Decimal.from(n).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"redeemZUSD",value:function(){var e=c(y.mark((function e(n,r,u){var l,d,p,b,f,m,j,g,O,x,_,S,k,D=this;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=T._getContracts(this._readable.connection),d=l.troveManager,p=v.Decimal.from(n),e.next=4,Promise.all([this._readable.getFees(),this._readable.getTotal(),this._findRedemptionHints(p)]);case 4:if(b=e.sent,f=o(b,3),m=f[0],j=f[1],g=i(f[2]),O=g[0],x=g[1],_=g.slice(2),!O.isZero){e.next=14;break}throw new Error("redeemZUSD: amount too low to redeem (try at least ".concat(v.ZUSD_MINIMUM_NET_DEBT,")"));case 14:return S=function(e){return v.Decimal.min(m.redemptionRate(e.div(j.debt)).add(w),v.Decimal.ONE)},k=function(){var e=c(y.mark((function e(n,r){var i,o,l,c,p=arguments;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:n,l=p.length>3&&void 0!==p[3]?p[3]:[h.AddressZero,h.AddressZero,0],c=void 0!==r?v.Decimal.from(r):S(o),e.t0=P,e.next=6,(i=d.estimateAndPopulate).redeemCollateral.apply(i,[s({},u),E,o.hex,x].concat(a(l),[t._redeemMaxIterations,c.hex]));case 6:return e.t1=e.sent,e.t2=D._readable.connection,e.t3=n,e.t4=o,e.t5=o.lt(n)?function(e){return k(o.add(v.ZUSD_MINIMUM_NET_DEBT),null!==e&&void 0!==e?e:r)}:void 0,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4,e.t5));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.abrupt("return",k(p,r,O,_));case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"stakeZERO",value:function(){var e=c(y.mark((function e(t,n){var a,r;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T._getContracts(this._readable.connection),r=a.zeroStaking,e.t0=this,e.next=4,r.estimateAndPopulate.stake(s({},n),k,v.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unstakeZERO",value:function(){var e=c(y.mark((function e(t,n){var a,r;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T._getContracts(this._readable.connection),r=a.zeroStaking,e.t0=this,e.next=4,r.estimateAndPopulate.unstake(s({},n),k,v.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawGainsFromStaking",value:function(e){return this.unstakeZERO(v.Decimal.ZERO,e)}},{key:"registerFrontend",value:function(){var e=c(y.mark((function e(t,n){var a,r;return y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T._getContracts(this._readable.connection),r=a.stabilityPool,e.t0=this,e.next=4,r.estimateAndPopulate.registerFrontEnd(s({},n),k,v.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();t.PopulatableEthersLiquity=I},function(e,t,n){"use strict";var a=n(29),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.SendableEthersLiquity=void 0;var i=function(e){return e.send()},s=function(){function e(t){a(this,e),this._populate=t}return r(e,[{key:"openTrove",value:function(e,t,n){return this._populate.openTrove(e,t,n).then(i)}},{key:"openNueTrove",value:function(e,t,n){return this._populate.openNueTrove(e,t,n).then(i)}},{key:"closeTrove",value:function(e){return this._populate.closeTrove(e).then(i)}},{key:"closeNueTrove",value:function(e){return this._populate.closeNueTrove(e).then(i)}},{key:"adjustTrove",value:function(e,t,n){return this._populate.adjustTrove(e,t,n).then(i)}},{key:"adjustNueTrove",value:function(e,t,n){return this._populate.adjustNueTrove(e,t,n).then(i)}},{key:"depositCollateral",value:function(e,t){return this._populate.depositCollateral(e,t).then(i)}},{key:"withdrawCollateral",value:function(e,t){return this._populate.withdrawCollateral(e,t).then(i)}},{key:"borrowZUSD",value:function(e,t,n){return this._populate.borrowZUSD(e,t,n).then(i)}},{key:"repayZUSD",value:function(e,t){return this._populate.repayZUSD(e,t).then(i)}},{key:"setPrice",value:function(e,t){return this._populate.setPrice(e,t).then(i)}},{key:"liquidate",value:function(e,t){return this._populate.liquidate(e,t).then(i)}},{key:"liquidateUpTo",value:function(e,t){return this._populate.liquidateUpTo(e,t).then(i)}},{key:"depositZUSDInStabilityPool",value:function(e,t,n){return this._populate.depositZUSDInStabilityPool(e,t,n).then(i)}},{key:"withdrawZUSDFromStabilityPool",value:function(e,t){return this._populate.withdrawZUSDFromStabilityPool(e,t).then(i)}},{key:"withdrawGainsFromStabilityPool",value:function(e){return this._populate.withdrawGainsFromStabilityPool(e).then(i)}},{key:"transferCollateralGainToTrove",value:function(e){return this._populate.transferCollateralGainToTrove(e).then(i)}},{key:"sendZUSD",value:function(e,t,n){return this._populate.sendZUSD(e,t,n).then(i)}},{key:"sendZERO",value:function(e,t,n){return this._populate.sendZERO(e,t,n).then(i)}},{key:"redeemZUSD",value:function(e,t,n){return this._populate.redeemZUSD(e,t,n).then(i)}},{key:"claimCollateralSurplus",value:function(e){return this._populate.claimCollateralSurplus(e).then(i)}},{key:"stakeZERO",value:function(e,t){return this._populate.stakeZERO(e,t).then(i)}},{key:"unstakeZERO",value:function(e,t){return this._populate.unstakeZERO(e,t).then(i)}},{key:"withdrawGainsFromStaking",value:function(e){return this._populate.withdrawGainsFromStaking(e).then(i)}},{key:"registerFrontend",value:function(e,t){return this._populate.registerFrontend(e,t).then(i)}}]),e}();t.SendableEthersLiquity=s},,,function(e,t,n){"use strict";var a=n(39),r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LiquityStoreProvider=t.LiquityStoreContext=void 0;var o=s(n(1));t.LiquityStoreContext=o.createContext(void 0);t.LiquityStoreProvider=function(e){var n=e.store,r=e.loader,i=e.children,s=o.useState(),u=a(s,2),l=u[0],c=u[1];return o.useEffect((function(){n.onLoaded=function(){return c(n)};var e=n.start();return function(){n.onLoaded=void 0,c(void 0),e()}}),[n]),l?o.default.createElement(t.LiquityStoreContext.Provider,{value:l},i):o.default.createElement(o.default.Fragment,null,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equals=void 0;var a=function(e,t){var n=Object.keys(e),a=Object.keys(t);return n.length===a.length&&n.every((function(n){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(t,n)&&Object.is(e[n],t[n])}))},r=function(e){return null!==e&&"object"===typeof e};t.equals=function(e,t){return r(e)&&r(t)?a(e,t):Object.is(e,t)}},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(39),i=n(50),s=n(29),o=n(31),u=n(98),l=n(70),c=n(44),d=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.BatchedWebSocketAugmentedWeb3Provider=t.Batched=t.isBatchedProvider=void 0;var p=n(17),y=n(103),b=n(3),f=n(123),m={1:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE441",3:"0x53C43764255c17BD724F74c4eF150724AC50a3ed",4:"0x42Ad527de7d4e9d9d011aC45B31D8551f8Fe9821",5:"0x77dCa2C955b15e9dE4dbBCf1246B4B85b651e50e",42:"0x2cc8688C5f75E365aaEEb4ea8D6a480405A48D2A"},h=[{type:"function",name:"aggregate",stateMutability:"nonpayable",constant:!1,payable:!1,inputs:[{components:[{name:"target",type:"address"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],outputs:[{name:"blockNumber",type:"uint256"},{name:"returnData",type:"bytes[]"}]},{type:"function",name:"getEthBalance",stateMutability:"view",constant:!0,payable:!1,inputs:[{name:"addr",type:"address"}],outputs:[{name:"balance",type:"uint256"}]}],v=function(e){return void 0===e.gasLimit&&void 0===e.gasPrice&&void 0===e.value},T=function(e,t){return e.to===t&&"string"===typeof e.data&&e.data.startsWith("0x252dba42")},j=[];t.isBatchedProvider=function(e){return j.some((function(t){return e instanceof t}))};t.Batched=function(e){var t=function(e){c(n,e);var t=d(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).batchingDelayMs=10,e._chainId=0,e._batched={calls:[],callbacks:[]},e._numberOfBatchedCalls=0,e._numberOfActualCalls=0,e}return o(n,[{key:"chainId",get:function(){return this._chainId},set:function(e){if(this._multicall)throw new Error("can only set chainId once");(function(e){return e in m})(e)&&(this._multicall=new y.Contract(m[e],h,this)),this._chainId=e}},{key:"_dispatchCalls",value:function(){var e=i(a.mark((function e(){var t,i,s,o,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._batched,i=t.calls,s=t.callbacks,o=t.blockTag,this._batched={calls:[],callbacks:[]},e.prev=2,!(i.length>1)){e.next=9;break}return e.next=6,this._multicall.callStatic.aggregate(i,{blockTag:o}).then((function(e){return e.returnData}));case 6:e.t0=e.sent,e.next=13;break;case 9:return e.next=11,u(l(n.prototype),"call",this).call(this,{to:i[0].target,data:i[0].callData},o);case 11:e.t1=e.sent,e.t0=[e.t1];case 13:c=e.t0,s.forEach((function(e,t){return(0,r(e,1)[0])(c[t])})),e.next=20;break;case 17:e.prev=17,e.t2=e.catch(2),s.forEach((function(t){return(0,r(t,2)[1])(e.t2)}));case 20:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"_enqueueCall",value:function(e){var t=this;return void 0!==this._timeoutId&&clearTimeout(this._timeoutId),this._batched.calls.push(e),this._timeoutId=setTimeout((function(){return t._dispatchCalls()}),this.batchingDelayMs),new Promise((function(e,n){return t._batched.callbacks.push([e,n])}))}},{key:"_alreadyBatchedCallsConflictWith",value:function(e){var t;return 0!==this._batched.calls.length&&(null!==e&&void 0!==e?e:"latest")!==(null!==(t=this._batched.blockTag)&&void 0!==t?t:"latest")}},{key:"call",value:function(){var e=i(a.mark((function e(t,i){var s,o,c,d,p;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._multicall){e.next=4;break}return e.abrupt("return",u(l(n.prototype),"call",this).call(this,t,i));case 4:s=(new Date).getTime(),void 0===this._timeOfLastRatioCheck?this._timeOfLastRatioCheck=s:s-this._timeOfLastRatioCheck>=1e4&&this._numberOfActualCalls&&(this._numberOfBatchedCalls=0,this._numberOfActualCalls=0,this._timeOfLastRatioCheck=s);case 6:return e.next=8,Promise.all([b.resolveProperties(t),i]);case 8:if(o=e.sent,c=r(o,2),d=c[0],p=c[1],!T(d,this._multicall.address)&&v(d)&&!this._alreadyBatchedCallsConflictWith(p)){e.next=17;break}return this._numberOfActualCalls++,e.abrupt("return",u(l(n.prototype),"call",this).call(this,d,p));case 17:return this._numberOfBatchedCalls++,0===this._batched.calls.length&&(this._batched.blockTag=p),e.abrupt("return",this._enqueueCall({target:d.to,callData:d.data}));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=i(a.mark((function e(t,i){var s,o,c,d,y,b,f;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t,i]);case 2:if(s=e.sent,o=r(s,2),c=o[0],d=o[1],p.isAddress(c)&&this._multicall){e.next=8;break}return e.abrupt("return",u(l(n.prototype),"getBalance",this).call(this,c,i));case 8:return e.next=10,this._multicall.functions.getEthBalance(c,{blockTag:d});case 10:return y=e.sent,b=r(y,1),f=b[0],e.abrupt("return",f);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(e);return j.push(t),t},t.BatchedWebSocketAugmentedWeb3Provider=t.Batched(f.WebSocketAugmentedWeb3Provider)},,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,function(e){e.exports=JSON.parse("null")},function(e){e.exports=JSON.parse('{"chainId":31,"version":"3cac885919b5c9517bea41e92e69984aaac5f75e","deploymentDate":1637956213000,"bootstrapPeriod":1209600,"governanceAddress":"0x4D1A9fD1E1e67E83Ffe72Bdd769088d689993E4B","sovFeeCollectorAddress":"0x85B19DD6E3c6cCC54D40c1bAEC15058962B8245b","wrbtcAddress":"0x69FE5cEC81D5eF92600c1A0dB1F11986AB3758Ab","presaleAddress":"0xC4C82fE6d6D531cf7bE8DaC7F9F0Ba63FED4c8d0","marketMakerAddress":"0x93e58CD85406749B8F0aDE90caBB6bF6Ddb05f7d","_priceFeedIsTestnet":true,"_isDev":false,"addresses":{"activePool":"0xf63376674Cb3A335523B0e993D76776f6C32031b","borrowerOperations":"0xd33264bb4a2003FBe832D34a707b534f4E76A3C8","troveManager":"0x59668871A0154D8ea37B7f44678C252c7DfCB9C8","troveManagerRedeemOps":"0x6191A24689Aa5d0eab14316bf90aE9cADb55C4DD","collSurplusPool":"0xEF10bb36DA0f72180e26F86F030a05A36400b4BE","communityIssuance":"0x5Dc4458c29a4a0d829eD0817A982DD4b2763362A","defaultPool":"0x95C4cEfa74198f6Fb6d496535C1b6e0b2796b4f0","hintHelpers":"0xf6Ee149b688ea21c8a0f5f610C97E28711b5f48C","zeroStaking":"0x1f89b6519dA96f33D3Df575f375Cc05f1202E330","priceFeed":"0x7538ea9A9b590a355D03c9c003B3d165CC16c87D","sortedTroves":"0x76FbE452CeCeE0Fc5175c9D67d0A6DE680a3eBCB","stabilityPool":"0xEf7743CA9BC3214111678194896b2c6834eD3E7D","gasPool":"0x0326E2c9Ae903B0D28d0E4D1FD58E8c6b040b10a","liquityBaseParams":"0x2027eAeAD571F44D6e2054a153b3D6167EF1B38B","feeDistributor":"0x7d591595aF8255185Bfe35C336010B49594F8ab4","zusdToken":"0x42713A6D207B1d831288f0497c7a923A517aebD9","zeroToken":"0xAc5c5917E713581c8C8b78c7B12F2D67DA0323F0","multiTroveGetter":"0x8513E6c2FB28440eF6764ef67bAC911a9F189B71"},"startBlock":2370173}')},function(e){e.exports=JSON.parse('{"chainId":33,"version":"85ae75b4b6a765b7bb45b438036f9aef1758e8e9","deploymentDate":1637757544000,"bootstrapPeriod":1209600,"governanceAddress":"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","sovFeeCollectorAddress":"0x77045E71a7A2c50903d88e564cD72fab11e82051","wrbtcAddress":"0xDA7Ce79725418F4F6E13Bf5F520C89Cec5f6A974","presaleAddress":"0x83C5541A6c8D2dBAD642f385d8d06Ca9B6C731ee","marketMakerAddress":"0xE0825f57Dd05Ef62FF731c27222A86E104CC4Cad","_priceFeedIsTestnet":true,"_isDev":false,"addresses":{"activePool":"0x1eD614cd3443EFd9c70F04b6d777aed947A4b0c4","borrowerOperations":"0x0e19674ebc2c2B6Df3e7a1417c49b50235c61924","troveManager":"0x726ECC75d5D51356AA4d0a5B648790cC345985ED","troveManagerRedeemOps":"0xdac5481925A298B95Bf5b54c35b68FC6fc2eF423","collSurplusPool":"0xeFb80DB9E2d943A492Bd988f4c619495cA815643","communityIssuance":"0x79bbC6403708C6578B0896bF1d1a91D2BB2AAa1c","defaultPool":"0x20804b7317D2F4d0d2123f30c2D3A6B0E33DfB37","hintHelpers":"0xC9dB73F54D43479b1a67DB2284bCFed17b0A13c2","zeroStaking":"0x23EF9610F53092A66bf224862BfD45216d9f3ea2","priceFeed":"0xbAFEd90451970adF0B511a1E9BCd1396a0Fe7f10","sortedTroves":"0x9f84F92d952f90027618089F6F2a3481f1a3fa0F","stabilityPool":"0x9957A338858bc941dA9D0ED2ACBCa4F16116B836","gasPool":"0x73ec81da0C72DD112e06c09A6ec03B5544d26F05","liquityBaseParams":"0x24307fAF57D235783582F1912Ef6A384ab456568","feeDistributor":"0x13cF0a53b6102b518e8b547d5E50b38C1b089E08","zusdToken":"0x0Aa058aD63E36bC2f98806f2D638353AE89C3634","zeroToken":"0x967AF6E8ACdB2476Ea634aC764c0A6EF474aba87","multiTroveGetter":"0x91FbADa78ba89F9D316192cf67b7efec8Be56711","nueToken":"0x4977f70457fFeF89025B49dFc0DFAD60982bAC7c"},"startBlock":26}')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_ETH","type":"uint256"}],"name":"ActivePoolETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_ZUSDDebt","type":"uint256"}],"name":"ActivePoolZUSDDebtUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newDefaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"ETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"ZUSDBalanceUpdated","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"decreaseZUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"defaultPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getZUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"increaseZUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendETH","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_defaultPoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stabilityPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_collSurplusPoolAddress","type":"address"}],"name":"CollSurplusPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_defaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_feeDistributorAddress","type":"address"}],"name":"FeeDistributorAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_gasPoolAddress","type":"address"}],"name":"GasPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newPriceFeedAddress","type":"address"}],"name":"PriceFeedAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"arrayIndex","type":"uint256"}],"name":"TroveCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"stake","type":"uint256"},{"indexed":false,"internalType":"enum BorrowerOperations.BorrowerOperation","name":"operation","type":"uint8"}],"name":"TroveUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zeroStakingAddress","type":"address"}],"name":"ZEROStakingAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_ZUSDFee","type":"uint256"}],"name":"ZUSDBorrowingFeePaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zusdTokenAddress","type":"address"}],"name":"ZUSDTokenAddressChanged","type":"event"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ZUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"addColl","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_collWithdrawal","type":"uint256"},{"internalType":"uint256","name":"_ZUSDChange","type":"uint256"},{"internalType":"bool","name":"_isDebtIncrease","type":"bool"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"adjustNueTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_collWithdrawal","type":"uint256"},{"internalType":"uint256","name":"_ZUSDChange","type":"uint256"},{"internalType":"bool","name":"_isDebtIncrease","type":"bool"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"adjustTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"claimCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"closeNueTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"closeTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDistributor","outputs":[{"internalType":"contract IFeeDistributor","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_debt","type":"uint256"}],"name":"getCompositeDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"liquityBaseParams","outputs":[{"internalType":"contract ILiquityBaseParams","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"masset","outputs":[{"internalType":"contract IMasset","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"moveETHGainToTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_ZUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"openNueTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_ZUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"openTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ZUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"repayZUSD","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_feeDistributorAddress","type":"address"},{"internalType":"address","name":"_liquityBaseParamsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"},{"internalType":"address","name":"_defaultPoolAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_gasPoolAddress","type":"address"},{"internalType":"address","name":"_collSurplusPoolAddress","type":"address"},{"internalType":"address","name":"_priceFeedAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_zusdTokenAddress","type":"address"},{"internalType":"address","name":"_zeroStakingAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_massetAddress","type":"address"}],"name":"setMassetAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collWithdrawal","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"withdrawColl","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_ZUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"withdrawZUSD","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"zeroStaking","outputs":[{"internalType":"contract IZEROStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"zeroStakingAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"zusdToken","outputs":[{"internalType":"contract IZUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_baseRate","type":"uint256"}],"name":"BaseRateUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_collSurplusPoolAddress","type":"address"}],"name":"CollSurplusPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_defaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_feeDistributorAddress","type":"address"}],"name":"FeeDistributorAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_gasPoolAddress","type":"address"}],"name":"GasPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_L_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_L_ZUSDDebt","type":"uint256"}],"name":"LTermsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastFeeOpTime","type":"uint256"}],"name":"LastFeeOpTimeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_liquidatedDebt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_liquidatedColl","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_collGasCompensation","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ZUSDGasCompensation","type":"uint256"}],"name":"Liquidation","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"LiquityBaseParamsAddressChanges","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newPriceFeedAddress","type":"address"}],"name":"PriceFeedAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_attemptedZUSDAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_actualZUSDAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ETHSent","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ETHFee","type":"uint256"}],"name":"Redemption","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_totalStakesSnapshot","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_totalCollateralSnapshot","type":"uint256"}],"name":"SystemSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newTotalStakes","type":"uint256"}],"name":"TotalStakesUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newIndex","type":"uint256"}],"name":"TroveIndexUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"operation","type":"uint8"}],"name":"TroveLiquidated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerRedeemOps","type":"address"}],"name":"TroveManagerRedeemOpsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_L_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_L_ZUSDDebt","type":"uint256"}],"name":"TroveSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"stake","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"operation","type":"uint8"}],"name":"TroveUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zeroStakingAddress","type":"address"}],"name":"ZEROStakingAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zeroTokenAddress","type":"address"}],"name":"ZEROTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newZUSDTokenAddress","type":"address"}],"name":"ZUSDTokenAddressChanged","type":"event"},{"inputs":[],"name":"BETA","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BOOTSTRAP_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"L_ETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"L_ZUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINUTE_DECAY_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_ONE_MINUTE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"TroveOwners","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"Troves","outputs":[{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"stake","type":"uint256"},{"internalType":"enum TroveManagerStorage.Status","name":"status","type":"uint8"},{"internalType":"uint128","name":"arrayIndex","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ZUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"_getCurrentICR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"_getPendingETHReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"_getPendingZUSDDebtReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_getRedemptionRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"_hasPendingRewards","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_stabilityPool","outputs":[{"internalType":"contract IStabilityPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_zeroStaking","outputs":[{"internalType":"contract IZEROStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_zeroToken","outputs":[{"internalType":"contract IZEROToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_zusdToken","outputs":[{"internalType":"contract IZUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"addTroveOwnerToArray","outputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"applyPendingRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"baseRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"_troveArray","type":"address[]"}],"name":"batchLiquidateTroves","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"checkRecoveryMode","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"closeTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decayBaseRateFromBorrowing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_collDecrease","type":"uint256"}],"name":"decreaseTroveColl","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_debtDecrease","type":"uint256"}],"name":"decreaseTroveDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDistributor","outputs":[{"internalType":"contract IFeeDistributor","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ZUSDDebt","type":"uint256"}],"name":"getBorrowingFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ZUSDDebt","type":"uint256"}],"name":"getBorrowingFeeWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBorrowingRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBorrowingRateWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"getCurrentICR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getEntireDebtAndColl","outputs":[{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"pendingZUSDDebtReward","type":"uint256"},{"internalType":"uint256","name":"pendingETHReward","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getNominalICR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getPendingETHReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getPendingZUSDDebtReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ETHDrawn","type":"uint256"}],"name":"getRedemptionFeeWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRedemptionRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRedemptionRateWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"getTCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveColl","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getTroveFromTroveOwnersArray","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTroveOwnersCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveStake","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveStatus","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"hasPendingRewards","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_collIncrease","type":"uint256"}],"name":"increaseTroveColl","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_debtIncrease","type":"uint256"}],"name":"increaseTroveDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"lastETHError_Redistribution","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastFeeOperationTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastZUSDDebtError_Redistribution","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"liquidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_n","type":"uint256"}],"name":"liquidateTroves","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"liquityBaseParams","outputs":[{"internalType":"contract ILiquityBaseParams","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ZUSDamount","type":"uint256"},{"internalType":"address","name":"_firstRedemptionHint","type":"address"},{"internalType":"address","name":"_upperPartialRedemptionHint","type":"address"},{"internalType":"address","name":"_lowerPartialRedemptionHint","type":"address"},{"internalType":"uint256","name":"_partialRedemptionHintNICR","type":"uint256"},{"internalType":"uint256","name":"_maxIterations","type":"uint256"},{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"}],"name":"redeemCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"removeStake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"rewardSnapshots","outputs":[{"internalType":"uint256","name":"ETH","type":"uint256"},{"internalType":"uint256","name":"ZUSDDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_feeDistributorAddress","type":"address"},{"internalType":"address","name":"_troveManagerRedeemOps","type":"address"},{"internalType":"address","name":"_liquityBaseParamsAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"},{"internalType":"address","name":"_defaultPoolAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_gasPoolAddress","type":"address"},{"internalType":"address","name":"_collSurplusPoolAddress","type":"address"},{"internalType":"address","name":"_priceFeedAddress","type":"address"},{"internalType":"address","name":"_zusdTokenAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_zeroTokenAddress","type":"address"},{"internalType":"address","name":"_zeroStakingAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_num","type":"uint256"}],"name":"setTroveStatus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalCollateralSnapshot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalStakesSnapshot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManagerRedeemOps","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"updateStakeAndTotalStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"updateTroveRewardSnapshots","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_baseRate","type":"uint256"}],"name":"BaseRateUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_L_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_L_ZUSDDebt","type":"uint256"}],"name":"LTermsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastFeeOpTime","type":"uint256"}],"name":"LastFeeOpTimeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_liquidatedDebt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_liquidatedColl","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_collGasCompensation","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ZUSDGasCompensation","type":"uint256"}],"name":"Liquidation","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_attemptedZUSDAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_actualZUSDAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ETHSent","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ETHFee","type":"uint256"}],"name":"Redemption","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_totalStakesSnapshot","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_totalCollateralSnapshot","type":"uint256"}],"name":"SystemSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newTotalStakes","type":"uint256"}],"name":"TotalStakesUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newIndex","type":"uint256"}],"name":"TroveIndexUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"enum TroveManagerBase.TroveManagerOperation","name":"_operation","type":"uint8"}],"name":"TroveLiquidated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_L_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_L_ZUSDDebt","type":"uint256"}],"name":"TroveSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_stake","type":"uint256"},{"indexed":false,"internalType":"enum TroveManagerBase.TroveManagerOperation","name":"_operation","type":"uint8"}],"name":"TroveUpdated","type":"event"},{"inputs":[],"name":"BETA","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BOOTSTRAP_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"L_ETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"L_ZUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINUTE_DECAY_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_ONE_MINUTE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"TroveOwners","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"Troves","outputs":[{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"stake","type":"uint256"},{"internalType":"enum TroveManagerStorage.Status","name":"status","type":"uint8"},{"internalType":"uint128","name":"arrayIndex","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ZUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"_getCurrentICR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"_getPendingETHReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"_getPendingZUSDDebtReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_getRedemptionRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"_hasPendingRewards","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_stabilityPool","outputs":[{"internalType":"contract IStabilityPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_zeroStaking","outputs":[{"internalType":"contract IZEROStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_zeroToken","outputs":[{"internalType":"contract IZEROToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_zusdToken","outputs":[{"internalType":"contract IZUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDistributor","outputs":[{"internalType":"contract IFeeDistributor","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastETHError_Redistribution","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastFeeOperationTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastZUSDDebtError_Redistribution","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"liquityBaseParams","outputs":[{"internalType":"contract ILiquityBaseParams","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ZUSDamount","type":"uint256"},{"internalType":"address","name":"_firstRedemptionHint","type":"address"},{"internalType":"address","name":"_upperPartialRedemptionHint","type":"address"},{"internalType":"address","name":"_lowerPartialRedemptionHint","type":"address"},{"internalType":"uint256","name":"_partialRedemptionHintNICR","type":"uint256"},{"internalType":"uint256","name":"_maxIterations","type":"uint256"},{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"}],"name":"redeemCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"rewardSnapshots","outputs":[{"internalType":"uint256","name":"ETH","type":"uint256"},{"internalType":"uint256","name":"ZUSDDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalCollateralSnapshot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalStakesSnapshot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManagerRedeemOps","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_user","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"ZUSDTokenBalanceUpdated","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"domainSeparator","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"permitTypeHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_poolAddress","type":"address"},{"internalType":"address","name":"_receiver","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"returnFromPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"address","name":"_poolAddress","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendToPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_account","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"CollBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"accountSurplus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"}],"name":"claimColl","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"}],"name":"getCollateral","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_communityPotAddress","type":"address"}],"name":"CommunityPotAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zeroTokenAddress","type":"address"}],"name":"FundingWalletAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_fundingWalletAddress","type":"uint256"}],"name":"TotalZEROIssuedUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zeroTokenAddress","type":"address"}],"name":"ZEROTokenAddressSet","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ISSUANCE_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_ONE_MINUTE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ZEROSupplyCap","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"communityPotAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"deploymentTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fundingWalletAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_zeroTokenAddress","type":"address"},{"internalType":"address","name":"_communityPotAddress","type":"address"},{"internalType":"address","name":"_fundingWalletAddress","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"issueZERO","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_ZEROamount","type":"uint256"}],"name":"receiveZero","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_ZEROamount","type":"uint256"}],"name":"sendZERO","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalZEROIssued","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"zeroToken","outputs":[{"internalType":"contract IZEROToken","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newDefaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_ETH","type":"uint256"}],"name":"DefaultPoolETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_ZUSDDebt","type":"uint256"}],"name":"DefaultPoolZUSDDebtUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"ETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"ZUSDBalanceUpdated","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"decreaseZUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getZUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"increaseZUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendETHToActivePool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"ONE_YEAR_IN_SECONDS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"domainSeparator","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getDeploymentStartTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_zeroStakingAddress","type":"address"},{"internalType":"address","name":"_marketMakerAddress","type":"address"},{"internalType":"address","name":"_presaleAddress","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"marketMakerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"permitTypeHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"presale","outputs":[{"internalType":"contract IBalanceRedirectPresale","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendToZEROStaking","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"zeroStakingAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ZUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_coll","type":"uint256"},{"internalType":"uint256","name":"_debt","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"computeCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"_coll","type":"uint256"},{"internalType":"uint256","name":"_debt","type":"uint256"}],"name":"computeNominalCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_CR","type":"uint256"},{"internalType":"uint256","name":"_numTrials","type":"uint256"},{"internalType":"uint256","name":"_inputRandomSeed","type":"uint256"}],"name":"getApproxHint","outputs":[{"internalType":"address","name":"hintAddress","type":"address"},{"internalType":"uint256","name":"diff","type":"uint256"},{"internalType":"uint256","name":"latestRandomSeed","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ZUSDamount","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_maxIterations","type":"uint256"}],"name":"getRedemptionHints","outputs":[{"internalType":"address","name":"firstRedemptionHint","type":"address"},{"internalType":"uint256","name":"partialRedemptionHintNICR","type":"uint256"},{"internalType":"uint256","name":"truncatedZUSDamount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"liquityBaseParams","outputs":[{"internalType":"contract ILiquityBaseParams","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_liquityBaseParamsAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_account","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_F_ETH","type":"uint256"}],"name":"F_ETHUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_F_ZUSD","type":"uint256"}],"name":"F_ZUSDUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_feeDistributorAddress","type":"address"}],"name":"FeeDistributorAddressAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_feeDistributorAddress","type":"address"}],"name":"FeeDistributorAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"staker","type":"address"},{"indexed":false,"internalType":"uint256","name":"newStake","type":"uint256"}],"name":"StakeChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_staker","type":"address"},{"indexed":false,"internalType":"uint256","name":"_F_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_F_ZUSD","type":"uint256"}],"name":"StakerSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"staker","type":"address"},{"indexed":false,"internalType":"uint256","name":"ZUSDGain","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"ETHGain","type":"uint256"}],"name":"StakingGainsWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_totalZEROStaked","type":"uint256"}],"name":"TotalZEROStakedUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zeroTokenAddress","type":"address"}],"name":"ZEROTokenAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zusdTokenAddress","type":"address"}],"name":"ZUSDTokenAddressSet","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"F_ETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"F_ZUSD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeDistributorAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getPendingETHGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getPendingZUSDGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ETHFee","type":"uint256"}],"name":"increaseF_ETH","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ZUSDFee","type":"uint256"}],"name":"increaseF_ZUSD","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_zeroTokenAddress","type":"address"},{"internalType":"address","name":"_zusdTokenAddress","type":"address"},{"internalType":"address","name":"_feeDistributorAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"snapshots","outputs":[{"internalType":"uint256","name":"F_ETH_Snapshot","type":"uint256"},{"internalType":"uint256","name":"F_ZUSD_Snapshot","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ZEROamount","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"stakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalZEROStaked","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ZEROamount","type":"uint256"}],"name":"unstake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"zeroToken","outputs":[{"internalType":"contract IZEROToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"zusdToken","outputs":[{"internalType":"contract IZUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"int256","name":"_startIdx","type":"int256"},{"internalType":"uint256","name":"_count","type":"uint256"}],"name":"getMultipleSortedTroves","outputs":[{"components":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"stake","type":"uint256"},{"internalType":"uint256","name":"snapshotETH","type":"uint256"},{"internalType":"uint256","name":"snapshotZUSDDebt","type":"uint256"}],"internalType":"struct MultiTroveGetter.CombinedTroveData[]","name":"_troves","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract TroveManager","name":"_troveManager","type":"address"},{"internalType":"contract ISortedTroves","name":"_sortedTroves","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract TroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastGoodPrice","type":"uint256"}],"name":"LastGoodPriceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"index","type":"uint8"},{"indexed":false,"internalType":"address","name":"priceFeedAddress","type":"address"}],"name":"PriceFeedBroken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"index","type":"uint8"},{"indexed":false,"internalType":"address","name":"newPriceFeedAddress","type":"address"}],"name":"PriceFeedUpdated","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fetchPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastGoodPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"_index","type":"uint8"},{"internalType":"address","name":"_newPriceFeed","type":"address"}],"name":"setAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_mainPriceFeed","type":"address"},{"internalType":"address","name":"_backupPriceFeed","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastGoodPrice","type":"uint256"}],"name":"LastGoodPriceUpdated","type":"event"},{"inputs":[],"name":"fetchPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"price","type":"uint256"}],"name":"setPrice","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_id","type":"address"},{"indexed":false,"internalType":"uint256","name":"_NICR","type":"uint256"}],"name":"NodeAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_id","type":"address"}],"name":"NodeRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedDoublyLLAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"contains","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"data","outputs":[{"internalType":"address","name":"head","type":"address"},{"internalType":"address","name":"tail","type":"address"},{"internalType":"uint256","name":"maxSize","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_NICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"findInsertPosition","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getFirst","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLast","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMaxSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"getNext","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"getPrev","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"},{"internalType":"uint256","name":"_NICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"insert","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isEmpty","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isFull","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"},{"internalType":"uint256","name":"_newNICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"reInsert","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"remove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_size","type":"uint256"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"setParams","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_NICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"validInsertPosition","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newCommunityIssuanceAddress","type":"address"}],"name":"CommunityIssuanceAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newDefaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_P","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_S","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_G","type":"uint256"}],"name":"DepositSnapshotUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ZUSDLoss","type":"uint256"}],"name":"ETHGainWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint128","name":"_currentEpoch","type":"uint128"}],"name":"EpochUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_kickbackRate","type":"uint256"}],"name":"FrontEndRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_P","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_G","type":"uint256"}],"name":"FrontEndSnapshotUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newFrontEndStake","type":"uint256"},{"indexed":false,"internalType":"address","name":"_depositor","type":"address"}],"name":"FrontEndStakeChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"}],"name":"FrontEndTagSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_G","type":"uint256"},{"indexed":false,"internalType":"uint128","name":"_epoch","type":"uint128"},{"indexed":false,"internalType":"uint128","name":"_scale","type":"uint128"}],"name":"G_Updated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_P","type":"uint256"}],"name":"P_Updated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newPriceFeedAddress","type":"address"}],"name":"PriceFeedAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_S","type":"uint256"},{"indexed":false,"internalType":"uint128","name":"_epoch","type":"uint128"},{"indexed":false,"internalType":"uint128","name":"_scale","type":"uint128"}],"name":"S_Updated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint128","name":"_currentScale","type":"uint128"}],"name":"ScaleUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newSortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"StabilityPoolETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"StabilityPoolZUSDBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newDeposit","type":"uint256"}],"name":"UserDepositChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_ZERO","type":"uint256"}],"name":"ZEROPaidToDepositor","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_ZERO","type":"uint256"}],"name":"ZEROPaidToFrontEnd","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newZUSDTokenAddress","type":"address"}],"name":"ZUSDTokenAddressChanged","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"P","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SCALE_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ZUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperations","outputs":[{"internalType":"contract IBorrowerOperations","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"communityIssuance","outputs":[{"internalType":"contract ICommunityIssuance","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentEpoch","outputs":[{"internalType":"uint128","name":"","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentScale","outputs":[{"internalType":"uint128","name":"","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"depositSnapshots","outputs":[{"internalType":"uint256","name":"S","type":"uint256"},{"internalType":"uint256","name":"P","type":"uint256"},{"internalType":"uint256","name":"G","type":"uint256"},{"internalType":"uint128","name":"scale","type":"uint128"},{"internalType":"uint128","name":"epoch","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"deposits","outputs":[{"internalType":"uint256","name":"initialValue","type":"uint256"},{"internalType":"address","name":"frontEndTag","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint128","name":"","type":"uint128"},{"internalType":"uint128","name":"","type":"uint128"}],"name":"epochToScaleToG","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint128","name":"","type":"uint128"},{"internalType":"uint128","name":"","type":"uint128"}],"name":"epochToScaleToSum","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"frontEndSnapshots","outputs":[{"internalType":"uint256","name":"S","type":"uint256"},{"internalType":"uint256","name":"P","type":"uint256"},{"internalType":"uint256","name":"G","type":"uint256"},{"internalType":"uint128","name":"scale","type":"uint128"},{"internalType":"uint128","name":"epoch","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"frontEndStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"frontEnds","outputs":[{"internalType":"uint256","name":"kickbackRate","type":"uint256"},{"internalType":"bool","name":"registered","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_frontEnd","type":"address"}],"name":"getCompoundedFrontEndStake","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_depositor","type":"address"}],"name":"getCompoundedZUSDDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_depositor","type":"address"}],"name":"getDepositorETHGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_depositor","type":"address"}],"name":"getDepositorZEROGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_frontEnd","type":"address"}],"name":"getFrontEndZEROGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalZUSDDeposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastETHError_Offset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastZEROError","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastZUSDLossError_Offset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"liquityBaseParams","outputs":[{"internalType":"contract ILiquityBaseParams","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_debtToOffset","type":"uint256"},{"internalType":"uint256","name":"_collToAdd","type":"uint256"}],"name":"offset","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"address","name":"_frontEndTag","type":"address"}],"name":"provideToSP","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_kickbackRate","type":"uint256"}],"name":"registerFrontEnd","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_liquityBaseParamsAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"},{"internalType":"address","name":"_zusdTokenAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_priceFeedAddress","type":"address"},{"internalType":"address","name":"_communityIssuanceAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"withdrawETHGainToTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdrawFromSP","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"zusdToken","outputs":[{"internalType":"contract IZUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e){e.exports=JSON.parse("[]")},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_BORROWING_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"REDEMPTION_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"BORROWING_FEE_FLOOR_","type":"uint256"}],"name":"setBorrowingFeeFloor","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"CCR_","type":"uint256"}],"name":"setCCR","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"MCR_","type":"uint256"}],"name":"setMCR","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"MAX_BORROWING_FEE_","type":"uint256"}],"name":"setMaxBorrowingFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"PERCENT_DIVISOR_","type":"uint256"}],"name":"setPercentDivisor","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"REDEMPTION_FEE_FLOOR_","type":"uint256"}],"name":"setRedemptionFeeFloor","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_rbtcDistributedAmount","type":"uint256"}],"name":"RBTCistributed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sovFeeCollectorAddress","type":"address"}],"name":"SOVFeeCollectorAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_wrbtcAddress","type":"address"}],"name":"WrbtcAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_zusdDistributedAmount","type":"uint256"}],"name":"ZUSDDistributed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zusdTokenAddress","type":"address"}],"name":"ZUSDTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_zeroStakingAddress","type":"address"}],"name":"ZeroStakingAddressChanged","type":"event"},{"inputs":[],"name":"FEE_TO_SOV_COLLECTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperations","outputs":[{"internalType":"contract IBorrowerOperations","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"distributeFees","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_sovFeeCollectorAddress","type":"address"},{"internalType":"address","name":"_zeroStakingAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_wrbtcAddress","type":"address"},{"internalType":"address","name":"_zusdTokenAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"FEE_TO_SOV_COLLECTOR_","type":"uint256"}],"name":"setFeeToSOVCollector","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sovFeeCollector","outputs":[{"internalType":"contract IFeeSharingProxy","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"wrbtc","outputs":[{"internalType":"contract IWrbtc","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"zeroStaking","outputs":[{"internalType":"contract IZEROStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"zusdToken","outputs":[{"internalType":"contract IZUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._connectToMulticall=void 0;var a=n(103),r=[{constant:!0,inputs:[],name:"getCurrentBlockTimestamp",outputs:[{name:"timestamp",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],i={1:"0xeefba1e63905ef1d7acba5a8513c70307c1ce441",3:"0x53c43764255c17bd724f74c4ef150724ac50a3ed",4:"0x42ad527de7d4e9d9d011ac45b31d8551f8fe9821",5:"0x77dca2c955b15e9de4dbbcf1246b4b85b651e50e",42:"0x2cc8688c5f75e365aaeeb4ea8d6a480405a48d2a"};t._connectToMulticall=function(e,t){return function(e){return e in i}(t)?new a.Contract(i[t],r,e):void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},,,,function(e,t,n){"use strict";var a=n(98),r=n(70),i=n(44),s=n(45),o=n(29),u=n(31),l=n(54),c=n(39),d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TroveWithPendingRedistribution=t.UserTrove=t._emptyTrove=t.Trove=t._normalizeTroveAdjustment=t._normalizeTroveCreation=void 0;var p=d(n(79)),y=n(72),b=n(101),f=function(e,t){return{type:"invalidCreation",invalidTrove:e,error:t}},m=function(e){return{type:"creation",params:e}},h=function(e){return{type:"closure",params:e}},v=function(e,t){return{type:"adjustment",params:e,setToZero:t}},T=function(e){return void 0!==e[1]},j=["depositCollateral","borrowZUSD"];var g=function(e){var t=c(e,2),n=t[0],a=t[1];return[n,y.Decimal.from(a)]},O=function(e){return!c(e,2)[1].isZero};t._normalizeTroveCreation=function(e){var t=Object.entries(e).filter(T);return function(e){var t=e.filter((function(e){var t=c(e,1)[0];return!j.includes(t)})).map((function(e){var t=c(e,1)[0];return"'".concat(t,"'")}));if(t.length>0)throw new Error("TroveCreationParams: property ".concat(t.join(", ")," not allowed"))}(t),function(e){var t=Object.fromEntries(e),n=j.filter((function(e){return!(e in t)})).map((function(e){return"'".concat(e,"'")}));if(n.length>0)throw new Error("TroveCreationParams: property ".concat(n.join(", ")," missing"));return t}(t.map(g))};var x=["depositCollateral","withdrawCollateral","borrowZUSD","repayZUSD"];var w=function(e){var t=Object.fromEntries(e),n=function(e){var t=e.depositCollateral,n=e.withdrawCollateral;if(void 0!==t&&void 0!==n)throw new Error("TroveAdjustmentParams: 'depositCollateral' and 'withdrawCollateral' can't be present at the same time");return void 0!==t?{depositCollateral:t}:void 0!==n?{withdrawCollateral:n}:void 0}(t),a=function(e){var t=e.borrowZUSD,n=e.repayZUSD;if(void 0!==t&&void 0!==n)throw new Error("TroveAdjustmentParams: 'borrowZUSD' and 'repayZUSD' can't be present at the same time");return void 0!==t?{borrowZUSD:t}:void 0!==n?{repayZUSD:n}:void 0}(t);if(void 0!==n&&void 0!==a)return l(l({},n),a);if(void 0!==n)return n;if(void 0!==a)return a;throw new Error("TroveAdjustmentParams: must include at least one non-zero parameter")};t._normalizeTroveAdjustment=function(e){var t=Object.entries(e).filter(T);!function(e){var t=e.filter((function(e){var t=c(e,1)[0];return!x.includes(t)})).map((function(e){var t=c(e,1)[0];return"'".concat(t,"'")}));if(t.length>0)throw new Error("TroveAdjustmentParams: property ".concat(t.join(", ")," not allowed"))}(t);var n=t.map(g).filter(O);return w(n)};var _=function(e,t){return t.mul(y.Decimal.ONE.add(e))},S=function(e,t){return t._divCeil(y.Decimal.ONE.add(e))},k=y.Decimal.from(100),E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.Decimal.ZERO,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.Decimal.ZERO;o(this,e),this.collateral=t,this.debt=n}return u(e,[{key:"isEmpty",get:function(){return this.collateral.isZero&&this.debt.isZero}},{key:"netDebt",get:function(){if(this.debt.lt(b.ZUSD_LIQUIDATION_RESERVE))throw new Error("netDebt should not be used when debt < ".concat(b.ZUSD_LIQUIDATION_RESERVE));return this.debt.sub(b.ZUSD_LIQUIDATION_RESERVE)}},{key:"_nominalCollateralRatio",get:function(){return this.collateral.mulDiv(k,this.debt)}},{key:"collateralRatio",value:function(e){return this.collateral.mulDiv(e,this.debt)}},{key:"collateralRatioIsBelowMinimum",value:function(e){return this.collateralRatio(e).lt(b.MINIMUM_COLLATERAL_RATIO)}},{key:"collateralRatioIsBelowCritical",value:function(e){return this.collateralRatio(e).lt(b.CRITICAL_COLLATERAL_RATIO)}},{key:"isOpenableInRecoveryMode",value:function(e){return this.collateralRatio(e).gte(b.CRITICAL_COLLATERAL_RATIO)}},{key:"toString",value:function(){return"{ collateral: ".concat(this.collateral,", debt: ").concat(this.debt," }")}},{key:"equals",value:function(e){return this.collateral.eq(e.collateral)&&this.debt.eq(e.debt)}},{key:"add",value:function(t){return new e(this.collateral.add(t.collateral),this.debt.add(t.debt))}},{key:"addCollateral",value:function(t){return new e(this.collateral.add(t),this.debt)}},{key:"addDebt",value:function(t){return new e(this.collateral,this.debt.add(t))}},{key:"subtract",value:function(t){var n=t.collateral,a=t.debt;return new e(this.collateral.gt(n)?this.collateral.sub(n):y.Decimal.ZERO,this.debt.gt(a)?this.debt.sub(a):y.Decimal.ZERO)}},{key:"subtractCollateral",value:function(t){return new e(this.collateral.gt(t)?this.collateral.sub(t):y.Decimal.ZERO,this.debt)}},{key:"subtractDebt",value:function(t){return new e(this.collateral,this.debt.gt(t)?this.debt.sub(t):y.Decimal.ZERO)}},{key:"multiply",value:function(t){return new e(this.collateral.mul(t),this.debt.mul(t))}},{key:"setCollateral",value:function(t){return new e(y.Decimal.from(t),this.debt)}},{key:"setDebt",value:function(t){return new e(this.collateral,y.Decimal.from(t))}},{key:"_debtChange",value:function(e,t){var n=e.debt;return n.gt(this.debt)?{borrowZUSD:S(t,n.sub(this.debt))}:{repayZUSD:this.debt.sub(n)}}},{key:"_collateralChange",value:function(e){var t=e.collateral;return t.gt(this.collateral)?{depositCollateral:t.sub(this.collateral)}:{withdrawCollateral:this.collateral.sub(t)}}},{key:"whatChanged",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.MINIMUM_BORROWING_RATE;if(!this.collateral.eq(e.collateral)||!this.debt.eq(e.debt))return this.isEmpty?e.debt.lt(b.ZUSD_LIQUIDATION_RESERVE)?f(e,"missingLiquidationReserve"):m({depositCollateral:e.collateral,borrowZUSD:S(n,e.netDebt)}):e.isEmpty?h(this.netDebt.nonZero?{withdrawCollateral:this.collateral,repayZUSD:this.netDebt}:{withdrawCollateral:this.collateral}):this.collateral.eq(e.collateral)?v(this._debtChange(e,n),e.debt.zero&&"debt"):this.debt.eq(e.debt)?v(this._collateralChange(e),e.collateral.zero&&"collateral"):v(l(l({},this._debtChange(e,n)),this._collateralChange(e)),null!==(t=e.debt.zero&&"debt")&&void 0!==t?t:e.collateral.zero&&"collateral")}},{key:"apply",value:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.MINIMUM_BORROWING_RATE;if(!n)return this;switch(n.type){case"invalidCreation":if(!this.isEmpty)throw new Error("Can't create onto existing Trove");return n.invalidTrove;case"creation":if(!this.isEmpty)throw new Error("Can't create onto existing Trove");var r=n.params,i=r.depositCollateral,s=r.borrowZUSD;return new e(i,b.ZUSD_LIQUIDATION_RESERVE.add(_(a,s)));case"closure":if(this.isEmpty)throw new Error("Can't close empty Trove");return t._emptyTrove;case"adjustment":var o=n.setToZero,u=n.params,l=u.depositCollateral,c=u.withdrawCollateral,d=u.borrowZUSD,p=u.repayZUSD,f=null!==c&&void 0!==c?c:y.Decimal.ZERO,m=null!==l&&void 0!==l?l:y.Decimal.ZERO,h=null!==p&&void 0!==p?p:y.Decimal.ZERO,v=d?_(a,d):y.Decimal.ZERO;return"collateral"===o?this.setCollateral(y.Decimal.ZERO).addDebt(v).subtractDebt(h):"debt"===o?this.setDebt(y.Decimal.ZERO).addCollateral(m).subtractCollateral(f):this.add(new e(m,v)).subtract(new e(f,h))}}},{key:"adjust",value:function(e,n){return this.apply(v(t._normalizeTroveAdjustment(e)),n)}},{key:"adjustTo",value:function(e,t){var n=this.whatChanged(e,t);return p.default("adjustment"===(null===n||void 0===n?void 0:n.type)),n.params}}],[{key:"create",value:function(e,n){return t._emptyTrove.apply(m(t._normalizeTroveCreation(e)),n)}},{key:"recreate",value:function(e,n){var a=t._emptyTrove.whatChanged(e,n);return p.default("creation"===(null===a||void 0===a?void 0:a.type)),a.params}}]),e}();t.Trove=E,t._emptyTrove=new E;var D=function(e){i(n,e);var t=s(n);function n(e,a,r,i){var s;return o(this,n),(s=t.call(this,r,i)).ownerAddress=e,s.status=a,s}return u(n,[{key:"equals",value:function(e){return a(r(n.prototype),"equals",this).call(this,e)&&this.ownerAddress===e.ownerAddress&&this.status===e.status}},{key:"toString",value:function(){return'{ ownerAddress: "'.concat(this.ownerAddress,'"')+", collateral: ".concat(this.collateral)+", debt: ".concat(this.debt)+', status: "'.concat(this.status,'" }')}}]),n}(E);t.UserTrove=D;var C=function(e){i(l,e);var n=s(l);function l(e,a,r,i){var s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:y.Decimal.ZERO,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t._emptyTrove;return o(this,l),(s=n.call(this,e,a,r,i)).stake=u,s.snapshotOfTotalRedistributed=c,s}return u(l,[{key:"applyRedistribution",value:function(e){var t=this.add(e.subtract(this.snapshotOfTotalRedistributed).multiply(this.stake));return new D(this.ownerAddress,this.status,t.collateral,t.debt)}},{key:"equals",value:function(e){return a(r(l.prototype),"equals",this).call(this,e)&&this.stake.eq(e.stake)&&this.snapshotOfTotalRedistributed.equals(e.snapshotOfTotalRedistributed)}}]),l}(D);t.TroveWithPendingRedistribution=C},function(e,t,n){"use strict";var a=n(29),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.StabilityDeposit=void 0;var i=n(72),s=function(){function e(t,n,r,i,s){if(a(this,e),this.initialZUSD=t,this.currentZUSD=n,this.collateralGain=r,this.zeroReward=i,this.frontendTag=s,this.currentZUSD.gt(this.initialZUSD))throw new Error("currentZUSD can't be greater than initialZUSD")}return r(e,[{key:"isEmpty",get:function(){return this.initialZUSD.isZero&&this.currentZUSD.isZero&&this.collateralGain.isZero&&this.zeroReward.isZero}},{key:"toString",value:function(){return"{ initialZUSD: ".concat(this.initialZUSD)+", currentZUSD: ".concat(this.currentZUSD)+", collateralGain: ".concat(this.collateralGain)+", zeroReward: ".concat(this.zeroReward)+', frontendTag: "'.concat(this.frontendTag,'" }')}},{key:"equals",value:function(e){return this.initialZUSD.eq(e.initialZUSD)&&this.currentZUSD.eq(e.currentZUSD)&&this.collateralGain.eq(e.collateralGain)&&this.zeroReward.eq(e.zeroReward)&&this.frontendTag===e.frontendTag}},{key:"whatChanged",value:function(e){return(e=i.Decimal.from(e)).lt(this.currentZUSD)?{withdrawZUSD:this.currentZUSD.sub(e),withdrawAllZUSD:e.isZero}:e.gt(this.currentZUSD)?{depositZUSD:e.sub(this.currentZUSD)}:void 0}},{key:"apply",value:function(e){return e?void 0!==e.withdrawZUSD?e.withdrawAllZUSD||this.currentZUSD.lte(e.withdrawZUSD)?i.Decimal.ZERO:this.currentZUSD.sub(e.withdrawZUSD):this.currentZUSD.add(e.depositZUSD):this.currentZUSD}}]),e}();t.StabilityDeposit=s},function(e,t,n){"use strict";var a=n(29),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.ZEROStake=void 0;var i=n(72),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Decimal.ZERO,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Decimal.ZERO,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Decimal.ZERO;a(this,e),this.stakedZERO=t,this.collateralGain=n,this.zusdGain=r}return r(e,[{key:"isEmpty",get:function(){return this.stakedZERO.isZero&&this.collateralGain.isZero&&this.zusdGain.isZero}},{key:"toString",value:function(){return"{ stakedZERO: ".concat(this.stakedZERO)+", collateralGain: ".concat(this.collateralGain)+", zusdGain: ".concat(this.zusdGain," }")}},{key:"equals",value:function(e){return this.stakedZERO.eq(e.stakedZERO)&&this.collateralGain.eq(e.collateralGain)&&this.zusdGain.eq(e.zusdGain)}},{key:"whatChanged",value:function(e){return(e=i.Decimal.from(e)).lt(this.stakedZERO)?{unstakeZERO:this.stakedZERO.sub(e),unstakeAllZERO:e.isZero}:e.gt(this.stakedZERO)?{stakeZERO:e.sub(this.stakedZERO)}:void 0}},{key:"apply",value:function(e){return e?void 0!==e.unstakeZERO?e.unstakeAllZERO||this.stakedZERO.lte(e.unstakeZERO)?i.Decimal.ZERO:this.stakedZERO.sub(e.unstakeZERO):this.stakedZERO.add(e.stakeZERO):this.stakedZERO}}]),e}();t.ZEROStake=s},function(e,t,n){"use strict";var a=n(29),r=n(31),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Fees=void 0;var s=i(n(79)),o=n(72),u=n(101),l=function(){function e(t,n,r,i,u,l){a(this,e),this._baseRateWithoutDecay=o.Decimal.from(t),this._minuteDecayFactor=o.Decimal.from(n),this._beta=o.Decimal.from(r),this._lastFeeOperation=i,this._timeOfLatestBlock=u,this._recoveryMode=l,s.default(this._minuteDecayFactor.lt(1))}return r(e,[{key:"_setRecoveryMode",value:function(t){return new e(this._baseRateWithoutDecay,this._minuteDecayFactor,this._beta,this._lastFeeOperation,this._timeOfLatestBlock,t)}},{key:"equals",value:function(e){return this._baseRateWithoutDecay.eq(e._baseRateWithoutDecay)&&this._minuteDecayFactor.eq(e._minuteDecayFactor)&&this._beta.eq(e._beta)&&this._lastFeeOperation.getTime()===e._lastFeeOperation.getTime()&&this._timeOfLatestBlock.getTime()===e._timeOfLatestBlock.getTime()&&this._recoveryMode===e._recoveryMode}},{key:"toString",value:function(){return"{ baseRateWithoutDecay: ".concat(this._baseRateWithoutDecay)+', lastFeeOperation: "'.concat(this._lastFeeOperation.toLocaleString(),'"')+", recoveryMode: ".concat(this._recoveryMode," } ")}},{key:"baseRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._timeOfLatestBlock,t=Math.max(e.getTime()-this._lastFeeOperation.getTime(),0),n=Math.floor(t/6e4);return this._minuteDecayFactor.pow(n).mul(this._baseRateWithoutDecay)}},{key:"borrowingRate",value:function(e){return this._recoveryMode?o.Decimal.ZERO:o.Decimal.min(u.MINIMUM_BORROWING_RATE.add(this.baseRate(e)),u.MAXIMUM_BORROWING_RATE)}},{key:"redemptionRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Decimal.ZERO,t=arguments.length>1?arguments[1]:void 0;e=o.Decimal.from(e);var n=this.baseRate(t);return e.nonZero&&(n=e.div(this._beta).add(n)),o.Decimal.min(u.MINIMUM_REDEMPTION_RATE.add(n),o.Decimal.ONE)}}]),e}();t.Fees=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var a=n(29),r=n(44),i=n(45),s=n(135);Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionFailedError=void 0;var o=function(e){r(n,e);var t=i(n);function n(e,r,i){var s;return a(this,n),(s=t.call(this,r)).name=e,s.failedReceipt=i,s}return n}(s(Error));t.TransactionFailedError=o},function(e,t,n){"use strict";var a=n(54);Object.defineProperty(t,"__esModule",{value:!0}),t._successfulReceipt=t._failedReceipt=t._pendingReceipt=void 0,t._pendingReceipt={status:"pending"};t._failedReceipt=function(e){return{status:"failed",rawReceipt:e}};t._successfulReceipt=function(e,t,n){return a({status:"succeeded",rawReceipt:e,details:t},n?{toString:n}:{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var a=n(76),r=n(29),i=n(31),s=n(39),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiquityStore=void 0;var u=o(n(79)),l=function(e,t){return e===t},c=function(e,t){return e.eq(t)},d=function(e,t){return e.equals(t)},p=function(e,t){return"unregistered"===e.status?"unregistered"===t.status:"registered"===t.status&&e.kickbackRate.eq(t.kickbackRate)},y=function(e){return"unregistered"===e.status?'{ status: "unregistered" }':'{ status: "registered", kickbackRate: '.concat(e.kickbackRate," }")},b=function(){function e(){r(this,e),this.logging=!1,this._loaded=!1,this._listeners=new Set}return i(e,[{key:"state",get:function(){return Object.assign({},this._baseState,this._derivedState,this._extraState)}},{key:"start",value:function(){var e=this,t=this._doStart();return function(){t(),e._cancelUpdateIfScheduled()}}},{key:"_cancelUpdateIfScheduled",value:function(){void 0!==this._updateTimeoutId&&clearTimeout(this._updateTimeoutId)}},{key:"_scheduleUpdate",value:function(){var e=this;this._cancelUpdateIfScheduled(),this._updateTimeoutId=setTimeout((function(){e._updateTimeoutId=void 0,e._update()}),3e4)}},{key:"_logUpdate",value:function(e,t,n){return this.logging&&console.log("".concat(e," updated to ").concat(n?n(t):t)),t}},{key:"_updateIfChanged",value:function(e,t,n,a,r){return void 0===a||e(n,a)?n:this._logUpdate(t,a,r)}},{key:"_silentlyUpdateIfChanged",value:function(e,t,n){return void 0===n||e(t,n)?t:n}},{key:"_updateFees",value:function(e,t,n){return n&&!n.equals(t)?("".concat(n)!=="".concat(t)&&this._logUpdate(e,n),n):t}},{key:"_reduce",value:function(e,t){return{frontend:this._updateIfChanged(p,"frontend",e.frontend,t.frontend,y),ownFrontend:this._updateIfChanged(p,"ownFrontend",e.ownFrontend,t.ownFrontend,y),numberOfTroves:this._updateIfChanged(l,"numberOfTroves",e.numberOfTroves,t.numberOfTroves),accountBalance:this._updateIfChanged(c,"accountBalance",e.accountBalance,t.accountBalance),zusdBalance:this._updateIfChanged(c,"zusdBalance",e.zusdBalance,t.zusdBalance),nueBalance:this._updateIfChanged(c,"nueBalance",e.nueBalance,t.nueBalance),zeroBalance:this._updateIfChanged(c,"zeroBalance",e.zeroBalance,t.zeroBalance),collateralSurplusBalance:this._updateIfChanged(c,"collateralSurplusBalance",e.collateralSurplusBalance,t.collateralSurplusBalance),price:this._updateIfChanged(c,"price",e.price,t.price),zusdInStabilityPool:this._updateIfChanged(c,"zusdInStabilityPool",e.zusdInStabilityPool,t.zusdInStabilityPool),total:this._updateIfChanged(d,"total",e.total,t.total),totalRedistributed:this._updateIfChanged(d,"totalRedistributed",e.totalRedistributed,t.totalRedistributed),troveBeforeRedistribution:this._updateIfChanged(d,"troveBeforeRedistribution",e.troveBeforeRedistribution,t.troveBeforeRedistribution),stabilityDeposit:this._updateIfChanged(d,"stabilityDeposit",e.stabilityDeposit,t.stabilityDeposit),remainingStabilityPoolZEROReward:this._silentlyUpdateIfChanged(c,e.remainingStabilityPoolZEROReward,t.remainingStabilityPoolZEROReward),_feesInNormalMode:this._silentlyUpdateIfChanged(d,e._feesInNormalMode,t._feesInNormalMode),zeroStake:this._updateIfChanged(d,"zeroStake",e.zeroStake,t.zeroStake),totalStakedZERO:this._updateIfChanged(c,"totalStakedZERO",e.totalStakedZERO,t.totalStakedZERO),_riskiestTroveBeforeRedistribution:this._silentlyUpdateIfChanged(d,e._riskiestTroveBeforeRedistribution,t._riskiestTroveBeforeRedistribution)}}},{key:"_derive",value:function(e){var t=e.troveBeforeRedistribution,n=e.totalRedistributed,a=e._feesInNormalMode,r=e.total,i=e.price,s=e._riskiestTroveBeforeRedistribution,o=a._setRecoveryMode(r.collateralRatioIsBelowCritical(i));return{trove:t.applyRedistribution(n),fees:o,borrowingRate:o.borrowingRate(),redemptionRate:o.redemptionRate(),haveUndercollateralizedTroves:s.applyRedistribution(n).collateralRatioIsBelowMinimum(i)}}},{key:"_reduceDerived",value:function(e,t){return{fees:this._updateFees("fees",e.fees,t.fees),trove:this._updateIfChanged(d,"trove",e.trove,t.trove),borrowingRate:this._silentlyUpdateIfChanged(c,e.borrowingRate,t.borrowingRate),redemptionRate:this._silentlyUpdateIfChanged(c,e.redemptionRate,t.redemptionRate),haveUndercollateralizedTroves:this._updateIfChanged(l,"haveUndercollateralizedTroves",e.haveUndercollateralizedTroves,t.haveUndercollateralizedTroves)}}},{key:"_notify",value:function(e){var t=this;a(this._listeners).forEach((function(n){t._listeners.has(n)&&n(e)}))}},{key:"subscribe",value:function(e){var t,n=this,a=(t=e,function(){return t.apply(void 0,arguments)});return this._listeners.add(a),function(){n._listeners.delete(a)}}},{key:"_load",value:function(e,t){u.default(!this._loaded),this._baseState=e,this._derivedState=this._derive(e),this._extraState=t,this._loaded=!0,this._scheduleUpdate(),this.onLoaded&&this.onLoaded()}},{key:"_update",value:function(e,t){u.default(this._baseState&&this._derivedState);var n,a,r=this.state;e&&(this._baseState=this._reduce(this._baseState,e)),this._derivedState=this._reduceDerived(this._derivedState,this._derive(this._baseState)),t&&(u.default(this._extraState),this._extraState=this._reduceExtra(this._extraState,t)),this._scheduleUpdate(),this._notify({newState:this.state,oldState:r,stateChange:(n=this.state,a=r,Object.fromEntries(Object.entries(n).filter((function(e){var t=s(e,2),n=t[0];return t[1]!==a[n]}))))})}}]),e}();t.LiquityStore=b},function(e,t,n){"use strict";var a=n(54),r=n(87),i=n(39),s=n(5),o=n(50),u=n(29),l=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t._CachedReadableLiquity=void 0;var c=function(){function e(t,n){u(this,e),this._readable=t,this._cache=n}return l(e,[{key:"getTotalRedistributed",value:function(){var e=o(s.mark((function e(){var t,n,a,r=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotalRedistributed.apply(t,r))&&void 0!==a?a:(n=this._readable).getTotalRedistributed.apply(n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTroveBeforeRedistribution",value:function(){var e=o(s.mark((function e(t){var n,a,r,i,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=l[u];return e.abrupt("return",null!==(r=(n=this._cache).getTroveBeforeRedistribution.apply(n,[t].concat(o)))&&void 0!==r?r:(a=this._readable).getTroveBeforeRedistribution.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTrove",value:function(){var e=o(s.mark((function e(t){var n,a,r,o,u,l,c,d=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=d.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=d[r];return e.next=3,Promise.all([this.getTroveBeforeRedistribution.apply(this,[t].concat(a)),this.getTotalRedistributed.apply(this,a)]);case 3:return o=e.sent,u=i(o,2),l=u[0],c=u[1],e.abrupt("return",l.applyRedistribution(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNumberOfTroves",value:function(){var e=o(s.mark((function e(){var t,n,a,r=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getNumberOfTroves.apply(t,r))&&void 0!==a?a:(n=this._readable).getNumberOfTroves.apply(n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPrice",value:function(){var e=o(s.mark((function e(){var t,n,a,r=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getPrice.apply(t,r))&&void 0!==a?a:(n=this._readable).getPrice.apply(n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTotal",value:function(){var e=o(s.mark((function e(){var t,n,a,r=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotal.apply(t,r))&&void 0!==a?a:(n=this._readable).getTotal.apply(n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStabilityDeposit",value:function(){var e=o(s.mark((function e(t){var n,a,r,i,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=l[u];return e.abrupt("return",null!==(r=(n=this._cache).getStabilityDeposit.apply(n,[t].concat(o)))&&void 0!==r?r:(a=this._readable).getStabilityDeposit.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRemainingStabilityPoolZEROReward",value:function(){var e=o(s.mark((function e(){var t,n,a,r=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getRemainingStabilityPoolZEROReward.apply(t,r))&&void 0!==a?a:(n=this._readable).getRemainingStabilityPoolZEROReward.apply(n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getZUSDInStabilityPool",value:function(){var e=o(s.mark((function e(){var t,n,a,r=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getZUSDInStabilityPool.apply(t,r))&&void 0!==a?a:(n=this._readable).getZUSDInStabilityPool.apply(n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getZUSDBalance",value:function(){var e=o(s.mark((function e(t){var n,a,r,i,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=l[u];return e.abrupt("return",null!==(r=(n=this._cache).getZUSDBalance.apply(n,[t].concat(o)))&&void 0!==r?r:(a=this._readable).getZUSDBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNUEBalance",value:function(){var e=o(s.mark((function e(t){var n,a,r,i,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=l[u];return e.abrupt("return",null!==(r=(n=this._cache).getNUEBalance.apply(n,[t].concat(o)))&&void 0!==r?r:(a=this._readable).getNUEBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getZEROBalance",value:function(){var e=o(s.mark((function e(t){var n,a,r,i,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=l[u];return e.abrupt("return",null!==(r=(n=this._cache).getZEROBalance.apply(n,[t].concat(o)))&&void 0!==r?r:(a=this._readable).getZEROBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCollateralSurplusBalance",value:function(){var e=o(s.mark((function e(t){var n,a,r,i,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=l[u];return e.abrupt("return",null!==(r=(n=this._cache).getCollateralSurplusBalance.apply(n,[t].concat(o)))&&void 0!==r?r:(a=this._readable).getCollateralSurplusBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTroves",value:function(){var e=o(s.mark((function e(t){var n,o,u,l,c,d,p,y,b,f,m,h,v=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l=t.beforeRedistribution,c=r(t,["beforeRedistribution"]),d=v.length,p=new Array(d>1?d-1:0),y=1;y<d;y++)p[y-1]=v[y];return e.next=4,Promise.all([l?void 0:this.getTotalRedistributed.apply(this,p),null!==(u=(n=this._cache).getTroves.apply(n,[a({beforeRedistribution:!0},c)].concat(p)))&&void 0!==u?u:(o=this._readable).getTroves.apply(o,[a({beforeRedistribution:!0},c)].concat(p))]);case 4:if(b=e.sent,f=i(b,2),m=f[0],h=f[1],!m){e.next=12;break}return e.abrupt("return",h.map((function(e){return e.applyRedistribution(m)})));case 12:return e.abrupt("return",h);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFees",value:function(){var e=o(s.mark((function e(){var t,n,a,r=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getFees.apply(t,r))&&void 0!==a?a:(n=this._readable).getFees.apply(n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getZEROStake",value:function(){var e=o(s.mark((function e(t){var n,a,r,i,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=l[u];return e.abrupt("return",null!==(r=(n=this._cache).getZEROStake.apply(n,[t].concat(o)))&&void 0!==r?r:(a=this._readable).getZEROStake.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalStakedZERO",value:function(){var e=o(s.mark((function e(){var t,n,a,r=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotalStakedZERO.apply(t,r))&&void 0!==a?a:(n=this._readable).getTotalStakedZERO.apply(n,r));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFrontendStatus",value:function(){var e=o(s.mark((function e(t){var n,a,r,i,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=l[u];return e.abrupt("return",null!==(r=(n=this._cache).getFrontendStatus.apply(n,[t].concat(o)))&&void 0!==r?r:(a=this._readable).getFrontendStatus.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t._CachedReadableLiquity=c},function(e,t,n){"use strict";var a=n(29),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableEthersLiquity=void 0;var i=n(71),s=function(e){var t=void 0,n=0;return function(){var a,r=(a=arguments.length-1)<0||arguments.length<=a?void 0:arguments[a];void 0!==r.blockNumber&&r.blockNumber>n&&(n=r.blockNumber),void 0!==t&&clearTimeout(t),t=setTimeout((function(){e(n),t=void 0}),50)}},o=function(){function e(t){a(this,e),this._readable=t}return r(e,[{key:"watchTotalRedistributed",value:function(e){var t=this,n=i._getContracts(this._readable.connection),a=n.activePool,r=n.defaultPool,o=a.filters.EtherSent(),u=s((function(n){t._readable.getTotalRedistributed({blockTag:n}).then(e)})),l=function(e,t,n){e===r.address&&u(n)};return a.on(o,l),function(){a.removeListener(o,l)}}},{key:"watchTroveWithoutRewards",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=i._requireAddress(this._readable.connection));var a=i._getContracts(this._readable.connection),r=a.troveManager,o=a.borrowerOperations,u=r.filters.TroveUpdated(t),l=o.filters.TroveUpdated(t),c=s((function(a){n._readable.getTroveBeforeRedistribution(t,{blockTag:a}).then(e)}));return r.on(u,c),o.on(l,c),function(){r.removeListener(u,c),o.removeListener(l,c)}}},{key:"watchNumberOfTroves",value:function(e){var t=this,n=i._getContracts(this._readable.connection).troveManager,a=(0,n.filters.TroveUpdated)(),r=s((function(n){t._readable.getNumberOfTroves({blockTag:n}).then(e)}));return n.on(a,r),function(){n.removeListener(a,r)}}},{key:"watchPrice",value:function(e){throw new Error("Method not implemented.")}},{key:"watchTotal",value:function(e){var t=this,n=i._getContracts(this._readable.connection).troveManager,a=(0,n.filters.TroveUpdated)(),r=s((function(n){t._readable.getTotal({blockTag:n}).then(e)}));return n.on(a,r),function(){n.removeListener(a,r)}}},{key:"watchStabilityDeposit",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=i._requireAddress(this._readable.connection));var a=i._getContracts(this._readable.connection),r=a.activePool,o=a.stabilityPool,u=o.filters.UserDepositChanged,l=r.filters.EtherSent,c=u(t),d=l(),p=s((function(a){n._readable.getStabilityDeposit(t,{blockTag:a}).then(e)})),y=function(e,t,n){e===o.address&&p(n)};return o.on(c,p),r.on(d,y),function(){o.removeListener(c,p),r.removeListener(d,y)}}},{key:"watchZUSDInStabilityPool",value:function(e){var t=this,n=i._getContracts(this._readable.connection),a=n.zusdToken,r=n.stabilityPool,o=a.filters.Transfer,u=[o(r.address),o(null,r.address)],l=s((function(n){t._readable.getZUSDInStabilityPool({blockTag:n}).then(e)}));return u.forEach((function(e){return a.on(e,l)})),function(){return u.forEach((function(e){return a.removeListener(e,l)}))}}},{key:"watchZUSDBalance",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=i._requireAddress(this._readable.connection));var a=i._getContracts(this._readable.connection).zusdToken,r=a.filters.Transfer,o=[r(t),r(null,t)],u=s((function(a){n._readable.getZUSDBalance(t,{blockTag:a}).then(e)}));return o.forEach((function(e){return a.on(e,u)})),function(){return o.forEach((function(e){return a.removeListener(e,u)}))}}},{key:"watchNUEBalance",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=i._requireAddress(this._readable.connection));var a=i._getContracts(this._readable.connection).nueToken;if(!a)throw"nue token address not set";var r=a.filters.Transfer,o=[r(t),r(null,t)],u=s((function(a){n._readable.getNUEBalance(t,{blockTag:a}).then(e)}));return o.forEach((function(e){return a.on(e,u)})),function(){return o.forEach((function(e){return a.removeListener(e,u)}))}}}]),e}();t.ObservableEthersLiquity=o},,function(e,t,n){"use strict";var a=n(100),r=n(54),i=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.logsToString=void 0;var s=n(32),o=n(46),u=n(9),l=function(e,t){var n=[],a=[];return e.forEach((function(e){var r=function(e,t){var n=e.address;if(n in t)try{return{address:n,logDescription:t[n].parseLog(e)}}catch(a){console.warn("Failed to parse log:"),console.warn(e),console.warn("Caught:"),console.warn(a)}}(e,t);r?n.push(r):a.push(e)})),[n,a]},c=s.BigNumber.from(10).pow(9),d=function(e,t){var n=Object.entries(e.args).filter((function(e){return!i(e,1)[0].match(/^[0-9]/)})).map((function(e){var n=i(e,2),a=n[0],r=n[1];return"".concat(a,": ").concat(function(e,t){return s.BigNumber.isBigNumber(e)?e.gte(c)?"".concat(u.Decimal.fromBigNumberString(e.toHexString()),"e18"):e.toString():"string"===typeof e?e===o.AddressZero?"address(0)":t&&e in t?t[e]:e:String(e)}(r,t))}));return"".concat(e.name,"({ ").concat(n.join(", ")," })")};t.logsToString=function(e,t){var n=t,s=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=i(e,2)[1];return[t.address,t.interface]})))}(n),o=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=i(e,2),n=t[0];return[t[1].address,n]})))}(n),u=r(a({},e.from,"user"),o),c=l(e.logs,s),p=i(c,2),y=p[0],b=p[1];return b.length>0&&(console.warn("Warning: not all logs were parsed. Unparsed logs:"),console.warn(b)),y.length>0?"Logs of tx ".concat(e.transactionHash,":\n")+y.map((function(e){var t=e.address,n=e.logDescription;return"  ".concat(o[t],".").concat(d(n,u))})).join("\n"):"No logs were parsed in tx ".concat(e.transactionHash)}},function(e,t,n){"use strict";var a=n(31),r=n(5),i=n(50),s=n(29),o=n(44),u=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.EthersLiquity=t.EthersTransactionFailedError=void 0;var l=n(9),c=n(71),d=n(139),p=n(137),y=n(140),b=function(e){o(n,e);var t=u(n);function n(e,a){return s(this,n),t.call(this,"EthersTransactionFailedError",e,a)}return n}(l.TransactionFailedError);t.EthersTransactionFailedError=b;var f=function(){var e=i(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitForReceipt();case 2:if("succeeded"===(n=e.sent).status){e.next=5;break}throw new b("Transaction failed",n);case 5:return e.abrupt("return",n.details);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){function e(t){s(this,e),this._readable=t,this.connection=t.connection,this.populate=new d.PopulatableEthersLiquity(t),this.send=new y.SendableEthersLiquity(this.populate)}return a(e,[{key:"hasStore",value:function(){return!1}},{key:"getTotalRedistributed",value:function(e){return this._readable.getTotalRedistributed(e)}},{key:"getTroveBeforeRedistribution",value:function(e,t){return this._readable.getTroveBeforeRedistribution(e,t)}},{key:"getTrove",value:function(e,t){return this._readable.getTrove(e,t)}},{key:"getNumberOfTroves",value:function(e){return this._readable.getNumberOfTroves(e)}},{key:"getPrice",value:function(e){return this._readable.getPrice(e)}},{key:"_getActivePool",value:function(e){return this._readable._getActivePool(e)}},{key:"_getDefaultPool",value:function(e){return this._readable._getDefaultPool(e)}},{key:"getTotal",value:function(e){return this._readable.getTotal(e)}},{key:"getStabilityDeposit",value:function(e,t){return this._readable.getStabilityDeposit(e,t)}},{key:"getRemainingStabilityPoolZEROReward",value:function(e){return this._readable.getRemainingStabilityPoolZEROReward(e)}},{key:"getZUSDInStabilityPool",value:function(e){return this._readable.getZUSDInStabilityPool(e)}},{key:"getZUSDBalance",value:function(e,t){return this._readable.getZUSDBalance(e,t)}},{key:"getNUEBalance",value:function(e,t){return this._readable.getNUEBalance(e,t)}},{key:"getZEROBalance",value:function(e,t){return this._readable.getZEROBalance(e,t)}},{key:"getCollateralSurplusBalance",value:function(e,t){return this._readable.getCollateralSurplusBalance(e,t)}},{key:"getTroves",value:function(e,t){return this._readable.getTroves(e,t)}},{key:"_getFeesFactory",value:function(e){return this._readable._getFeesFactory(e)}},{key:"getFees",value:function(e){return this._readable.getFees(e)}},{key:"getZEROStake",value:function(e,t){return this._readable.getZEROStake(e,t)}},{key:"getTotalStakedZERO",value:function(e){return this._readable.getTotalStakedZERO(e)}},{key:"getFrontendStatus",value:function(e,t){return this._readable.getFrontendStatus(e,t)}},{key:"openTrove",value:function(e,t,n){return this.send.openTrove(e,t,n).then(f)}},{key:"openNueTrove",value:function(e,t,n){return this.send.openNueTrove(e,t,n).then(f)}},{key:"closeTrove",value:function(e){return this.send.closeTrove(e).then(f)}},{key:"closeNueTrove",value:function(e){return this.send.closeNueTrove(e).then(f)}},{key:"adjustTrove",value:function(e,t,n){return this.send.adjustTrove(e,t,n).then(f)}},{key:"adjustNueTrove",value:function(e,t,n){return this.send.adjustNueTrove(e,t,n).then(f)}},{key:"depositCollateral",value:function(e,t){return this.send.depositCollateral(e,t).then(f)}},{key:"withdrawCollateral",value:function(e,t){return this.send.withdrawCollateral(e,t).then(f)}},{key:"borrowZUSD",value:function(e,t,n){return this.send.borrowZUSD(e,t,n).then(f)}},{key:"repayZUSD",value:function(e,t){return this.send.repayZUSD(e,t).then(f)}},{key:"setPrice",value:function(e,t){return this.send.setPrice(e,t).then(f)}},{key:"liquidate",value:function(e,t){return this.send.liquidate(e,t).then(f)}},{key:"liquidateUpTo",value:function(e,t){return this.send.liquidateUpTo(e,t).then(f)}},{key:"depositZUSDInStabilityPool",value:function(e,t,n){return this.send.depositZUSDInStabilityPool(e,t,n).then(f)}},{key:"withdrawZUSDFromStabilityPool",value:function(e,t){return this.send.withdrawZUSDFromStabilityPool(e,t).then(f)}},{key:"withdrawGainsFromStabilityPool",value:function(e){return this.send.withdrawGainsFromStabilityPool(e).then(f)}},{key:"transferCollateralGainToTrove",value:function(e){return this.send.transferCollateralGainToTrove(e).then(f)}},{key:"sendZUSD",value:function(e,t,n){return this.send.sendZUSD(e,t,n).then(f)}},{key:"sendZERO",value:function(e,t,n){return this.send.sendZERO(e,t,n).then(f)}},{key:"redeemZUSD",value:function(e,t,n){return this.send.redeemZUSD(e,t,n).then(f)}},{key:"claimCollateralSurplus",value:function(e){return this.send.claimCollateralSurplus(e).then(f)}},{key:"stakeZERO",value:function(e,t){return this.send.stakeZERO(e,t).then(f)}},{key:"unstakeZERO",value:function(e,t){return this.send.unstakeZERO(e,t).then(f)}},{key:"withdrawGainsFromStaking",value:function(e){return this.send.withdrawGainsFromStaking(e).then(f)}},{key:"registerFrontend",value:function(e,t){return this.send.registerFrontend(e,t).then(f)}}],[{key:"_from",value:function(t){return c._usingStore(t)?new h(p.ReadableEthersLiquity._from(t)):new e(p.ReadableEthersLiquity._from(t))}},{key:"connect",value:function(){var t=i(r.mark((function t(n,a){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,c._connect(n,a);case 3:return t.t1=t.sent,t.abrupt("return",t.t0._from.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();t.EthersLiquity=m;var h=function(e){o(n,e);var t=u(n);function n(e){var a;return s(this,n),(a=t.call(this,e)).store=e.store,a}return a(n,[{key:"hasStore",value:function(e){return void 0===e||e===this.connection.useStore}}]),n}(m)},,,,,,,,,function(e,t,n){"use strict";var a=n(54),r=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.useLiquityReducer=void 0;var i=n(1),s=n(144),o=n(102);t.useLiquityReducer=function(e,t){var n=o.useLiquityStore(),u=i.useRef(n),l=i.useRef(t(n.state)),c=i.useReducer((function(){return{}}),{}),d=r(c,2)[1],p=i.useCallback((function(t){var n=e(l.current,t);s.equals(n,l.current)||(l.current=n,d())}),[e]);return i.useEffect((function(){return n.subscribe((function(e){return p(a({type:"updateStore"},e))}))}),[n,p]),u.current!==n&&(l.current=t(n.state),u.current=n),[l.current,p]}},function(e,t,n){"use strict";var a=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.useLiquitySelector=void 0;var r=n(1),i=n(144),s=n(102);t.useLiquitySelector=function(e){var t=s.useLiquityStore(),n=r.useReducer((function(){return{}}),{}),o=a(n,2)[1];return r.useEffect((function(){return t.subscribe((function(t){var n=t.newState,a=t.oldState;i.equals(e(n),e(a))||o()}))}),[t,e]),e(t.state)}},,,,,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(88),s=n.n(i),o=(n(167),n(62)),u=n(113),l=n(259),c=n(82),d=n(85),p=n(12),y=n(65),b=n(108),f=n(5),m=n.n(f),h=n(34),v=n(6),T=n(130),j=n(17),g={frontendTag:T.a};function O(e,t){return t in e}var x=function(e){var t=Object(v.a)({},g);if("object"===typeof e&&null!==e){if(O(e,"frontendTag")&&""!==e.frontendTag){var n=e.frontendTag;"string"===typeof n&&Object(j.isAddress)(n)?t.frontendTag=Object(j.getAddress)(n):(console.error("Malformed frontendTag:"),console.log(n))}if(O(e,"infuraApiKey")&&""!==e.infuraApiKey){var a=e.infuraApiKey;"string"===typeof a?t.infuraApiKey=a:(console.error("Malformed infuraApiKey:"),console.log(a))}if(O(e,"testnetOnly")){var r=e.testnetOnly;"boolean"===typeof r?t.testnetOnly=r:(console.error("Malformed testnetOnly:"),console.log(r))}}else console.error("Malformed config:"),console.log(e);return t},w=void 0,_=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("config.json");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch config.json (status ".concat(t.status,")"));case 6:return e.t0=x,e.next=9,t.json();case 9:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:return e.prev=13,e.t2=e.catch(0),console.error(e.t2),e.abrupt("return",Object(v.a)({},g));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){return w||(w=_()),w},k=n(0),E=Object(a.createContext)(void 0),D=["homestead","kovan","rinkeby","ropsten","goerli","rsktestoracles"],C=function(e){var t=e.children,n=e.loader,r=e.unsupportedNetworkFallback,i=e.unsupportedMainnetFallback,s=Object(o.b)(),u=s.library,l=s.account,f=s.chainId,m=Object(a.useState)(),h=Object(p.a)(m,2),v=h[0],T=h[1],j=Object(a.useMemo)((function(){if(v&&u&&l&&f)try{return Object(b._connectByChainId)(u,u.getSigner(l),f,{userAddress:l,frontendTag:v.frontendTag,useStore:"blockPolled"})}catch(e){console.log(e)}}),[v,u,l,f]);if(Object(a.useEffect)((function(){S().then(T)}),[]),Object(a.useEffect)((function(){if(v&&j){var e=j.provider,t=j.chainId;if(Object(c.isBatchedProvider)(e)&&e.chainId!==t&&(e.chainId=t),Object(c.isWebSocketAugmentedProvider)(e)){var n=Object(y.a)(t);return n.name&&D.includes(n.name)&&v.infuraApiKey?e.openWebSocket.apply(e,Object(d.a)(function(e,t){return["wss://".concat("homestead"===e?"mainnet":e,".infura.io/ws/v3/").concat(t),e]}(n.name,v.infuraApiKey))):j._isDev&&e.openWebSocket("ws://".concat(window.location.hostname,":8546"),t),function(){e.closeWebSocket()}}}}),[v,j]),!v||!u||!l||!f)return Object(k.jsx)(k.Fragment,{children:n});if(v.testnetOnly&&1===f)return Object(k.jsx)(k.Fragment,{children:i});if(!j)return r?Object(k.jsx)(k.Fragment,{children:r(f)}):null;var g=b.EthersLiquity._from(j);return g.store.logging=!0,Object(k.jsx)(E.Provider,{value:{config:v,account:l,provider:u,liquity:g},children:t})},R=function(){var e=Object(a.useContext)(E);if(!e)throw new Error("You must provide a LiquityContext via LiquityProvider");return e},M=new(n(157).a)({});var A=n(47),P=n(66),I=n(22),Z=n(109),U=n(150);P.b.add(I.k,I.g,I.h,I.o,I.t,I.x,I.y,I.f,I.w,I.s,I.i,I.j,Z.a,I.l,I.z,I.A,I.p,I.m,I.v,I.n,I.d,I.b,I.c,I.a,I.u,I.q,I.r,I.e,Z.b);var B=function(e){switch(e){case"clipboard":return["far","clipboard"];case"question-circle":return["far","question-circle"];default:return e}},F=function(e){var t=e.name,n=e.style,a=Object(A.a)(e,["name","style"]);return Object(k.jsx)(U.a,Object(v.a)({style:n,icon:B(t)},a))},N=function(e){switch(e){case"success":return Object(k.jsx)(F,{name:"check-circle",color:"success","aria-label":"Success"});case"warning":return Object(k.jsx)(F,{name:"exclamation-triangle",color:"warning","aria-label":"Warning"});case"danger":return Object(k.jsx)(F,{name:"exclamation-triangle",color:"danger","aria-label":"Danger"});case"info":return Object(k.jsx)(F,{name:"info-circle",color:"info","aria-label":"Info"})}return null},L=function(e){var t=e.intent,n=e.title,a=e.icon,r=e.cancelLabel,i=e.onCancel,s=e.children;return Object(k.jsxs)(u.c,{sx:{p:0,borderRadius:"4px"},children:[t?Object(k.jsx)(u.a,{sx:{height:"4px",bg:t,borderRadius:"3px 3px 0 0"}}):null,Object(k.jsxs)(u.f,{sx:{justifyContent:"space-between",alignItems:"center",borderBottom:1,borderColor:"muted",p:[3,4],pb:3},children:[a||N(t),Object(k.jsx)(u.g,{as:"h1",sx:{textAlign:"center",fontSize:[2,3],px:[3,0]},children:n}),Object(k.jsx)(u.b,{variant:"icon",onClick:i,children:Object(k.jsx)(F,{name:"times",size:"lg","aria-label":r||"Cancel"})})]}),s]})},z=function(e){var t=e.title,n=e.cancelLabel,a=e.onCancel,r=e.retryLabel,i=e.onRetry,s=e.children;return Object(k.jsxs)(L,{intent:"danger",title:t,cancelLabel:n,onCancel:a,children:[Object(k.jsx)(u.a,{sx:{p:[3,4]},children:s}),Object(k.jsxs)(u.f,{sx:{p:[3,4],borderTop:1,borderColor:"muted",justifyContent:"flex-end",flexDirection:["column","row"],alignItems:"center"},children:[Object(k.jsx)(u.b,{variant:"danger",sx:{mr:[0,3],mb:[2,0],width:["100%","auto"]},onClick:a,children:n||"Cancel"}),Object(k.jsx)(u.b,{sx:{width:["100%","auto"]},onClick:i,children:r||"Retry"})]})]})},q=function(e){var t=e.title,n=e.icon,a=e.waitReason,r=e.cancelLabel,i=e.onCancel,s=e.children;return Object(k.jsxs)(L,{title:t,icon:n,cancelLabel:r,onCancel:i,children:[s,Object(k.jsx)(u.a,{sx:{px:[3,4],pb:[3,4]},children:Object(k.jsxs)(u.f,{sx:{flexDirection:["column","row"],bg:"muted",p:[3,4],alignItems:["center","auto"]},children:[Object(k.jsx)(u.n,{size:"3em",sx:{mr:[0,3],mb:[2,0]}}),Object(k.jsx)(u.f,{sx:{flexDirection:"column",alignItems:["center","flex-start"]},children:a})]})})]})},H=function(e){var t=e.title,n=e.icon,a=e.onCancel,r=e.children;return Object(k.jsx)(q,{title:t,icon:n,waitReason:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(u.o,{sx:{fontWeight:"bold"},children:"Waiting for connection confirmation..."}),Object(k.jsx)(u.o,{children:"This won\u2019t cost you any Ether"})]}),cancelLabel:"Cancel connection",onCancel:a,children:Object(k.jsx)(u.a,{sx:{p:[3,4]},children:r})})},W=function(){return Object(k.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(k.jsx)("title",{children:"MetaMask extension icon"}),Object(k.jsx)("path",{d:"M8.49025 3.49976L1.49216 0.499756L0.492432 3.49976L2.49189 11.9998L21.4867 11.4998L23.4861 3.49976L21.9866 0.499756L15.4883 3.49976H8.49025Z",fill:"#763D16"}),Object(k.jsx)("path",{d:"M6.99048 11.9998H17.9875V18.9998H6.99048V11.9998Z",fill:"#333333"}),Object(k.jsx)("rect",{x:"7.99023",y:"16.9998",width:"5.99836",height:"3",fill:"#333333"}),Object(k.jsx)("path",{d:"M1.58124 10.6642C1.72755 10.8311 1.76935 11.0607 1.70665 11.2485L0.222731 15.8398C0.18093 15.9651 0.18093 16.0903 0.222731 16.1946L1.51854 20.6398C1.62304 20.9738 1.95745 21.1616 2.27095 21.0572L6.7227 19.8259C6.9108 19.7633 7.1198 19.8259 7.287 19.9511L8.06031 20.5772C8.08121 20.5981 8.08121 20.5981 8.10211 20.5981L10.0249 21.9338C10.1294 21.9964 10.2548 22.0381 10.3802 22.0381H13.5989C13.7243 22.0381 13.8497 21.9964 13.9542 21.9338L15.877 20.5981C15.8979 20.5981 15.8979 20.5772 15.9188 20.5772L16.6921 19.9511C16.8384 19.8259 17.0474 19.7842 17.2564 19.8259L21.7081 21.0572C22.0426 21.1407 22.377 20.9529 22.4606 20.6398L23.7564 16.1946C23.7982 16.0694 23.7982 15.9442 23.7564 15.8398L22.2725 11.2485C22.2098 11.0398 22.2516 10.8311 22.3979 10.6642L23.9863 3.54766C24.0072 3.44331 24.0072 3.33897 23.9654 3.23462L23.0249 0.417226C22.9204 0.0833133 22.5442 -0.0836433 22.2098 0.0415742L15.2709 2.6294C15.2082 2.65027 15.1246 2.67114 15.0619 2.67114H8.91722C8.83362 2.67114 8.77092 2.65027 8.70822 2.6294L1.76935 0.0415742C1.43494 -0.0836433 1.05874 0.0833133 0.954238 0.417226L0.0346286 3.23462C-0.00717182 3.3181 -0.00717182 3.44331 0.0137284 3.54766L1.58124 10.6642ZM13.996 14.2537L14.5185 13.1685C14.5812 13.0433 14.7484 12.9807 14.8738 13.0433L16.1278 13.6068C16.3577 13.7111 16.3368 14.0451 16.086 14.1285L14.3304 14.6503C14.1005 14.7129 13.8915 14.4833 13.996 14.2537ZM13.8915 6.71984C13.7661 6.61549 13.7661 6.40679 13.9124 6.32331L21.8126 0.918096C21.9381 0.834618 22.1262 0.876357 22.1889 1.04331L23.1712 3.73549C23.1921 3.77723 23.1921 3.81897 23.1712 3.88157L21.5618 10.0798C21.52 10.2051 21.3946 10.2677 21.2692 10.2259L16.922 9.05723C16.8802 9.05723 16.8593 9.03636 16.8384 9.01549L13.8915 6.71984ZM10.0667 19.5338L10.213 18.3233C10.213 18.2607 10.2548 18.1981 10.3175 18.1564L10.6101 17.9477C10.6519 17.9268 10.6937 17.9059 10.7355 17.9059H13.2018C13.2436 17.9059 13.3063 17.9268 13.3272 17.9477L13.6198 18.1564C13.6825 18.1981 13.7034 18.2607 13.7243 18.3233L13.8497 19.5338C13.8706 19.6798 13.7452 19.8051 13.6198 19.8051H10.2757C10.1712 19.8051 10.0667 19.6798 10.0667 19.5338ZM7.85131 13.6068L9.10532 13.0433C9.25162 12.9807 9.39792 13.0433 9.46062 13.1685L9.98313 14.2537C10.0876 14.4624 9.87863 14.692 9.64873 14.6294L7.87221 14.1077C7.64231 14.0451 7.62141 13.7111 7.85131 13.6068ZM0.807936 3.86071C0.787036 3.81897 0.807936 3.75636 0.807936 3.71462L1.79025 1.04331C1.85295 0.897226 2.04105 0.834618 2.16645 0.918096L10.0667 6.32331C10.213 6.42766 10.213 6.61549 10.0876 6.71984L7.1407 9.01549C7.1198 9.03636 7.078 9.05723 7.0571 9.05723L2.70986 10.2259C2.58445 10.2677 2.45905 10.2051 2.41725 10.0798L0.807936 3.86071Z",fill:"#F36D34"})]})},G=function(e){var t=e.children;return Object(k.jsx)(u.e,{variant:"modalOverlay",children:Object(k.jsx)(u.e,{variant:"modal",children:t})})},V=function(e,t){switch(t.type){case"startActivating":return{type:"activating",connector:t.connector};case"finishActivating":return{type:"active",connector:"inactive"===e.type?M:e.connector};case"fail":if("inactive"!==e.type)return{type:t.error.message.match(/user rejected/i)?"rejectedByUser":t.error.message.match(/already pending/i)?"alreadyPending":"failed",connector:e.connector};break;case"retry":if("inactive"!==e.type)return{type:"activating",connector:e.connector};break;case"cancel":case"deactivate":return{type:"inactive"}}return console.warn("Ignoring connectionReducer action:"),console.log(t),console.log("  in state:"),console.log(e),e},Y=function(e){var t=e.children,n=e.loader,r=Object(o.b)(),i=r.activate,s=r.deactivate,l=r.active,c=r.error,d=function(){var e=Object(o.b)(),t=e.activate,n=e.active,r=Object(a.useState)(!1),i=Object(p.a)(r,2),s=i[0],u=i[1];return Object(a.useEffect)((function(){!function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.isAuthorized();case 3:if(!e.sent){e.next=8;break}return e.next=6,t(M,void 0,!0);case 6:e.next=9;break;case 8:throw new Error("Unauthorized");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),u(!0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[t]),Object(a.useEffect)((function(){n&&u(!0)}),[n]),s}(),y=Object(a.useReducer)(V,{type:"inactive"}),b=Object(p.a)(y,2),f=b[0],v=b[1],T=function(){var e,t;return null!==(e=null===(t=window.ethereum)||void 0===t?void 0:t.isMetaMask)&&void 0!==e&&e}();return Object(a.useEffect)((function(){c&&(v({type:"fail",error:c}),s())}),[c,s]),Object(a.useEffect)((function(){v(l?{type:"finishActivating"}:{type:"deactivate"})}),[l]),d?"active"===f.type?Object(k.jsx)(k.Fragment,{children:t}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(u.f,{sx:{height:"100vh",justifyContent:"center",alignItems:"center"},children:Object(k.jsx)(u.b,{onClick:function(){v({type:"startActivating",connector:M}),i(M)},children:T?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(W,{}),Object(k.jsx)(u.a,{sx:{ml:2},children:"Connect to MetaMask"})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(F,{name:"plug",size:"lg"}),Object(k.jsx)(u.a,{sx:{ml:2},children:"Connect wallet"})]})})}),"failed"===f.type&&Object(k.jsx)(G,{children:Object(k.jsxs)(z,{title:T?"Failed to connect to MetaMask":"Failed to connect wallet",onCancel:function(){return v({type:"cancel"})},onRetry:function(){v({type:"retry"}),i(f.connector)},children:[Object(k.jsx)(u.a,{sx:{textAlign:"center"},children:"You might need to install MetaMask or use a different browser."}),Object(k.jsxs)(u.k,{sx:{lineHeight:3},href:"https://metamask.io/download.html",target:"_blank",children:["Learn more ",Object(k.jsx)(F,{size:"xs",name:"external-link-alt"})]})]})}),"activating"===f.type&&Object(k.jsx)(G,{children:Object(k.jsx)(H,{title:T?"Confirm connection in MetaMask":"Confirm connection in your wallet",icon:T?Object(k.jsx)(W,{}):Object(k.jsx)(F,{name:"wallet",size:"lg"}),onCancel:function(){return v({type:"cancel"})},children:Object(k.jsxs)(u.o,{sx:{textAlign:"center"},children:["Confirm the request that's just appeared.",T?Object(k.jsx)(k.Fragment,{children:" If you can't see a request, open your MetaMask extension via your browser."}):Object(k.jsx)(k.Fragment,{children:" If you can't see a request, you might have to open your wallet."})]})})}),"rejectedByUser"===f.type&&Object(k.jsx)(G,{children:Object(k.jsx)(z,{title:"Cancel connection?",onCancel:function(){return v({type:"cancel"})},onRetry:function(){v({type:"retry"}),i(f.connector)},children:Object(k.jsx)(u.o,{children:"To use Liquity, you need to connect your Ethereum account."})})}),"alreadyPending"===f.type&&Object(k.jsx)(G,{children:Object(k.jsx)(z,{title:"Connection already requested",onCancel:function(){return v({type:"cancel"})},onRetry:function(){v({type:"retry"}),i(f.connector)},children:Object(k.jsx)(u.o,{children:"Please check your wallet and accept the connection request before retrying."})})})]}):Object(k.jsx)(k.Fragment,{children:n})},J=n(2),Q=n(156),K=n(94),$=(n(243),n(260));function X(e){var t=e.children,n=e.message,i=e.placement,s=void 0===i?"top":i,o=Object(a.useRef)(),l=Object(a.useState)(!1),c=Object(p.a)(l,2),d=c[0],y=c[1],b=Object(a.useState)(),f=Object(p.a)(b,2),m=f[0],h=f[1],T=Object(a.useState)(),j=Object(p.a)(T,2),g=j[0],O=j[1],x=Object($.a)(m,g,{placement:s}),w=x.styles,_=x.attributes;return Object(k.jsxs)(k.Fragment,{children:[r.a.cloneElement(r.a.Children.only(t),{onMouseOver:function(){o.current="over",d||y(!0)},onMouseOut:function(){o.current="out",setTimeout((function(){"out"===o.current&&y(!1)}),0)},ref:h}),d&&Object(k.jsx)(u.c,Object(v.a)(Object(v.a)({variant:"tooltip",ref:O,style:w.popper},_.popper),{},{children:n}))]})}var ee={strokeLinecap:"butt",pathColor:"white",trailColor:"rgba(255, 255, 255, 0.33)"},te={strokeWidth:10,styles:Object(K.b)(Object(v.a)(Object(v.a)({},ee),{},{pathTransitionDuration:30}))},ne={strokeWidth:10,styles:Object(K.b)(Object(v.a)(Object(v.a)({},ee),{},{pathTransitionDuration:.75}))},ae=r.a.createContext(void 0),re=function(e){var t=e.children,n=Object(a.useState)({type:"idle"});return Object(k.jsx)(ae.Provider,{value:n,children:t})},ie=function(){var e=Object(a.useContext)(ae);if(!e)throw new Error("You must provide a TransactionContext via TransactionProvider");return e},se=function(e){var t=ie(),n=Object(p.a)(t,1)[0];return"idle"!==n.type&&("string"===typeof e?n.id===e:n.id.match(e))?n:{type:"idle"}},oe=function(e,t){var n=ie(),r=Object(p.a)(n,2),i=r[0],s=r[1];return[Object(a.useCallback)(Object(h.a)(m.a.mark((function n(){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s({type:"waitingForApproval",id:e}),n.prev=1,n.next=4,t();case 4:a=n.sent,s({type:"waitingForConfirmation",id:e,tx:a}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),"object"===typeof(r=n.t0)&&null!==r&&"message"in r&&"string"===typeof r.message&&n.t0.message.includes("User denied transaction signature")?s({type:"cancelled",id:e}):(console.error(n.t0),s({type:"failed",id:e,error:new Error("Failed to send transaction (try again)")}));case 11:case"end":return n.stop()}var r}),n,null,[[1,8]])}))),[t,e,s]),i]};function ue(e){var t,n=e.id,a=e.tooltip,i=e.tooltipPlacement,s=e.showFailure,o=e.requires,u=e.send,l=e.children,c=oe(n,u),d=Object(p.a)(c,2),y=d[0],b=d[1],f=r.a.Children.only(l),m=(o||[]).filter((function(e){return!Object(p.a)(e,1)[0]})).map((function(e){return Object(p.a)(e,2)[1]}));"waitingForApproval"!==b.type&&"waitingForConfirmation"!==b.type||m.push("You must wait for confirmation");var h="asChildText"===(s=m.length>0?null!==(t=s)&&void 0!==t?t:a?"asTooltip":"asChildText":void 0)?r.a.cloneElement(f,{disabled:!0,variant:"danger"},m[0]):"asTooltip"===s?r.a.cloneElement(f,{disabled:!0}):r.a.cloneElement(f,{onClick:y});return"asTooltip"===s&&(a=m[0]),a?Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(X,{message:a,placement:i||"right",children:h})}):h}var le=function(){var e=Object(h.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getTransaction(n);case 3:return a=e.sent,e.next=6,t.call(a,a.blockNumber);case 6:if(r=e.sent,Object(J.d)(r)%32!==4||"0x08c379a0"!==Object(J.e)(r,0,4)){e.next=9;break}return e.abrupt("return",Q.a.decode(["string"],Object(J.e)(r,4))[0]);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),ce=r.a.memo(K.a,(function(e,t){return e.value===t.value})),de=function(e){var t=e.state,n=Object(a.useState)(0),r=Object(p.a)(n,2),i=r[0],s=r[1];return Object(a.useEffect)((function(){"confirmed"===t?setTimeout((function(){return s(1)}),40):setTimeout((function(){return s(.67)}),20)}),[t]),"confirmed"===t?Object(k.jsx)(ce,Object(v.a)(Object(v.a)({},Object(v.a)({value:i,maxValue:1},ne)),{},{children:Object(k.jsx)(F,{name:"check",color:"white",size:"lg"})})):"failed"===t||"cancelled"===t?Object(k.jsx)(ce,Object(v.a)(Object(v.a)({value:0},Object(v.a)({maxValue:1},ne)),{},{children:Object(k.jsx)(F,{name:"times",color:"white",size:"lg"})})):Object(k.jsx)(ce,Object(v.a)(Object(v.a)({},Object(v.a)({value:i,maxValue:1},te)),{},{children:Object(k.jsx)(F,{name:"cog",color:"white",size:"lg",spin:!0})}))},pe=function(){var e=R().provider,t=ie(),n=Object(p.a)(t,2),r=n[0],i=n[1],s="idle"!==r.type?r.id:void 0,o="waitingForConfirmation"===r.type?r.tx:void 0;return Object(a.useEffect)((function(){if(s&&o){var t=!1,n=!1,a=o.rawSentTransaction.hash,r=function(){var r=Object(h.a)(m.a.mark((function r(){var u,l,c,d;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.waitForReceipt();case 3:if(u=r.sent,!t){r.next=6;break}return r.abrupt("return");case 6:if(l=u.rawReceipt.confirmations,c=u.rawReceipt.blockNumber+l-1,console.log("Block #".concat(c," ").concat(l,"-confirms tx ").concat(a)),console.log("Finish monitoring tx ".concat(a)),n=!0,"succeeded"!==u.status){r.next=16;break}console.log("".concat(u)),i({type:"confirmedOneShot",id:s}),r.next=24;break;case 16:return r.next=18,le(e,a);case 18:if(d=r.sent,!t){r.next=21;break}return r.abrupt("return");case 21:console.error("Tx ".concat(a," failed")),d&&console.error("Revert reason: ".concat(d)),i({type:"failed",id:s,error:new Error(d?"Reverted: ".concat(d):"Failed")});case 24:r.next=33;break;case 26:if(r.prev=26,r.t0=r.catch(0),!t){r.next=30;break}return r.abrupt("return");case 30:console.error("Failed to get receipt for tx ".concat(a)),console.error(r.t0),i({type:"failed",id:s,error:new Error("Failed")});case 33:case"end":return r.stop()}}),r,null,[[0,26]])})));return function(){return r.apply(this,arguments)}}();return console.log("Start monitoring tx ".concat(a)),r(),function(){n||(i({type:"idle"}),console.log("Cancel monitoring tx ".concat(a)),t=!0)}}}),[e,s,o,i]),Object(a.useEffect)((function(){if("confirmedOneShot"===r.type&&s)i({type:"confirmed",id:s});else if("confirmed"===r.type||"failed"===r.type||"cancelled"===r.type){var e=!1;return setTimeout((function(){e||i({type:"idle"})}),5e3),function(){e=!0}}}),[r.type,i,s]),"idle"===r.type||"waitingForApproval"===r.type?null:Object(k.jsxs)(u.f,{sx:{alignItems:"center",bg:"confirmed"===r.type?"success":"cancelled"===r.type?"warning":"failed"===r.type?"danger":"primary",p:3,pl:4,position:"fixed",width:"100vw",bottom:0,overflow:"hidden"},children:[Object(k.jsx)(u.a,{sx:{mr:3,width:"40px",height:"40px"},children:Object(k.jsx)(de,{state:r.type})}),Object(k.jsx)(u.o,{sx:{fontSize:3,color:"white"},children:"waitingForConfirmation"===r.type?"Waiting for confirmation":"cancelled"===r.type?"Cancelled":"failed"===r.type?r.error.message:"Confirmed"})]})},ye="#1542cd",be={primary:ye,secondary:"#745ddf",accent:"#2eb6ea",success:"#28c081",warning:"#fd9d28",danger:"#dc2c10",dangerHover:"#ff755f",info:ye,invalid:"pink",text:"#293147",background:"white",muted:"#eaebed"},fe={display:"flex",alignItems:"center",justifyContent:"center",":enabled":{cursor:"pointer"}},me=Object(v.a)(Object(v.a)({},fe),{},{px:"32px",py:"12px",color:"white",border:1,fontWeight:"bold",":disabled":{opacity:.5}}),he=function(e,t){return{color:e,borderColor:e,background:"none",":enabled:hover":{color:"background",bg:t,borderColor:t}}},ve=Object(v.a)(Object(v.a)({},fe),{},{padding:0,width:"40px",height:"40px",background:"none",":disabled":{color:"text",opacity:.25}}),Te=18.7167,je=[0,3,4],ge=[3,3,4],Oe={position:"relative",mt:ge,border:1,boxShadow:[1,null,2]},xe=Object(v.a)(Object(v.a)({},Oe),{},{padding:3,borderColor:"rgba(122,199,240,0.4)",background:"linear-gradient(200deg, #d4d9fc, #cae9f9)",h2:{mb:2,fontSize:Te}}),we={display:"block",width:"auto",flexShrink:0,padding:2,fontSize:3},_e=Object(v.a)(Object(v.a)({},we),{},{bg:"background",border:1,borderColor:"muted",borderRadius:0,boxShadow:[1,2]}),Se={position:"fixed",left:0,top:0,width:"100vw",height:"100vh"},ke={background:"linear-gradient(90deg, ".concat(be.background,", ").concat(be.muted,")")},Ee={breakpoints:["48em","52em","64em"],space:[0,4,8,16,32,64,128,256,512],fonts:{body:["system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"sans-serif"].join(", "),heading:"inherit",monospace:"Menlo, monospace"},fontSizes:[12,14,16,20,24,32,48,64,96],fontWeights:{body:400,heading:600,light:200,medium:500,bold:600},lineHeights:{body:1.5,heading:1.25},colors:be,borders:[0,"1px solid","2px solid"],shadows:["0","0px 4px 8px rgba(41, 49, 71, 0.1)","0px 8px 16px rgba(41, 49, 71, 0.1)"],text:{address:{fontFamily:"monospace",fontSize:1}},buttons:{primary:Object(v.a)(Object(v.a)({},me),{},{bg:"primary",borderColor:"primary",":enabled:hover":{bg:"secondary",borderColor:"secondary"}}),outline:Object(v.a)(Object(v.a)({},me),he("primary","secondary")),cancel:Object(v.a)(Object(v.a)(Object(v.a)({},me),he("text","text")),{},{opacity:.8}),danger:Object(v.a)(Object(v.a)({},me),{},{bg:"danger",borderColor:"danger",":enabled:hover":{bg:"dangerHover",borderColor:"dangerHover"}}),icon:Object(v.a)(Object(v.a)({},ve),{},{color:"primary",":enabled:hover":{color:"accent"}}),dangerIcon:Object(v.a)(Object(v.a)({},ve),{},{color:"danger",":enabled:hover":{color:"dangerHover"}}),titleIcon:Object(v.a)(Object(v.a)({},ve),{},{color:"text",":enabled:hover":{color:"success"}})},cards:{primary:Object(v.a)(Object(v.a)({},Oe),{},{padding:0,borderColor:"muted",bg:"background","> h2":{display:"flex",justifyContent:"space-between",alignItems:"center",height:"56px",pl:3,py:2,pr:2,bg:"muted",fontSize:Te}}),info:Object(v.a)(Object(v.a)({},xe),{},{display:["none","block"]}),infoPopup:Object(v.a)(Object(v.a)({},xe),{},{position:"fixed",top:0,right:3,left:3,mt:"72px",height:"80%",overflowY:"scroll"}),tooltip:{padding:2,border:1,borderColor:"muted",borderRadius:"4px",bg:"background",boxShadow:2,fontSize:1,color:"text",fontWeight:"body",zIndex:1}},forms:{label:Object(v.a)({},we),unit:Object(v.a)(Object(v.a)({},_e),{},{textAlign:"center",bg:"muted"}),input:Object(v.a)(Object(v.a)({},_e),{},{flex:1}),editor:{}},layout:{header:Object(v.a)(Object(v.a)({display:"flex",justifyContent:"space-between",alignItems:"stretch",position:["fixed","relative"],width:"100vw",top:0,zIndex:1,px:[2,"12px","12px",5],py:[2,"12px","12px"]},ke),{},{boxShadow:[1,"none"]}),footer:{display:"flex",alignItems:"center",justifyContent:"center",mt:ge,px:3,minHeight:"72px",bg:"muted"},main:{width:"100%",maxWidth:"912px",mx:"auto",mt:["40px",0],mb:["40px","40px"],px:je},columns:{display:"flex",flexWrap:"wrap",justifyItems:"center"},left:{pr:je,width:["100%","58%"]},right:{width:["100%","42%"]},actions:{justifyContent:"flex-end",mt:2,button:{ml:2}},disabledOverlay:Object(v.a)(Object(v.a)({},{position:"absolute",left:0,top:0,width:"100%",height:"100%"}),{},{bg:"rgba(255, 255, 255, 0.5)"}),modalOverlay:Object(v.a)(Object(v.a)({},Se),{},{bg:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center"}),modal:{padding:3,width:["100%","40em"]},infoOverlay:Object(v.a)(Object(v.a)({},Se),{},{display:["block","none"],bg:"rgba(255, 255, 255, 0.8)"}),infoMessage:{display:"flex",justifyContent:"center",m:3,alignItems:"center",minWidth:"128px"},sidenav:Object(v.a)({display:["flex","none"],flexDirection:"column",p:0,m:0,borderColor:"muted",mr:"25vw",height:"100%"},ke),badge:{border:0,borderRadius:3,p:1,px:2,backgroundColor:"muted",color:"slate",fontSize:1,fontWeight:"body"}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body",height:"100%","#root":{height:"100%"}},a:{color:"primary",":hover":{color:"accent"},textDecoration:"none",fontWeight:"bold"}},links:{nav:{px:2,py:1,fontWeight:"medium",fontSize:2,textTransform:"uppercase",letterSpacing:"2px",width:["100%","auto"],mt:[3,"auto"]}}},De=n(7),Ce=n(8),Re=n(84),Me=n(9),Ae=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;Object(De.a)(this,e),this.url=void 0,this.id=0,this.wallet=void 0,this.funderWallet=void 0,this.ethAmount=void 0,this.haveFunded=!1,this.url=t,this.wallet=Re.a.createRandom(),this.funderWallet=new Re.a(n),this.ethAmount=Me.Decimal.from(a)}return Object(Ce.a)(e,[{key:"findWallet",value:function(e){var t=[this.wallet,this.funderWallet].find((function(t){return t.address.toLowerCase()===e.toLowerCase()}));if(!t)throw new Error("Unknow account ".concat(e));return t}},{key:"fund",value:function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.send("eth_sendTransaction",[{from:this.funderWallet.address,to:this.wallet.address,value:this.ethAmount.hex,gas:Object(J.h)(21e3)}]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(h.a)(m.a.mark((function e(t,n){var a,r,i,s,o,u,l=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.haveFunded){e.next=4;break}return this.haveFunded=!0,e.next=4,this.fund();case 4:e.t0=t,e.next="eth_accounts"===e.t0||"eth_requestAccounts"===e.t0?7:"eth_sendTransaction"===e.t0?8:13;break;case 7:return e.abrupt("return",[this.wallet.address]);case 8:return e.t1=this,e.next=11,Promise.all(n.map(function(){var e=Object(h.a)(m.a.mark((function e(t){var n,a,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.from,a=t.nonce,r=t.gas,i=Object(A.a)(t,["from","nonce","gas"]),void 0!==a){e.next=5;break}return e.next=4,l.send("eth_getTransactionCount",[n]);case 4:a=e.sent;case 5:return e.abrupt("return",l.findWallet(n).signTransaction(Object(v.a)(Object(v.a)({from:n,nonce:a},void 0!==r?{gasLimit:r}:{}),i)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return e.t2=e.sent,e.abrupt("return",e.t1.send.call(e.t1,"eth_sendRawTransaction",e.t2));case 13:return e.next=15,fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:t,params:n,id:this.id++,jsonrpc:"2.0"})});case 15:return a=e.sent,e.next=18,a.json();case 18:if(!(r=e.sent).error){e.next=23;break}throw i=r.error,s=i.message,o=Object(A.a)(i,["message"]),u=new Error("".concat(s," ").concat(JSON.stringify(o))),Object.assign(u,o);case 23:return e.abrupt("return",r.result);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"request",value:function(e){var t=e.method,n=e.params;return this.send(t,n)}}]),e}(),Pe=n(93),Ie=n(27),Ze=n(13),Ue="ZUSD",Be="ZERO",Fe="NUE",Ne=function(e){return e.substr(0,6)+"..."+e.substr(-4)},Le=function(e){return{accountBalance:e.accountBalance,zusdBalance:e.zusdBalance,zeroBalance:e.zeroBalance,nueBalance:e.nueBalance}},ze=function(){var e=R().account,t=Object(Ze.useLiquitySelector)(Le),n=t.accountBalance,a=t.zusdBalance,r=t.zeroBalance,i=t.nueBalance;return Object(k.jsxs)(u.a,{sx:{display:["none","flex"]},children:[Object(k.jsxs)(u.f,{sx:{alignItems:"center"},children:[Object(k.jsx)(F,{name:"user-circle",size:"lg"}),Object(k.jsxs)(u.f,{sx:{ml:3,mr:4,flexDirection:"column"},children:[Object(k.jsx)(u.g,{sx:{fontSize:1},children:"Connected as"}),Object(k.jsx)(u.o,{as:"span",sx:{fontSize:1},children:Ne(e)})]})]}),Object(k.jsxs)(u.f,{sx:{alignItems:"center"},children:[Object(k.jsx)(F,{name:"wallet",size:"lg"}),[["RBTC",n],[Ue,a],[Fe,i],[Be,r]].map((function(e,t){var n=Object(p.a)(e,2),a=n[0],r=n[1];return Object(k.jsxs)(u.f,{sx:{ml:3,flexDirection:"column"},children:[Object(k.jsx)(u.g,{sx:{fontSize:1},children:a}),Object(k.jsx)(u.o,{sx:{fontSize:1},children:r.prettify()})]},t)}))]})]})},qe=n(158),He=function(e){var t=e.placement,n=void 0===t?"right":t,a=e.tooltip,r=e.size,i=void 0===r?"1x":r;return Object(k.jsx)(qe.a,{interactive:!0,placement:n,content:a,maxWidth:"268px",children:Object(k.jsxs)("span",{children:["\xa0",Object(k.jsx)(F,{name:"question-circle",size:i})]})})},We=function(e){var t=e.name,n=e.tooltip,a=e.children;return Object(k.jsxs)(u.f,{sx:{borderBottom:1,borderColor:"rgba(0, 0, 0, 0.1)"},children:[Object(k.jsxs)(u.f,{sx:{alignItems:"center",justifyContent:"flex-start",flex:1.2,fontWeight:200},children:[Object(k.jsx)(u.f,{children:t}),n&&Object(k.jsx)(He,{size:"xs",tooltip:Object(k.jsx)(u.c,{variant:"tooltip",children:n})})]}),Object(k.jsx)(u.f,{sx:{justifyContent:"flex-start",flex:.8,alignItems:"center"},children:a})]})},Ge=function(e){return{accountBalance:e.accountBalance,zusdBalance:e.zusdBalance,zeroBalance:e.zeroBalance}},Ve=function(){var e=Object(Ze.useLiquitySelector)(Ge),t=e.accountBalance,n=e.zusdBalance,a=e.zeroBalance;return Object(k.jsxs)(u.a,{sx:{mb:3},children:[Object(k.jsx)(u.g,{children:"My Account Balances"}),Object(k.jsxs)(We,{name:"RBTC",children:[" ",t.prettify(4)]}),Object(k.jsxs)(We,{name:Ue,children:[" ",n.prettify()]}),Object(k.jsx)(We,{name:Be,children:a.prettify()})]})},Ye=function(e){var t=e.children;return(null===t||void 0===t?void 0:t.match(/[0-9a-f]{40}/))?Object(k.jsx)(u.k,{href:"https://github.com/liquity/dev/commit/".concat(t),children:t.substr(0,7)}):Object(k.jsx)(k.Fragment,{children:"unknown"})},Je=function(e){var t=e.numberOfTroves,n=e.price,a=e.total,r=e.zusdInStabilityPool,i=e.borrowingRate,s=e.redemptionRate,o=e.totalStakedZERO,u=e.frontend;return{numberOfTroves:t,price:n,total:a,zusdInStabilityPool:r,borrowingRate:i,redemptionRate:s,totalStakedZERO:o,kickbackRate:"registered"===u.status?u.kickbackRate:null}},Qe=function(e){var t=e.variant,n=void 0===t?"info":t,a=e.showBalances,r=R().liquity.connection,i=r.version,s=r.deploymentDate,o=r.frontendTag,l=Object(Ze.useLiquitySelector)(Je),c=l.numberOfTroves,d=l.price,p=l.zusdInStabilityPool,y=l.total,b=l.borrowingRate,f=l.totalStakedZERO,m=l.kickbackRate,h=y.debt.nonZero&&new Me.Percent(p.div(y.debt)),v=new Me.Percent(y.collateralRatio(d)),j=new Me.Percent(b),g=o===T.a?"100":null===m||void 0===m?void 0:m.mul(100).prettify();return Object(k.jsxs)(u.c,{variant:n,children:[a&&Object(k.jsx)(Ve,{}),Object(k.jsx)(u.g,{children:"Liquity statistics"}),Object(k.jsx)(u.g,{as:"h2",sx:{mt:3,fontWeight:"body"},children:"Protocol"}),Object(k.jsx)(We,{name:"Borrowing Fee",tooltip:"The Borrowing Fee is a one-off fee charged as a percentage of the borrowed amount (in ZUSD) and is part of a Trove's debt. The fee varies between 0.5% and 5% depending on ZUSD redemption volumes.",children:j.toString(2)}),Object(k.jsxs)(We,{name:"TVL",tooltip:"The Total Value Locked (TVL) is the total value of RBTC locked as collateral in the system, given in RBTC and USD.",children:[y.collateral.shorten()," ",Object(k.jsx)(u.o,{sx:{fontSize:1},children:"\xa0RBTC"}),Object(k.jsxs)(u.o,{sx:{fontSize:1},children:["\xa0($",Me.Decimal.from(y.collateral.mul(d)).shorten(),")"]})]}),Object(k.jsx)(We,{name:"Troves",tooltip:"The total number of active Troves in the system.",children:Me.Decimal.from(c).prettify(0)}),Object(k.jsx)(We,{name:"ZUSD supply",tooltip:"The total ZUSD minted by the Liquity Protocol.",children:y.debt.shorten()}),h&&Object(k.jsxs)(We,{name:"ZUSD in Stability Pool",tooltip:"The total ZUSD currently held in the Stability Pool, expressed as an amount and a fraction of the ZUSD supply. ",children:[p.shorten(),Object(k.jsxs)(u.o,{sx:{fontSize:1},children:["\xa0(",h.toString(1),")"]})]}),Object(k.jsx)(We,{name:"Staked ZERO",tooltip:"The total amount of ZERO that is staked for earning fee revenue.",children:f.shorten()}),Object(k.jsx)(We,{name:"Total Collateral Ratio",tooltip:"The ratio of the Dollar value of the entire system collateral at the current RBTC:USD price, to the entire system debt.",children:v.prettify()}),Object(k.jsx)(We,{name:"Recovery Mode",tooltip:"Recovery Mode is activated when the Total Collateral Ratio (TCR) falls below 150%. When active, your Trove can be liquidated if its collateral ratio is below the TCR. The maximum collateral you can lose from liquidation is capped at 110% of your Trove's debt. Operations are also restricted that would negatively impact the TCR.",children:y.collateralRatioIsBelowCritical(d)?Object(k.jsx)(u.a,{color:"danger",children:"Yes"}):"No"}),Object(k.jsx)(u.g,{as:"h2",sx:{mt:3,fontWeight:"body"},children:"Frontend"}),g&&Object(k.jsxs)(We,{name:"Kickback Rate",tooltip:"A rate between 0 and 100% set by the Frontend Operator that determines the fraction of ZERO that will be paid out as a kickback to the Stability Providers using the frontend.",children:[g,"%"]}),Object(k.jsxs)(u.a,{sx:{mt:3,opacity:.66},children:[Object(k.jsxs)(u.a,{sx:{fontSize:0},children:["Contracts version: ",Object(k.jsx)(Ye,{children:i})]}),Object(k.jsxs)(u.a,{sx:{fontSize:0},children:["Deployed: ",s.toLocaleString()]}),Object(k.jsxs)(u.a,{sx:{fontSize:0},children:["Frontend version:"," ",Object(k.jsx)(Ye,{children:"c19514752536c76511bf2674bb5fee46bb6e16a7"})]})]})]})},Ke=function(e){return{total:e.total,price:e.price}},$e=function(){var e=Object(Ze.useLiquitySelector)(Ke),t=e.price,n=e.total,r=Object(a.useState)(!1),i=Object(p.a)(r,2),s=i[0],o=i[1],l=Object(a.useRef)(null);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(u.b,{onClick:function(){return o(!s)},variant:"icon",sx:{position:"relative",display:["block","none"]},children:[Object(k.jsx)(F,{name:"info-circle",size:"2x"}),n.collateralRatioIsBelowCritical(t)&&Object(k.jsx)(u.f,{sx:{position:"absolute",right:0,top:0,width:"100%",height:"100%",alignItems:"flex-start",justifyContent:"flex-end",pt:"2px",color:"danger"},children:Object(k.jsx)(F,{name:"exclamation-circle",size:"xs"})})]}),s&&Object(k.jsx)(u.e,{variant:"infoOverlay",ref:l,onClick:function(e){e.target===l.current&&o(!1)},children:Object(k.jsx)(Qe,{variant:"infoPopup",showBalances:!0})})]})},Xe=function(e){var t=e.height,n=Object(A.a)(e,["height"]);return Object(k.jsx)(u.a,Object(v.a)(Object(v.a)({sx:{lineHeight:0}},n),{},{children:Object(k.jsx)(u.h,{src:"./zusd-icon.png",sx:{height:t}})}))},et=function(e){return Object(k.jsx)(Pe.b,Object(v.a)({exact:!0},e))},tt=function(e){return Object(k.jsx)(u.l,Object(v.a)(Object(v.a)({},e),{},{as:et}))},nt=function(){return Object(k.jsxs)(u.a,{as:"nav",sx:{display:["none","flex"],alignItems:"center",flex:1},children:[Object(k.jsxs)(u.f,{children:[Object(k.jsx)(tt,{to:"/",children:"Dashboard"}),Object(k.jsx)(tt,{to:"/farm",children:"Farm"})]}),Object(k.jsxs)(u.f,{sx:{justifyContent:"flex-end",mr:3,flex:1},children:[Object(k.jsx)(tt,{sx:{fontSize:1},to:"/risky-troves",children:"Risky Troves"}),Object(k.jsx)(tt,{sx:{fontSize:1},to:"/redemption",children:"Redemption"})]})]})},at=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(a.useRef)(null);return n?Object(k.jsx)(u.e,{variant:"infoOverlay",ref:i,onClick:function(e){e.target===i.current&&r(!1)},children:Object(k.jsxs)(u.f,{variant:"layout.sidenav",children:[Object(k.jsx)(u.b,{sx:{position:"fixed",right:"25vw",m:2},variant:"icon",onClick:function(){return r(!1)},children:Object(k.jsx)(F,{name:"times",size:"2x"})}),Object(k.jsx)(Xe,{height:"32px",p:2}),Object(k.jsxs)(u.a,{as:"nav",sx:{m:3,mt:1,p:0},onClick:function(){return r(!1)},children:[Object(k.jsx)(tt,{to:"/",children:"Dashboard"}),Object(k.jsx)(tt,{to:"/farm",children:"Farm"}),Object(k.jsx)(tt,{to:"/risky-troves",children:"Risky Troves"}),Object(k.jsx)(tt,{to:"/redemption",children:"Redemption"})]})]})}):Object(k.jsx)(u.b,{sx:{display:["flex","none"]},variant:"icon",onClick:function(){return r(!0)},children:Object(k.jsx)(F,{name:"bars",size:"lg"})})},rt=function(e){return{frontend:e.frontend}},it=function(e){var t=e.children,n=R().config.frontendTag,a=Object(Ze.useLiquitySelector)(rt).frontend,r=n===T.a||"registered"===a.status;return Object(k.jsxs)(u.e,{variant:"header",children:[Object(k.jsxs)(u.f,{sx:{alignItems:"center",flex:1},children:[Object(k.jsx)(Xe,{height:"32px"}),Object(k.jsx)(u.a,{sx:{mx:[2,3],width:"0px",height:"100%",borderLeft:["none","1px solid lightgrey"]}}),r&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(at,{}),Object(k.jsx)(nt,{})]})]}),t]})},st=function(e){var t=e.children;return Object(k.jsx)(u.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",mb:[2,3],p:3,border:1,borderRadius:"8px",borderColor:"accent",boxShadow:2,bg:"rgba(46, 182, 234, 0.05)"},children:Object(k.jsxs)(u.f,{sx:{alignItems:"center"},children:[Object(k.jsx)(F,{name:"info-circle",size:"lg"}),Object(k.jsx)(u.o,{sx:{ml:2},children:t})]})})},ot=function(e){var t=e.children;return Object(k.jsx)(u.o,{sx:{fontWeight:"bold",whiteSpace:"nowrap"},children:t})},ut=function(e){var t=e.sx,n=e.label,a=e.labelId,r=e.labelFor,i=e.children,s=e.infoIcon;return Object(k.jsxs)(u.f,{sx:Object(v.a)({alignItems:"stretch"},t),children:[Object(k.jsx)(u.j,{id:a,htmlFor:r,sx:{p:0,pl:3,pt:"12px",position:"absolute",fontSize:1,border:1,borderColor:"transparent"},children:Object(k.jsxs)(u.f,{sx:{alignItems:"center"},children:[n,s&&s]})}),i]})},lt=function(e){var t=e.sx,n=e.value;return Object(k.jsxs)(u.o,{sx:t,children:["(","++"===n?Object(k.jsx)(F,{name:"angle-double-up"}):"--"===n?Object(k.jsx)(F,{name:"angle-double-down"}):(null===n||void 0===n?void 0:n.startsWith("+"))?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(F,{name:"angle-up"})," ",n.substr(1)]}):(null===n||void 0===n?void 0:n.startsWith("-"))?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(F,{name:"angle-down"})," ",n.substr(1)]}):n,")"]})},ct=function(e){var t=e.sx,n=e.inputId,a=e.labelledBy,r=e.amount,i=e.unit,s=e.color,o=e.pendingAmount,l=e.pendingColor,c=e.onClick,d=e.children;return Object(k.jsxs)(u.f,{id:n,"aria-labelledby":a,onClick:c,sx:Object(v.a)(Object(v.a)(Object(v.a)({justifyContent:"space-between",alignItems:"center"},c?{cursor:"text"}:{}),dt),t),children:[Object(k.jsxs)(u.f,{sx:{alignItems:"center"},children:[Object(k.jsx)(u.o,{sx:{color:s,fontWeight:"medium"},children:r}),i&&Object(k.jsxs)(k.Fragment,{children:["\xa0",Object(k.jsx)(u.o,{sx:{fontWeight:"light",opacity:.8},children:i})]}),o&&Object(k.jsxs)(k.Fragment,{children:["\xa0",Object(k.jsx)(lt,{sx:{color:l,opacity:.8,fontSize:"0.666em"},value:o})]})]}),d]})},dt={flexGrow:1,mb:0,pl:3,pr:"11px",pb:0,pt:"28px",fontSize:3,border:1,borderColor:"transparent"},pt={flexGrow:1,mb:[2,3],pl:3,pr:"11px",pb:2,pt:"28px",fontSize:4,boxShadow:[1,2],border:1,borderColor:"muted"},yt=function(e){var t=e.label,n=e.labelId,a=e.labelFor,r=e.infoIcon,i=Object(A.a)(e,["label","labelId","labelFor","infoIcon"]);return Object(k.jsx)(ut,{label:t,labelId:n,labelFor:a,infoIcon:r,sx:{mt:[-2,-3],pb:[2,3]},children:Object(k.jsx)(ct,Object(v.a)({},i))})},bt=function(e){var t=e.inputId,n=e.label,a=e.unit,r=e.amount,i=e.color,s=e.pendingAmount,o=e.pendingColor;return Object(k.jsx)(ut,{labelId:"".concat(t,"-label"),label:n,unit:a,children:Object(k.jsx)(ct,{sx:Object(v.a)(Object(v.a)({},pt),{},{boxShadow:0}),labelledBy:"".concat(t,"-label"),inputId:t,amount:r,unit:a,color:i,pendingAmount:s,pendingColor:o})})},ft=function(e){var t=e.label,n=e.inputId,r=e.unit,i=e.amount,s=e.color,o=e.pendingAmount,l=e.pendingColor,c=e.editingState,d=e.editedAmount,y=e.setEditedAmount,b=e.maxAmount,f=e.maxedOut,m=Object(p.a)(c,2),h=m[0],T=m[1],j=Object(a.useState)(!1),g=Object(p.a)(j,2),O=g[0],x=g[1];return h===n?Object(k.jsx)(ut,{label:t,labelFor:n,unit:r,children:Object(k.jsx)(u.i,{autoFocus:!0,id:n,type:"number",step:"any",defaultValue:d,invalid:O,onChange:function(e){try{y(e.target.value),x(!1)}catch(t){x(!0)}},onBlur:function(){T(void 0),x(!1)},variant:"editor",sx:Object(v.a)(Object(v.a)({},pt),{},{fontWeight:"medium",bg:O?"invalid":"background"})})}):Object(k.jsx)(ut,{labelId:"".concat(n,"-label"),label:t,unit:r,children:Object(k.jsx)(ct,{sx:Object(v.a)(Object(v.a)({},pt),{},{bg:O?"invalid":"background"}),labelledBy:"".concat(n,"-label"),onClick:function(){return T(n)},inputId:n,amount:i,unit:r,color:s,pendingAmount:o,pendingColor:l,invalid:O,children:b&&Object(k.jsx)(u.b,{sx:{fontSize:1,p:1,px:3},onClick:function(e){y(b),e.stopPropagation()},disabled:f,children:"max"})})})},mt=function(){return Object(k.jsx)(u.e,{variant:"disabledOverlay",sx:{p:"14px",display:"flex",justifyContent:"flex-end"},children:Object(k.jsx)(u.n,{size:"28px",sx:{color:"text"}})})},ht=function(e){var t,n,a,r,i,s=e.value,o=e.change,l=new Me.Percent(null!==s&&void 0!==s?s:{toString:function(){return"N/A"}}),c=o&&new Me.Percent(o);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(u.f,{children:[Object(k.jsx)(u.a,{sx:{mt:[2,0],ml:3,mr:-2,fontSize:"24px"},children:Object(k.jsx)(F,{name:"heartbeat"})}),Object(k.jsx)(yt,{label:"Collateral ratio",inputId:"trove-collateral-ratio",amount:l.prettify(),color:(null===s||void 0===s?void 0:s.gt(Me.CRITICAL_COLLATERAL_RATIO))?"success":(null===s||void 0===s?void 0:s.gt(1.2))?"warning":(null===s||void 0===s?void 0:s.lte(1.2))?"danger":"muted",pendingAmount:(null===o||void 0===o||null===(t=o.positive)||void 0===t||null===(n=t.absoluteValue)||void 0===n?void 0:n.gt(10))?"++":(null===o||void 0===o||null===(a=o.negative)||void 0===a||null===(r=a.absoluteValue)||void 0===r?void 0:r.gt(10))?"--":null===c||void 0===c||null===(i=c.nonZeroish(2))||void 0===i?void 0:i.prettify(),pendingColor:(null===o||void 0===o?void 0:o.positive)?"success":"danger",infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{width:"220px"},children:"The ratio between the dollar value of the collateral and the debt (in ZUSD) you are depositing. While the Minimum Collateral Ratio is 110% during normal operation, it is recommended to keep the Collateral Ratio always above 150% to avoid liquidation under Recovery Mode. A Collateral Ratio above 200% or 250% is recommended for additional safety."})})})]}),(null===s||void 0===s?void 0:s.lt(1.5))&&Object(k.jsx)(st,{children:"Keeping your CR above 150% can help avoid liquidation under Recovery Mode."})]})},vt=function(e){var t=e.checked,n=e.onChange;return Object(k.jsxs)(u.j,{sx:{display:"flex"},children:[Object(k.jsx)(u.d,{checked:t,onChange:n}),"Use Nue token"]})},Tt=function(e){return{price:e.price}},jt=function(e){var t=e.children,n=e.original,a=e.edited,r=e.fee,i=e.useNueToken,s=e.handleSetNueToken,o=e.borrowedToken,l=e.borrowingRate,c=e.changePending,d=Object(Ze.useLiquitySelector)(Tt).price,p=new Me.Percent(l),y=n.isEmpty?void 0:n.collateralRatio(d),b=a.isEmpty?void 0:a.collateralRatio(d),f=Me.Difference.between(b,y);return Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Trove"}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(yt,{label:"Collateral",inputId:"trove-collateral",amount:a.collateral.prettify(4),unit:"RBTC"}),Object(k.jsx)(vt,{checked:i,onChange:s}),Object(k.jsx)(yt,{label:"Debt",inputId:"trove-debt",amount:a.debt.prettify(),unit:o}),n.isEmpty&&Object(k.jsx)(yt,{label:"Liquidation Reserve",inputId:"trove-liquidation-reserve",amount:"".concat(Me.ZUSD_LIQUIDATION_RESERVE),unit:o,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{width:"200px"},children:"An amount set aside to cover the liquidator\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt."})})}),Object(k.jsx)(yt,{label:"Borrowing Fee",inputId:"trove-borrowing-fee",amount:r.toString(2),pendingAmount:p.toString(2),unit:o,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{width:"240px"},children:"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free."})})}),Object(k.jsx)(ht,{value:b,change:f}),t]}),c&&Object(k.jsx)(mt,{})]})},gt=function(e){var t=e.children,n=e.transactionId,r=e.change,i=e.useNueToken,s=e.maxBorrowingRate,o=R().liquity,l=Object(a.useMemo)((function(){var e;switch(r.type){case"creation":e=i?o.send.openNueTrove.bind(o.send,r.params,s):o.send.openTrove.bind(o.send,r.params,s);break;case"closure":e=i?o.send.closeNueTrove.bind(o.send):o.send.closeTrove.bind(o.send);break;case"adjustment":e=i?o.send.adjustNueTrove.bind(o.send,r.params,s):o.send.adjustTrove.bind(o.send,r.params,s)}return e}),[r.params,r.type,o.send,s,i]),c=oe(n,l),d=Object(p.a)(c,1)[0];return Object(k.jsx)(u.b,{onClick:d,children:t})},Ot=Object(a.createContext)(null),xt=function(){var e=Object(a.useContext)(Ot);if(null===e)throw new Error("You must add a <TroveViewProvider> into the React tree");return e},wt=function(e){var t=e.children;return Object(k.jsx)(u.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",mb:[2,3],p:3,border:1,borderRadius:"8px",borderColor:"danger",boxShadow:2,bg:"rgba(220, 44, 16, 0.05)"},children:Object(k.jsxs)(u.f,{sx:{alignItems:"center"},children:[Object(k.jsx)(F,{name:"exclamation-triangle",size:"lg"}),Object(k.jsx)(u.o,{sx:{ml:2},children:t})]})})},_t=new Me.Percent(Me.MINIMUM_COLLATERAL_RATIO).toString(0),St=new Me.Percent(Me.CRITICAL_COLLATERAL_RATIO).toString(0),kt=function(e){var t=e.params,n=e.useNueBalance;return Object(k.jsxs)(st,{children:[t.depositCollateral&&t.borrowZUSD?Object(k.jsxs)(k.Fragment,{children:["You will deposit ",Object(k.jsxs)(ot,{children:[t.depositCollateral.prettify()," RBTC"]})," and receive"," ",Object(k.jsxs)(ot,{children:[t.borrowZUSD.prettify()," ",n?Fe:Ue]})]}):t.repayZUSD&&t.withdrawCollateral?Object(k.jsxs)(k.Fragment,{children:["You will pay"," ",Object(k.jsxs)(ot,{children:[t.repayZUSD.prettify()," ",n?Fe:Ue]})," ","and receive ",Object(k.jsxs)(ot,{children:[t.withdrawCollateral.prettify()," RBTC"]})]}):t.depositCollateral&&t.repayZUSD?Object(k.jsxs)(k.Fragment,{children:["You will deposit ",Object(k.jsxs)(ot,{children:[t.depositCollateral.prettify()," RBTC"]})," and pay"," ",Object(k.jsxs)(ot,{children:[t.repayZUSD.prettify()," ",n?Fe:Ue]})]}):t.borrowZUSD&&t.withdrawCollateral?Object(k.jsxs)(k.Fragment,{children:["You will receive ",Object(k.jsxs)(ot,{children:[t.withdrawCollateral.prettify()," RBTC"]})," and"," ",Object(k.jsxs)(ot,{children:[t.borrowZUSD.prettify()," ",n?Fe:Ue]})]}):t.depositCollateral?Object(k.jsxs)(k.Fragment,{children:["You will deposit ",Object(k.jsxs)(ot,{children:[t.depositCollateral.prettify()," RBTC"]})]}):t.withdrawCollateral?Object(k.jsxs)(k.Fragment,{children:["You will receive ",Object(k.jsxs)(ot,{children:[t.withdrawCollateral.prettify()," RBTC"]})]}):t.borrowZUSD?Object(k.jsxs)(k.Fragment,{children:["You will receive"," ",Object(k.jsxs)(ot,{children:[t.borrowZUSD.prettify()," ",n?Fe:Ue]})]}):Object(k.jsxs)(k.Fragment,{children:["You will pay"," ",Object(k.jsxs)(ot,{children:[t.repayZUSD.prettify()," ",n?Fe:Ue]})]}),"."]})},Et=function(e){return{price:e.price,total:e.total,accountBalance:e.accountBalance,zusdBalance:e.zusdBalance,nueBalance:e.nueBalance,numberOfTroves:e.numberOfTroves}},Dt=function(e,t,n,a,r){var i=r.total,s=r.price,o=e.whatChanged(t,n);if(!o)return[void 0,void 0];var u=e.apply(o,n),l=i.collateralRatioIsBelowCritical(s),c=i.subtract(e).add(u).collateralRatioIsBelowCritical(s),d=Object(v.a)(Object(v.a)({},r),{},{originalTrove:e,resultingTrove:u,recoveryMode:l,wouldTriggerRecoveryMode:c});if("invalidCreation"===o.type)return[void 0,Object(k.jsxs)(wt,{children:["Total debt must be at least"," ",Object(k.jsxs)(ot,{children:[Me.ZUSD_MINIMUM_DEBT.toString()," ",Ue]}),"."]})];var p="creation"===o.type?Ct(o.params,d):"closure"===o.type?Mt(a,o.params,d):Rt(a,o.params,d);return p?[void 0,p]:[o,Object(k.jsx)(kt,{params:o.params,useNueBalance:a})]},Ct=function(e,t){var n=e.depositCollateral,a=t.resultingTrove,r=t.recoveryMode,i=t.wouldTriggerRecoveryMode,s=t.accountBalance,o=t.price;if(a.debt.lt(Me.ZUSD_MINIMUM_DEBT))return Object(k.jsxs)(wt,{children:["Total debt must be at least"," ",Object(k.jsxs)(ot,{children:[Me.ZUSD_MINIMUM_DEBT.toString()," ",Ue]}),"."]});if(r){if(!a.isOpenableInRecoveryMode(o))return Object(k.jsxs)(wt,{children:["You're not allowed to open a Trove with less than ",Object(k.jsx)(ot,{children:St})," Collateral Ratio during recovery mode. Please increase your Trove's Collateral Ratio."]})}else{if(a.collateralRatioIsBelowMinimum(o))return Object(k.jsxs)(wt,{children:["Collateral ratio must be at least ",Object(k.jsx)(ot,{children:_t}),"."]});if(i)return Object(k.jsxs)(wt,{children:["You're not allowed to open a Trove that would cause the Total Collateral Ratio to fall below ",Object(k.jsx)(ot,{children:St}),". Please increase your Trove's Collateral Ratio."]})}return n.gt(s)?Object(k.jsxs)(wt,{children:["The amount you're trying to deposit exceeds your balance by"," ",Object(k.jsxs)(ot,{children:[n.sub(s).prettify()," RBTC"]}),"."]}):null},Rt=function(e,t,n){var a=t.depositCollateral,r=t.withdrawCollateral,i=t.borrowZUSD,s=t.repayZUSD,o=n.originalTrove,u=n.resultingTrove,l=n.recoveryMode,c=n.wouldTriggerRecoveryMode,d=n.price,p=n.accountBalance,y=n.zusdBalance,b=n.nueBalance;if(l){if(r)return Object(k.jsx)(wt,{children:"You're not allowed to withdraw collateral during recovery mode."});if(i){if(u.collateralRatioIsBelowCritical(d))return Object(k.jsxs)(wt,{children:["Your collateral ratio must be at least ",Object(k.jsx)(ot,{children:St})," to borrow during recovery mode. Please improve your collateral ratio."]});if(u.collateralRatio(d).lt(o.collateralRatio(d)))return Object(k.jsx)(wt,{children:"You're not allowed to decrease your collateral ratio during recovery mode."})}}else{if(u.collateralRatioIsBelowMinimum(d))return Object(k.jsxs)(wt,{children:["Collateral ratio must be at least ",Object(k.jsx)(ot,{children:_t}),"."]});if(c)return Object(k.jsxs)(wt,{children:["The adjustment you're trying to make would cause the Total Collateral Ratio to fall below"," ",Object(k.jsx)(ot,{children:St}),". Please increase your Trove's Collateral Ratio."]})}if(s){if(u.debt.lt(Me.ZUSD_MINIMUM_DEBT))return Object(k.jsxs)(wt,{children:["Total debt must be at least"," ",Object(k.jsxs)(ot,{children:[Me.ZUSD_MINIMUM_DEBT.toString()," ",e?Fe:Ue]}),"."]});var f=e?b:y;if(null===s||void 0===s?void 0:s.gt(f))return Object(k.jsxs)(wt,{children:["The amount you're trying to repay exceeds your balance by"," ",Object(k.jsxs)(ot,{children:[s.sub(f).prettify()," ",e?Fe:Ue]}),"."]})}return(null===a||void 0===a?void 0:a.gt(p))?Object(k.jsxs)(wt,{children:["The amount you're trying to deposit exceeds your balance by"," ",Object(k.jsxs)(ot,{children:[a.sub(p).prettify()," RBTC"]}),"."]}):null},Mt=function(e,t,n){var a=t.repayZUSD,r=n.recoveryMode,i=n.wouldTriggerRecoveryMode,s=n.numberOfTroves,o=n.nueBalance,u=n.zusdBalance;if(1===s)return Object(k.jsx)(wt,{children:"You're not allowed to close your Trove when there are no other Troves in the system."});if(r)return Object(k.jsx)(wt,{children:"You're not allowed to close your Trove during recovery mode."});var l=e?o:u;return(null===a||void 0===a?void 0:a.gt(l))?Object(k.jsxs)(wt,{children:["You need"," ",Object(k.jsxs)(ot,{children:[a.sub(l).prettify()," ",e?Fe:Ue]})," ","more to close your Trove."]}):i?Object(k.jsxs)(wt,{children:["You're not allowed to close a Trove if it would cause the Total Collateralization Ratio to fall below ",Object(k.jsx)(ot,{children:St}),". Please wait until the Total Collateral Ratio increases."]}):null},At=function(){var e=Object(a.useState)(!0),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(a.useMemo)((function(){return n?Fe:Ue}),[n]),s=Object(a.useCallback)((function(){r(!n)}),[n]);return{useNueToken:n,borrowedToken:i,handleSetNueToken:s}},Pt=function(e){var t=e.trove;return{original:t,edited:new Me.Trove(t.collateral,t.debt),changePending:!1,debtDirty:!1,addedMinimumDebt:!1}},It=function(e){return function(t){return Nt(t,e)}},Zt=It({type:"addMinimumDebt"}),Ut=It({type:"removeMinimumDebt"}),Bt=It({type:"finishChange"}),Ft=It({type:"revert"}),Nt=function(e,t){var n=e.original,a=e.edited,r=e.changePending,i=e.debtDirty,s=e.addedMinimumDebt;switch(t.type){case"startChange":return console.log("starting change"),Object(v.a)(Object(v.a)({},e),{},{changePending:!0});case"finishChange":return Object(v.a)(Object(v.a)({},e),{},{changePending:!1});case"setCollateral":var o=Me.Decimal.from(t.newValue),u=Object(v.a)(Object(v.a)({},e),{},{edited:a.setCollateral(o)});if(!i){if(a.isEmpty&&o.nonZero)return Zt(u);if(s&&o.isZero)return Ut(u)}return u;case"setDebt":return Object(v.a)(Object(v.a)({},e),{},{edited:a.setDebt(t.newValue),debtDirty:!0});case"addMinimumDebt":return Object(v.a)(Object(v.a)({},e),{},{edited:a.setDebt(Me.ZUSD_MINIMUM_DEBT),addedMinimumDebt:!0});case"removeMinimumDebt":return Object(v.a)(Object(v.a)({},e),{},{edited:a.setDebt(0),addedMinimumDebt:!1});case"revert":return Object(v.a)(Object(v.a)({},e),{},{edited:new Me.Trove(n.collateral,n.debt),debtDirty:!1,addedMinimumDebt:!1});case"updateStore":var l=t.newState.trove,c=t.stateChange.troveBeforeRedistribution,d=Object(v.a)(Object(v.a)({},e),{},{original:l});if(r&&c)return Bt(Ft(d));var p=n.whatChanged(a,0);return"creation"===(null===p||void 0===p?void 0:p.type)&&!l.isEmpty||"closure"===(null===p||void 0===p?void 0:p.type)&&l.isEmpty?Ft(d):Object(v.a)(Object(v.a)({},d),{},{edited:l.apply(p,0)})}},Lt=function(e,t,n){var a=e.whatChanged(t,n);return a&&"invalidCreation"!==a.type&&a.params.borrowZUSD?a.params.borrowZUSD.mul(n):Me.Decimal.ZERO},zt=function(e){return{fees:e.fees,validationContext:Et(e)}},qt="trove-",Ht=new RegExp("^".concat(qt)),Wt=function(e){var t=e.collateral,n=e.debt,r=Object(Ze.useLiquityReducer)(Nt,Pt),i=Object(p.a)(r,2),s=i[0],o=s.original,l=s.edited,c=s.changePending,d=i[1],y=Object(Ze.useLiquitySelector)(zt),b=y.fees,f=y.validationContext,m=At(),h=m.borrowedToken,v=m.handleSetNueToken,T=m.useNueToken;Object(a.useEffect)((function(){void 0!==t&&d({type:"setCollateral",newValue:t}),void 0!==n&&d({type:"setDebt",newValue:n})}),[t,n,d]);var j=b.borrowingRate(),g=j.add(.005),O=Dt(o,l,j,T,f),x=Object(p.a)(O,2),w=x[0],_=x[1],S=xt().dispatchEvent,E=Object(a.useCallback)((function(){S("CANCEL_ADJUST_TROVE_PRESSED")}),[S]),D=o.isEmpty,C=se(Ht);return Object(a.useEffect)((function(){"waitingForApproval"===C.type||"waitingForConfirmation"===C.type?d({type:"startChange"}):"failed"===C.type||"cancelled"===C.type?d({type:"finishChange"}):"confirmedOneShot"===C.type&&(C.id==="".concat(qt,"closure")?S("TROVE_CLOSED"):S("TROVE_ADJUSTED"))}),[C,d,S]),Object(k.jsxs)(jt,{original:o,edited:l,fee:Lt(o,l,j),borrowingRate:j,changePending:c,borrowedToken:h,useNueToken:T,handleSetNueToken:v,dispatch:d,children:[null!==_&&void 0!==_?_:D?Object(k.jsx)(st,{children:"Start by entering the amount of RBTC you'd like to deposit as collateral."}):Object(k.jsx)(st,{children:"Adjust your Trove by modifying its collateral, debt, or both."}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[Object(k.jsx)(u.b,{variant:"cancel",onClick:E,children:"Cancel"}),w?Object(k.jsx)(gt,{transactionId:"".concat(qt).concat(w.type),change:w,useNueToken:T,maxBorrowingRate:g,children:"Confirm"}):Object(k.jsx)(u.b,{disabled:!0,children:"Confirm"})]})]})},Gt=function(e){return{trove:e.trove,price:e.price}},Vt=function(){var e=xt().dispatchEvent,t=Object(a.useCallback)((function(){e("ADJUST_TROVE_PRESSED")}),[e]),n=Object(a.useCallback)((function(){e("CLOSE_TROVE_PRESSED")}),[e]),r=Object(Ze.useLiquitySelector)(Gt),i=r.trove,s=r.price;return Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Trove"}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsxs)(u.a,{children:[Object(k.jsx)(bt,{label:"Collateral",inputId:"trove-collateral",amount:i.collateral.prettify(4),unit:"RBTC"}),Object(k.jsx)(bt,{label:"Debt",inputId:"trove-debt",amount:i.debt.prettify(),unit:Ue}),Object(k.jsx)(ht,{value:i.collateralRatio(s)})]}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[Object(k.jsx)(u.b,{variant:"outline",onClick:n,children:"Close Trove"}),Object(k.jsxs)(u.b,{onClick:t,children:[Object(k.jsx)(F,{name:"pen",size:"sm"}),"\xa0Adjust"]})]})]})]})},Yt=function(e){var t=e.title,n=e.children,a=e.icon;return Object(k.jsxs)(u.a,{sx:{mx:1,mb:3},children:[Object(k.jsxs)(u.f,{sx:{alignItems:"center",mb:"10px"},children:[Object(k.jsx)(u.a,{sx:{mr:"12px",fontSize:"20px"},children:a||Object(k.jsx)(F,{name:"info-circle"})}),Object(k.jsx)(u.g,{as:"h3",children:t})]}),Object(k.jsx)(u.o,{sx:{fontSize:2},children:n})]})},Jt=function(e){var t=xt().dispatchEvent,n=Object(a.useCallback)((function(){t("OPEN_TROVE_PRESSED")}),[t]);return Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Trove"}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(Yt,{title:"You haven't borrowed any ZUSD yet.",children:"You can borrow ZUSD by opening a Trove."}),Object(k.jsx)(u.f,{variant:"layout.actions",children:Object(k.jsx)(u.b,{onClick:n,children:"Open Trove"})})]})]})},Qt=function(e){return{fees:e.fees,price:e.price,accountBalance:e.accountBalance,validationContext:Et(e)}},Kt=new Me.Trove(Me.Decimal.ZERO,Me.Decimal.ZERO),$t="trove-creation",Xt=Me.Decimal.from(.1),en=function(){var e=xt().dispatchEvent,t=Object(Ze.useLiquitySelector)(Qt),n=t.fees,r=t.price,i=t.accountBalance,s=t.validationContext,o=n.borrowingRate(),l=Object(a.useState)(),c=At(),d=c.borrowedToken,y=c.handleSetNueToken,b=c.useNueToken,f=Object(a.useState)(Me.Decimal.ZERO),m=Object(p.a)(f,2),h=m[0],v=m[1],T=Object(a.useState)(Me.Decimal.ZERO),j=Object(p.a)(T,2),g=j[0],O=j[1],x=o.add(.005),w=g.mul(o),_=new Me.Percent(o),S=g.add(Me.ZUSD_LIQUIDATION_RESERVE).add(w),E=!h.isZero||!g.isZero,D=E?new Me.Trove(h,S):Kt,C=i.gt(Xt)?i.sub(Xt):Me.Decimal.ZERO,R=h.add(C),M=h.eq(R),A=h.isZero||g.isZero?void 0:D.collateralRatio(r),P=Dt(Kt,D,o,b,s),I=Object(p.a)(P,2),Z=I[0],U=I[1],B=se($t),N="waitingForApproval"===B.type||"waitingForConfirmation"===B.type,L=Object(a.useCallback)((function(){e("CANCEL_ADJUST_TROVE_PRESSED")}),[e]),z=Object(a.useCallback)((function(){v(Me.Decimal.ZERO),O(Me.Decimal.ZERO)}),[]);return Object(a.useEffect)((function(){!h.isZero&&g.isZero&&O(Me.ZUSD_MINIMUM_NET_DEBT)}),[h,g]),Object(k.jsxs)(u.c,{children:[Object(k.jsxs)(u.g,{children:["Trove",E&&!N&&Object(k.jsx)(u.b,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:z,children:Object(k.jsx)(F,{name:"history",size:"lg"})})]}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(ft,{label:"Collateral",inputId:"trove-collateral",amount:h.prettify(4),maxAmount:R.toString(),maxedOut:M,editingState:l,unit:"RBTC",editedAmount:h.toString(4),setEditedAmount:function(e){return v(Me.Decimal.from(e))}}),Object(k.jsx)(vt,{checked:b,onChange:y}),Object(k.jsx)(ft,{label:"Borrow",inputId:"trove-borrow-amount",amount:g.prettify(),unit:d,editingState:l,editedAmount:g.toString(2),setEditedAmount:function(e){return O(Me.Decimal.from(e))}}),Object(k.jsx)(yt,{label:"Liquidation Reserve",inputId:"trove-liquidation-reserve",amount:"".concat(Me.ZUSD_LIQUIDATION_RESERVE),unit:d,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{width:"200px"},children:"An amount set aside to cover the liquidator\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt."})})}),Object(k.jsx)(yt,{label:"Borrowing Fee",inputId:"trove-borrowing-fee",amount:w.prettify(2),pendingAmount:_.toString(2),unit:d,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{width:"240px"},children:"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free."})})}),Object(k.jsx)(yt,{label:"Total debt",inputId:"trove-total-debt",amount:S.prettify(2),unit:d,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsxs)(u.c,{variant:"tooltip",sx:{width:"240px"},children:["The total amount of ",d," your Trove will hold."," ",E&&Object(k.jsxs)(k.Fragment,{children:["You will need to repay ",S.sub(Me.ZUSD_LIQUIDATION_RESERVE).prettify(2)," ",d," to reclaim your collateral (",Me.ZUSD_LIQUIDATION_RESERVE.toString()," ZUSD Liquidation Reserve excluded)."]})]})})}),Object(k.jsx)(ht,{value:A}),null!==U&&void 0!==U?U:Object(k.jsx)(st,{children:"Start by entering the amount of RBTC you'd like to deposit as collateral."}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[Object(k.jsx)(u.b,{variant:"cancel",onClick:L,children:"Cancel"}),Z?Object(k.jsx)(gt,{transactionId:$t,change:Z,useNueToken:b,maxBorrowingRate:x,children:"Confirm"}):Object(k.jsx)(u.b,{disabled:!0,children:"Confirm"})]})]}),N&&Object(k.jsx)(mt,{})]})},tn=function(e){return{trove:e.trove,fees:e.fees,price:e.price,accountBalance:e.accountBalance,validationContext:Et(e)}},nn="trove-adjustment",an=Me.Decimal.from(.1),rn=function(){var e=xt().dispatchEvent,t=Object(Ze.useLiquitySelector)(tn),n=t.trove,r=t.fees,i=t.price,s=t.accountBalance,o=t.validationContext,l=Object(a.useState)(),c=Object(a.useRef)(n),d=Object(a.useState)(n.collateral),y=Object(p.a)(d,2),b=y[0],f=y[1],m=Object(a.useState)(n.netDebt),h=Object(p.a)(m,2),v=h[0],T=h[1],j=At(),g=j.borrowedToken,O=j.handleSetNueToken,x=j.useNueToken,w=se(nn),_=r.borrowingRate();Object(a.useEffect)((function(){"confirmedOneShot"===w.type&&e("TROVE_ADJUSTED")}),[w.type,e]),Object(a.useEffect)((function(){if(!c.current.collateral.eq(n.collateral)){var e=function(e,t){return e.absoluteValue?e.positive?t.collateral.add(e.absoluteValue):e.negative&&e.absoluteValue.lt(t.collateral)?t.collateral.sub(e.absoluteValue):t.collateral:t.collateral}(Me.Difference.between(b,c.current.collateral),n);f(e)}if(!c.current.netDebt.eq(n.netDebt)){var t=function(e,t){return e.absoluteValue?e.positive?t.netDebt.add(e.absoluteValue):e.negative&&e.absoluteValue.lt(t.netDebt)?t.netDebt.sub(e.absoluteValue):t.netDebt:t.netDebt}(Me.Difference.between(v,c.current.netDebt),n);T(t)}c.current=n}),[n,b,v]);var S=Object(a.useCallback)((function(){e("CANCEL_ADJUST_TROVE_PRESSED")}),[e]),E=Object(a.useCallback)((function(){f(n.collateral),T(n.netDebt)}),[n.collateral,n.netDebt]);if("open"!==n.status)return null;var D=!b.eq(n.collateral)||!v.eq(n.netDebt),C=v.gt(n.netDebt),R=C?v.sub(n.netDebt):Me.Decimal.ZERO,M=C?function(e,t,n){var a=e.whatChanged(t,n);return a&&"invalidCreation"!==a.type&&a.params.borrowZUSD?a.params.borrowZUSD.mul(n):Me.Decimal.ZERO}(n,new Me.Trove(n.collateral,n.debt.add(R)),_):Me.Decimal.ZERO,A=v.add(Me.ZUSD_LIQUIDATION_RESERVE).add(M),P=_.add(.005),I=D?new Me.Trove(b,A):n,Z=new Me.Percent(_),U=s.gt(an)?s.sub(an):Me.Decimal.ZERO,B=b.add(U),N=b.eq(B),L=b.isZero||v.isZero?void 0:I.collateralRatio(i),z=Me.Difference.between(L,n.collateralRatio(i)),q=Dt(n,I,_,x,o),H=Object(p.a)(q,2),W=H[0],G=H[1],V="waitingForApproval"===w.type||"waitingForConfirmation"===w.type;return Object(k.jsxs)(u.c,{children:[Object(k.jsxs)(u.g,{children:["Trove",D&&!V&&Object(k.jsx)(u.b,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:E,children:Object(k.jsx)(F,{name:"history",size:"lg"})})]}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(ft,{label:"Collateral",inputId:"trove-collateral",amount:b.prettify(4),maxAmount:B.toString(),maxedOut:N,editingState:l,unit:"RBTC",editedAmount:b.toString(4),setEditedAmount:function(e){return f(Me.Decimal.from(e))}}),Object(k.jsx)(vt,{checked:x,onChange:O}),Object(k.jsx)(ft,{label:"Net debt",inputId:"trove-net-debt-amount",amount:v.prettify(),unit:g,editingState:l,editedAmount:v.toString(2),setEditedAmount:function(e){return T(Me.Decimal.from(e))}}),Object(k.jsx)(yt,{label:"Liquidation Reserve",inputId:"trove-liquidation-reserve",amount:"".concat(Me.ZUSD_LIQUIDATION_RESERVE),unit:g,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{width:"200px"},children:"An amount set aside to cover the liquidator\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt."})})}),Object(k.jsx)(yt,{label:"Borrowing Fee",inputId:"trove-borrowing-fee",amount:M.prettify(2),pendingAmount:Z.toString(2),unit:g,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{width:"240px"},children:"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free."})})}),Object(k.jsx)(yt,{label:"Total debt",inputId:"trove-total-debt",amount:A.prettify(2),unit:g,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsxs)(u.c,{variant:"tooltip",sx:{width:"240px"},children:["The total amount of ZUSD your Trove will hold."," ",D&&Object(k.jsxs)(k.Fragment,{children:["You will need to repay ",A.sub(Me.ZUSD_LIQUIDATION_RESERVE).prettify(2)," ","ZUSD to reclaim your collateral (",Me.ZUSD_LIQUIDATION_RESERVE.toString()," ZUSD Liquidation Reserve excluded)."]})]})})}),Object(k.jsx)(ht,{value:L,change:z}),null!==G&&void 0!==G?G:Object(k.jsx)(st,{children:"Adjust your Trove by modifying its collateral, debt, or both."}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[Object(k.jsx)(u.b,{variant:"cancel",onClick:S,children:"Cancel"}),W?Object(k.jsx)(gt,{transactionId:nn,change:W,useNueToken:x,maxBorrowingRate:P,children:"Confirm"}):Object(k.jsx)(u.b,{disabled:!0,children:"Confirm"})]})]}),V&&Object(k.jsx)(mt,{})]})},sn=function(e){return{collateralSurplusBalance:e.collateralSurplusBalance}},on=function(){var e=Object(Ze.useLiquitySelector)(sn).collateralSurplusBalance,t=R().liquity.send,n="claim-coll-surplus",r=se(n),i=xt().dispatchEvent;return Object(a.useEffect)((function(){"confirmedOneShot"===r.type&&i("TROVE_SURPLUS_COLLATERAL_CLAIMED")}),[r.type,i]),"waitingForApproval"===r.type?Object(k.jsx)(u.f,{variant:"layout.actions",children:Object(k.jsxs)(u.b,{disabled:!0,sx:{mx:2},children:[Object(k.jsx)(u.n,{sx:{mr:2,color:"white"},size:"20px"}),"Waiting for your approval"]})}):"waitingForConfirmation"!==r.type&&"confirmed"!==r.type?Object(k.jsx)(u.f,{variant:"layout.actions",children:Object(k.jsx)(ue,{id:n,send:t.claimCollateralSurplus.bind(t,void 0),children:Object(k.jsxs)(u.b,{sx:{mx:2},children:["Claim ",e.prettify()," ETH"]})})}):null},un=function(e){return{hasSurplusCollateral:!e.collateralSurplusBalance.isZero}},ln=function(){var e=Object(Ze.useLiquitySelector)(un).hasSurplusCollateral,t=xt().dispatchEvent,n=Object(a.useCallback)((function(){t("OPEN_TROVE_PRESSED")}),[t]);return Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Trove"}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(Yt,{title:"Your Trove has been redeemed.",children:e?"Please reclaim your remaining collateral before opening a new Trove.":"You can borrow ZUSD by opening a Trove."}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[e&&Object(k.jsx)(on,{}),!e&&Object(k.jsx)(u.b,{onClick:n,children:"Open Trove"})]})]})]})},cn=function(e){return{hasSurplusCollateral:!e.collateralSurplusBalance.isZero}},dn=function(){var e=Object(Ze.useLiquitySelector)(cn).hasSurplusCollateral,t=xt().dispatchEvent,n=Object(a.useCallback)((function(){t("OPEN_TROVE_PRESSED")}),[t]);return Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Trove"}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(Yt,{title:"Your Trove has been liquidated.",children:e?"Please reclaim your remaining collateral before opening a new Trove.":"You can borrow ZUSD by opening a Trove."}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[e&&Object(k.jsx)(on,{}),!e&&Object(k.jsx)(u.b,{onClick:n,children:"Open Trove"})]})]})]})},pn=function(e){switch(xt().view){case"ACTIVE":return Object(k.jsx)(Vt,Object(v.a)({},e));case"ADJUSTING":return Object(k.jsx)(rn,Object(v.a)({},e));case"CLOSING":return Object(k.jsx)(Wt,Object(v.a)(Object(v.a)({},e),{},{collateral:Me.Decimal.ZERO,debt:Me.Decimal.ZERO}));case"OPENING":return Object(k.jsx)(en,Object(v.a)({},e));case"LIQUIDATED":return Object(k.jsx)(dn,Object(v.a)({},e));case"REDEEMED":return Object(k.jsx)(ln,Object(v.a)({},e));case"NONE":return Object(k.jsx)(Jt,Object(v.a)({},e))}},yn=function(e){return{zusdBalance:e.zusdBalance,zusdInStabilityPool:e.zusdInStabilityPool}},bn=function(e){var t=e.originalDeposit,n=e.editedZUSD,r=e.changePending,i=e.dispatch,s=e.children,o=Object(Ze.useLiquitySelector)(yn),l=o.zusdBalance,c=o.zusdInStabilityPool,d=Object(a.useState)(),p=!n.eq(t.currentZUSD),y=t.currentZUSD.add(l),b=n.eq(y),f=c.sub(t.currentZUSD).add(n),m=t.currentZUSD.mulDiv(100,c),h=n.mulDiv(100,f),v=t.currentZUSD.nonZero&&Me.Difference.between(h,m).nonZero;return Object(k.jsxs)(u.c,{children:[Object(k.jsxs)(u.g,{children:["Stability Pool",p&&!r&&Object(k.jsx)(u.b,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return i({type:"revert"})},children:Object(k.jsx)(F,{name:"history",size:"lg"})})]}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(ft,{label:"Deposit",inputId:"deposit-zero",amount:n.prettify(),maxAmount:y.toString(),maxedOut:b,unit:Ue,editingState:d,editedAmount:n.toString(2),setEditedAmount:function(e){return i({type:"setDeposit",newValue:e})}}),h.infinite?Object(k.jsx)(yt,{label:"Pool share",inputId:"deposit-share",amount:"N/A"}):Object(k.jsx)(yt,{label:"Pool share",inputId:"deposit-share",amount:h.prettify(4),pendingAmount:null===v||void 0===v?void 0:v.prettify(4).concat("%"),pendingColor:(null===v||void 0===v?void 0:v.positive)?"success":"danger",unit:"%"}),!t.isEmpty&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(yt,{label:"Liquidation gain",inputId:"deposit-gain",amount:t.collateralGain.prettify(4),color:t.collateralGain.nonZero&&"success",unit:"ETH"}),Object(k.jsx)(yt,{label:"Reward",inputId:"deposit-reward",amount:t.zeroReward.prettify(),color:t.zeroReward.nonZero&&"success",unit:Be,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{width:"240px"},children:"Although the ZERO rewards accrue every minute, the value on the UI only updates when a user transacts with the Stability Pool. Therefore you may receive more rewards than is displayed when you claim or adjust your deposit."})})})]}),s]}),r&&Object(k.jsx)(mt,{})]})},fn=function(e){return"registered"===e.frontend.status},mn=function(e){var t=e.children,n=e.transactionId,a=e.change,r=R(),i=r.config,s=r.liquity,o=Object(Ze.useLiquitySelector)(fn)?i.frontendTag:void 0,l=oe(n,a.depositZUSD?s.send.depositZUSDInStabilityPool.bind(s.send,a.depositZUSD,o):s.send.withdrawZUSDFromStabilityPool.bind(s.send,a.withdrawZUSD)),c=Object(p.a)(l,1)[0];return Object(k.jsx)(u.b,{onClick:c,children:t})},hn=Object(a.createContext)(null),vn=function(){var e=Object(a.useContext)(hn);if(null===e)throw new Error("You must add a <StabilityViewProvider> into the React tree");return e},Tn=function(e){var t,n,a=e.originalDeposit,r=e.change,i=null===(t=a.collateralGain.nonZero)||void 0===t?void 0:t.prettify(4).concat(" ETH"),s=null===(n=a.zeroReward.nonZero)||void 0===n?void 0:n.prettify().concat(" ",Be);return Object(k.jsxs)(st,{children:[r.depositZUSD?Object(k.jsxs)(k.Fragment,{children:["You are depositing"," ",Object(k.jsxs)(ot,{children:[r.depositZUSD.prettify()," ",Ue]})," ","in the Stability Pool"]}):Object(k.jsxs)(k.Fragment,{children:["You are withdrawing"," ",Object(k.jsxs)(ot,{children:[r.withdrawZUSD.prettify()," ",Ue]})," ","to your wallet"]}),(i||s)&&Object(k.jsxs)(k.Fragment,{children:[" ","and claiming at least"," ",i&&s?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ot,{children:i})," and ",Object(k.jsx)(ot,{children:s})]}):Object(k.jsx)(ot,{children:null!==i&&void 0!==i?i:s})]}),"."]})},jn=function(e){var t=e.trove,n=e.zusdBalance,a=e.ownFrontend,r=e.haveUndercollateralizedTroves;return{trove:t,zusdBalance:n,haveOwnFrontend:"registered"===a.status,haveUndercollateralizedTroves:r}},gn=function(e){var t=e.stabilityDeposit;return{originalDeposit:t,editedZUSD:t.currentZUSD,changePending:!1}},On=function(e){return function(t){return _n(t,e)}},xn=On({type:"finishChange"}),wn=On({type:"revert"}),_n=function(e,t){var n=e.originalDeposit,a=e.editedZUSD,r=e.changePending;switch(t.type){case"startChange":return console.log("changeStarted"),Object(v.a)(Object(v.a)({},e),{},{changePending:!0});case"finishChange":return Object(v.a)(Object(v.a)({},e),{},{changePending:!1});case"setDeposit":return Object(v.a)(Object(v.a)({},e),{},{editedZUSD:Me.Decimal.from(t.newValue)});case"revert":return Object(v.a)(Object(v.a)({},e),{},{editedZUSD:n.currentZUSD});case"updateStore":var i=t.stateChange.stabilityDeposit;if(!i)return e;var s=Object(v.a)(Object(v.a)({},e),{},{originalDeposit:i}),o=!i.initialZUSD.eq(n.initialZUSD)||i.currentZUSD.gt(n.currentZUSD)||i.collateralGain.lt(n.collateralGain)||i.zeroReward.lt(n.zeroReward);return r&&o?xn(wn(s)):Object(v.a)(Object(v.a)({},s),{},{editedZUSD:i.apply(n.whatChanged(a))})}},Sn="stability-deposit",kn=function(){var e=Object(Ze.useLiquityReducer)(_n,gn),t=Object(p.a)(e,2),n=t[0],r=n.originalDeposit,i=n.editedZUSD,s=n.changePending,o=t[1],l=Object(Ze.useLiquitySelector)(jn),c=vn().dispatchEvent,d=Object(a.useCallback)((function(){c("CANCEL_PRESSED")}),[c]),y=function(e,t,n){var a,r=n.zusdBalance,i=n.haveOwnFrontend,s=n.haveUndercollateralizedTroves,o=e.whatChanged(t);return i?[void 0,Object(k.jsx)(wt,{children:"You can\u2019t deposit using a wallet address that is registered as a frontend."})]:o?(null===(a=o.depositZUSD)||void 0===a?void 0:a.gt(r))?[void 0,Object(k.jsxs)(wt,{children:["The amount you're trying to deposit exceeds your balance by"," ",Object(k.jsxs)(ot,{children:[o.depositZUSD.sub(r).prettify()," ",Ue]}),"."]})]:o.withdrawZUSD&&s?[void 0,Object(k.jsx)(wt,{children:"You're not allowed to withdraw ZUSD from your Stability Deposit when there are undercollateralized Troves. Please liquidate those Troves or try again later."})]:[o,Object(k.jsx)(Tn,{originalDeposit:e,change:o})]:[void 0,void 0]}(r,i,l),b=Object(p.a)(y,2),f=b[0],m=b[1],h=r.isEmpty,v=se(Sn);return Object(a.useEffect)((function(){"waitingForApproval"===v.type||"waitingForConfirmation"===v.type?o({type:"startChange"}):"failed"===v.type||"cancelled"===v.type?o({type:"finishChange"}):"confirmedOneShot"===v.type&&c("DEPOSIT_CONFIRMED")}),[v.type,o,c]),Object(k.jsxs)(bn,{originalDeposit:r,editedZUSD:i,changePending:s,dispatch:o,children:[null!==m&&void 0!==m?m:h?Object(k.jsxs)(st,{children:["Enter the amount of ",Ue," you'd like to deposit."]}):Object(k.jsxs)(st,{children:["Adjust the ",Ue," amount to deposit or withdraw."]}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[Object(k.jsx)(u.b,{variant:"cancel",onClick:d,children:"Cancel"}),f?Object(k.jsx)(mn,{transactionId:Sn,change:f,children:"Confirm"}):Object(k.jsx)(u.b,{disabled:!0,children:"Confirm"})]})]})},En=function(e){var t=e.disabled,n=e.children,a=R().liquity,r=oe("stability-deposit",a.send.transferCollateralGainToTrove.bind(a.send)),i=Object(p.a)(r,1)[0];return Object(k.jsx)(u.b,{variant:"outline",sx:{mt:3,width:"100%"},onClick:i,disabled:t,children:n})},Dn=function(e){var t=e.disabled,n=e.children,a=R().liquity,r=oe("stability-deposit",a.send.withdrawGainsFromStabilityPool.bind(a.send)),i=Object(p.a)(r,1)[0];return Object(k.jsx)(u.b,{onClick:i,disabled:t,children:n})},Cn=function(e){return{remainingStabilityPoolZEROReward:e.remainingStabilityPoolZEROReward}},Rn=function(){var e=Object(Ze.useLiquitySelector)(Cn).remainingStabilityPoolZEROReward;return Object(k.jsxs)(u.f,{sx:{mr:2,fontSize:2,fontWeight:"medium"},children:[e.prettify(0)," ZERO remaining"]})},Mn=function(e){var t=e.children;return Object(k.jsx)(u.f,{variant:"layout.badge",children:t})},An=function(e){return'{\n  token(id: "'.concat(e.toLowerCase(),'") {\n    derivedETH\n  },\n  bundle(id: 1) {\n    ethPrice\n  },\n}')};function Pn(e){return In.apply(this,arguments)}function In(){return(In=Object(h.a)(m.a.mark((function e(t){var n,a,r,i,s,o,u,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:An(t),variables:null})});case 2:if((r=e.sent).ok){e.next=5;break}return e.abrupt("return",Promise.reject("Network error connecting to Uniswap subgraph"));case 5:return e.next=7,r.json();case 7:if(i=e.sent,s=i.data,!(o=i.errors)){e.next=12;break}return e.abrupt("return",Promise.reject(o));case 12:if("string"!==typeof(null===s||void 0===s||null===(n=s.token)||void 0===n?void 0:n.derivedETH)||"string"!==typeof(null===s||void 0===s||null===(a=s.bundle)||void 0===a?void 0:a.ethPrice)){e.next=16;break}return u=Me.Decimal.from(s.bundle.ethPrice),l=Me.Decimal.from(s.token.derivedETH).mul(u),e.abrupt("return",{zeroPriceUSD:l});case 16:return e.abrupt("return",Promise.reject("Uniswap doesn't have the required data to calculate yield"));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zn=function(e){return{zusdInStabilityPool:e.zusdInStabilityPool,remainingStabilityPoolZEROReward:e.remainingStabilityPoolZEROReward}},Un=function(){var e=R().liquity.connection.addresses,t=Object(Ze.useLiquitySelector)(Zn),n=t.zusdInStabilityPool,r=t.remainingStabilityPoolZEROReward,i=Object(a.useState)(void 0),s=Object(p.a)(i,2),o=s[0],l=s[1],c=r.isZero||n.isZero,d=e.zeroToken;if(Object(a.useEffect)((function(){Object(h.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pn(d);case 3:t=e.sent,n=t.zeroPriceUSD,l(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[d]),c||void 0===o)return null;var y=r.mul(.5).mul(o).div(n).mul(100),b=r.mul(o);return y.isZero?null:Object(k.jsxs)(Mn,{children:[Object(k.jsxs)(u.o,{children:["ZERO APR ",y.toString(2),"%"]}),Object(k.jsx)(He,{tooltip:Object(k.jsxs)(u.c,{variant:"tooltip",sx:{width:["220px","518px"]},children:[Object(k.jsxs)(u.m,{children:["An ",Object(k.jsx)(u.o,{sx:{fontWeight:"bold"},children:"estimate"})," of the ZERO return on the ZUSD deposited to the Stability Pool over the next year, not including your ETH gains from liquidations."]}),Object(k.jsxs)(u.m,{sx:{fontSize:"12px",fontFamily:"monospace",mt:2},children:["(($ZERO_REWARDS * YEARLY_DISTRIBUTION%) / DEPOSITED_ZUSD) * 100 ="," ",Object(k.jsx)(u.o,{sx:{fontWeight:"bold"},children:" APR"})]}),Object(k.jsxs)(u.m,{sx:{fontSize:"12px",fontFamily:"monospace"},children:["($",b.shorten()," * 50% / $",n.shorten(),") * 100 =",Object(k.jsxs)(u.o,{sx:{fontWeight:"bold"},children:[" ",y.toString(2),"%"]})]})]})})]})},Bn=function(e){return{stabilityDeposit:e.stabilityDeposit,trove:e.trove,zusdInStabilityPool:e.zusdInStabilityPool}},Fn=function(){var e=vn().dispatchEvent,t=Object(Ze.useLiquitySelector)(Bn),n=t.stabilityDeposit,r=t.trove,i=t.zusdInStabilityPool,s=n.currentZUSD.mulDiv(100,i),o=Object(a.useCallback)((function(){e("ADJUST_DEPOSIT_PRESSED")}),[e]),l=!n.zeroReward.isZero,c=!n.collateralGain.isZero,d=!r.isEmpty,p=se("stability-deposit"),y="waitingForApproval"===p.type||"waitingForConfirmation"===p.type;return Object(a.useEffect)((function(){"confirmedOneShot"===p.type&&e("REWARDS_CLAIMED")}),[p.type,e]),Object(k.jsxs)(u.c,{children:[Object(k.jsxs)(u.g,{children:["Stability Pool",!y&&Object(k.jsx)(u.f,{sx:{justifyContent:"flex-end"},children:Object(k.jsx)(Rn,{})})]}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsxs)(u.a,{children:[Object(k.jsx)(bt,{label:"Deposit",inputId:"deposit-zusd",amount:n.currentZUSD.prettify(),unit:Ue}),Object(k.jsx)(yt,{label:"Pool share",inputId:"deposit-share",amount:s.prettify(4),unit:"%"}),Object(k.jsx)(yt,{label:"Liquidation gain",inputId:"deposit-gain",amount:n.collateralGain.prettify(4),color:n.collateralGain.nonZero&&"success",unit:"ETH"}),Object(k.jsxs)(u.f,{sx:{alignItems:"center"},children:[Object(k.jsx)(yt,{label:"Reward",inputId:"deposit-reward",amount:n.zeroReward.prettify(),color:n.zeroReward.nonZero&&"success",unit:Be,infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{width:"240px"},children:"Although the ZERO rewards accrue every minute, the value on the UI only updates when a user transacts with the Stability Pool. Therefore you may receive more rewards than is displayed when you claim or adjust your deposit."})})}),Object(k.jsx)(u.f,{sx:{justifyContent:"flex-end",flex:1},children:Object(k.jsx)(Un,{})})]})]}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[Object(k.jsxs)(u.b,{variant:"outline",onClick:o,children:[Object(k.jsx)(F,{name:"pen",size:"sm"}),"\xa0Adjust"]}),Object(k.jsx)(Dn,{disabled:!c&&!l,children:"Claim ETH and ZERO"})]}),d&&Object(k.jsx)(En,{disabled:!c,children:"Claim ZERO and move ETH to Trove"})]}),y&&Object(k.jsx)(mt,{})]})},Nn=function(e){var t=vn().dispatchEvent,n=Object(a.useCallback)((function(){t("DEPOSIT_PRESSED")}),[t]);return Object(k.jsxs)(u.c,{children:[Object(k.jsxs)(u.g,{children:["Stability Pool",Object(k.jsx)(u.f,{sx:{justifyContent:"flex-end"},children:Object(k.jsx)(Rn,{})})]}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(Yt,{title:"You have no ZUSD in the Stability Pool.",children:"You can earn RBTC and ZERO rewards by depositing ZUSD."}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[Object(k.jsx)(u.f,{sx:{justifyContent:"flex-start",flex:1,alignItems:"center"},children:Object(k.jsx)(Un,{})}),Object(k.jsx)(u.b,{onClick:n,children:"Deposit"})]})]})]})},Ln=function(e){switch(vn().view){case"NONE":return Object(k.jsx)(Nn,Object(v.a)({},e));case"DEPOSITING":case"ADJUSTING":return Object(k.jsx)(kn,Object(v.a)({},e));case"ACTIVE":return Object(k.jsx)(Fn,Object(v.a)({},e))}},zn=function(e){return e.price},qn=function(){var e=R().liquity,t=e.send,n=e.connection._priceFeedIsTestnet,r=Object(Ze.useLiquitySelector)(zn),i=Object(a.useState)(r.toString(2)),s=Object(p.a)(i,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){l(r.toString(2))}),[r]),Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Price feed"}),Object(k.jsx)(u.a,{sx:{p:[2,3]},children:Object(k.jsxs)(u.f,{sx:{alignItems:"stretch"},children:[Object(k.jsx)(u.j,{children:"RBTC"}),Object(k.jsx)(u.j,{variant:"unit",children:"$"}),Object(k.jsx)(u.i,{type:n?"number":"text",step:"any",value:o,onChange:function(e){return l(e.target.value)},disabled:!n}),n&&Object(k.jsx)(u.f,{sx:{ml:2,alignItems:"center"},children:Object(k.jsx)(ue,{id:"set-price",tooltip:"Set",tooltipPlacement:"bottom",send:function(e){if(!o)throw new Error("Invalid price");return t.setPrice(Me.Decimal.from(o),e)},children:Object(k.jsx)(u.b,{variant:"icon",children:Object(k.jsx)(F,{name:"chart-line",size:"lg"})})})})]})})]})},Hn=Object(a.createContext)(null),Wn=function(){var e=Object(a.useContext)(Hn);if(null===e)throw new Error("You must add a <TroveViewProvider> into the React tree");return e},Gn=function(e){return e.zeroStake},Vn=function(){var e=R().liquity,t=Object(Ze.useLiquitySelector)(Gn),n=t.collateralGain,a=t.zusdGain,r=oe("stake",e.send.withdrawGainsFromStaking.bind(e.send)),i=Object(p.a)(r,1)[0];return Object(k.jsx)(u.b,{onClick:i,disabled:n.isZero&&a.isZero,children:"Claim gains"})},Yn=function(e){return{zeroStake:e.zeroStake,totalStakedZERO:e.totalStakedZERO}},Jn=function(){var e=Wn(),t=e.changePending,n=e.dispatch,a=Object(Ze.useLiquitySelector)(Yn),r=a.zeroStake,i=a.totalStakedZERO,s=r.stakedZERO.mulDiv(100,i);return Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Staking"}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(bt,{label:"Stake",inputId:"stake-zero",amount:r.stakedZERO.prettify(),unit:Be}),Object(k.jsx)(yt,{label:"Pool share",inputId:"stake-share",amount:s.prettify(4),unit:"%"}),Object(k.jsx)(yt,{label:"Redemption gain",inputId:"stake-gain-eth",amount:r.collateralGain.prettify(4),color:r.collateralGain.nonZero&&"success",unit:"ETH"}),Object(k.jsx)(yt,{label:"Issuance gain",inputId:"stake-gain-zusd",amount:r.zusdGain.prettify(),color:r.zusdGain.nonZero&&"success",unit:Ue}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[Object(k.jsxs)(u.b,{variant:"outline",onClick:function(){return n({type:"startAdjusting"})},children:[Object(k.jsx)(F,{name:"pen",size:"sm"}),"\xa0Adjust"]}),Object(k.jsx)(Vn,{})]})]}),t&&Object(k.jsx)(mt,{})]})},Qn=function(e){return{zeroBalance:e.zeroBalance,totalStakedZERO:e.totalStakedZERO}},Kn=function(e){var t=e.children,n=e.title,r=e.originalStake,i=e.editedZERO,s=e.dispatch,o=Object(Ze.useLiquitySelector)(Qn),l=o.zeroBalance,c=o.totalStakedZERO,d=Wn().changePending,p=Object(a.useState)(),y=!i.eq(r.stakedZERO),b=r.stakedZERO.add(l),f=i.eq(b),m=c.sub(r.stakedZERO).add(i),h=r.stakedZERO.mulDiv(100,c),v=i.mulDiv(100,m),T=r.stakedZERO.nonZero&&Me.Difference.between(v,h).nonZero;return Object(k.jsxs)(u.c,{children:[Object(k.jsxs)(u.g,{children:[n,y&&!d&&Object(k.jsx)(u.b,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return s({type:"revert"})},children:Object(k.jsx)(F,{name:"history",size:"lg"})})]}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(ft,{label:"Stake",inputId:"stake-zero",amount:i.prettify(),maxAmount:b.toString(),maxedOut:f,unit:Be,editingState:p,editedAmount:i.toString(2),setEditedAmount:function(e){return s({type:"setStake",newValue:e})}}),v.infinite?Object(k.jsx)(yt,{label:"Pool share",inputId:"stake-share",amount:"N/A"}):Object(k.jsx)(yt,{label:"Pool share",inputId:"stake-share",amount:v.prettify(4),pendingAmount:null===T||void 0===T?void 0:T.prettify(4).concat("%"),pendingColor:(null===T||void 0===T?void 0:T.positive)?"success":"danger",unit:"%"}),!r.isEmpty&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(yt,{label:"Redemption gain",inputId:"stake-gain-eth",amount:r.collateralGain.prettify(4),color:r.collateralGain.nonZero&&"success",unit:"ETH"}),Object(k.jsx)(yt,{label:"Issuance gain",inputId:"stake-gain-zusd",amount:r.zusdGain.prettify(),color:r.zusdGain.nonZero&&"success",unit:Ue})]}),t]}),d&&Object(k.jsx)(mt,{})]})},$n=function(e){var t=e.change,n=e.children,a=R().liquity,r=oe("stake",t.stakeZERO?a.send.stakeZERO.bind(a.send,t.stakeZERO):a.send.unstakeZERO.bind(a.send,t.unstakeZERO)),i=Object(p.a)(r,1)[0];return Object(k.jsx)(u.b,{onClick:i,children:n})},Xn=function(e){var t=e.zeroStake;return{originalStake:t,editedZERO:t.stakedZERO}},ea=function(e,t){var n=e.originalStake,a=e.editedZERO;switch(t.type){case"setStake":return Object(v.a)(Object(v.a)({},e),{},{editedZERO:Me.Decimal.from(t.newValue)});case"revert":return Object(v.a)(Object(v.a)({},e),{},{editedZERO:n.stakedZERO});case"updateStore":var r=t.stateChange.zeroStake;if(r)return{originalStake:r,editedZERO:r.apply(n.whatChanged(a))}}return e},ta=function(e){return e.zeroBalance},na=function(e){var t,n,a,r,i=e.originalStake,s=e.change,o=null===(t=s.stakeZERO)||void 0===t?void 0:t.prettify().concat(" ",Be),u=null===(n=s.unstakeZERO)||void 0===n?void 0:n.prettify().concat(" ",Be),l=null===(a=i.collateralGain.nonZero)||void 0===a?void 0:a.prettify(4).concat(" ETH"),c=null===(r=i.zusdGain.nonZero)||void 0===r?void 0:r.prettify().concat(" ",Ue);return i.isEmpty&&o?Object(k.jsxs)(st,{children:["You are staking ",Object(k.jsx)(ot,{children:o}),"."]}):Object(k.jsxs)(st,{children:[o&&Object(k.jsxs)(k.Fragment,{children:["You are adding ",Object(k.jsx)(ot,{children:o})," to your stake"]}),u&&Object(k.jsxs)(k.Fragment,{children:["You are withdrawing ",Object(k.jsx)(ot,{children:u})," to your wallet"]}),(l||c)&&Object(k.jsxs)(k.Fragment,{children:[" ","and claiming"," ",l&&c?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ot,{children:l})," and ",Object(k.jsx)(ot,{children:c})]}):Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(ot,{children:null!==l&&void 0!==l?l:c})})]}),"."]})},aa=function(){var e,t=Wn().dispatch,n=Object(Ze.useLiquityReducer)(ea,Xn),a=Object(p.a)(n,2),r=a[0],i=r.originalStake,s=r.editedZERO,o=a[1],l=Object(Ze.useLiquitySelector)(ta),c=i.whatChanged(s),d=c?(null===(e=c.stakeZERO)||void 0===e?void 0:e.gt(l))?[void 0,Object(k.jsxs)(wt,{children:["The amount you're trying to stake exceeds your balance by"," ",Object(k.jsxs)(ot,{children:[c.stakeZERO.sub(l).prettify()," ",Be]}),"."]})]:[c,Object(k.jsx)(na,{originalStake:i,change:c})]:[void 0,void 0],y=Object(p.a)(d,2),b=y[0],f=y[1],m=i.isEmpty;return Object(k.jsxs)(Kn,{title:"Staking",originalStake:i,editedZERO:s,dispatch:o,children:[null!==f&&void 0!==f?f:m?Object(k.jsxs)(st,{children:["Enter the amount of ",Be," you'd like to stake."]}):Object(k.jsxs)(st,{children:["Adjust the ",Be," amount to stake or withdraw."]}),Object(k.jsxs)(u.f,{variant:"layout.actions",children:[Object(k.jsx)(u.b,{variant:"cancel",onClick:function(){return t({type:"cancelAdjusting"})},children:"Cancel"}),b?Object(k.jsx)($n,{change:b,children:"Confirm"}):Object(k.jsx)(u.b,{disabled:!0,children:"Confirm"})]})]})},ra=function(){var e=Wn().dispatch;return Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Staking"}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsxs)(Yt,{title:"You haven't staked ".concat(Be," yet."),children:["Stake ",Be," to earn a share of borrowing and redemption fees."]}),Object(k.jsx)(u.f,{variant:"layout.actions",children:Object(k.jsx)(u.b,{onClick:function(){return e({type:"startAdjusting"})},children:"Start staking"})})]})]})},ia=function(){switch(Wn().view){case"ACTIVE":return Object(k.jsx)(Jn,{});case"ADJUSTING":return Object(k.jsx)(aa,{});case"NONE":return Object(k.jsx)(ra,{})}},sa=function(){return Object(k.jsxs)(u.e,{variant:"columns",children:[Object(k.jsxs)(u.e,{variant:"left",children:[Object(k.jsx)(pn,{}),Object(k.jsx)(Ln,{}),Object(k.jsx)(ia,{})]}),Object(k.jsxs)(u.e,{variant:"right",children:[Object(k.jsx)(Qe,{}),Object(k.jsx)(qn,{})]})]})},oa=function(){var e=R().config.frontendTag;return Object(k.jsxs)(u.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",m:3,p:3,maxWidth:"500px",border:1,borderRadius:"8px",borderColor:"warning",boxShadow:2},children:[Object(k.jsxs)(u.f,{sx:{alignItems:"center",mx:3,mb:2},children:[Object(k.jsx)(F,{name:"exclamation-triangle",size:"2x"}),Object(k.jsx)(u.g,{sx:{ml:3,fontSize:"18px"},children:"Frontend not yet registered"})]}),Object(k.jsxs)(u.m,{sx:{fontSize:2},children:["If you're the operator of this frontend, please select ",Object(k.jsx)("b",{children:Ne(e)})," ","in your wallet to proceed with the registration."]})]})},ua=function(e){var t=e.kickbackRate,n=R().liquity.send,a="register-frontend",r=se(a);return"waitingForApproval"===r.type?Object(k.jsxs)(u.b,{disabled:!0,children:[Object(k.jsx)(u.n,{sx:{mr:2,color:"white"},size:"20px"}),"Waiting for your approval"]}):"waitingForConfirmation"!==r.type&&"confirmed"!==r.type?Object(k.jsx)(ue,{id:a,send:n.registerFrontend.bind(n,t),children:Object(k.jsx)(u.b,{children:"Register"})}):null},la=function(){var e=R().account,t=Object(a.useState)(Me.Decimal.from(.8)),n=Object(p.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(Me.Decimal.from(.2)),o=Object(p.a)(s,2),l=o[0],c=o[1],d=Object(a.useState)("80"),y=Object(p.a)(d,2),b=y[0],f=y[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Choose a kickback rate"}),Object(k.jsx)(u.a,{sx:{p:[2,3]},children:Object(k.jsxs)(u.f,{children:[Object(k.jsx)(u.j,{children:"Kickback rate"}),Object(k.jsx)(u.j,{variant:"unit",children:"%"}),Object(k.jsx)(u.i,{sx:{maxWidth:"200px"},type:"number",step:"any",value:b,onChange:function(e){f(e.target.value);try{var t=Me.Decimal.from(e.target.value||0).div(100),n=Me.Decimal.ONE.sub(t);i(t),c(n)}catch(a){}},onBlur:function(){f(r.mul(100).toString())}})]})})]}),Object(k.jsxs)(u.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",m:3,mt:[3,null,4],mb:4,p:3,maxWidth:"450px",border:1,borderRadius:"8px",borderColor:"danger",boxShadow:2},children:[Object(k.jsxs)(u.f,{sx:{alignItems:"center",mx:3,fontSize:4},children:[Object(k.jsx)(F,{name:"hand-paper"}),Object(k.jsx)(u.g,{sx:{ml:3,fontSize:"18px"},children:"Before you proceed"})]}),Object(k.jsxs)(u.m,{sx:{fontSize:1,mt:3},children:["You are about to register ",Object(k.jsx)("b",{children:Ne(e)})," to receive"," ",Object(k.jsxs)("b",{children:[l.mul(100).toString(),"%"]})," of the ZERO rewards earned through this frontend."]}),Object(k.jsx)(u.m,{sx:{fontSize:1,mt:3,fontWeight:"bold"},children:"You will not be able to change the kickback rate for this address later."}),Object(k.jsx)(u.m,{sx:{fontSize:1,mt:3},children:"If you'd like to use a different kickback rate in the future, you will need to repeat this registration with a different address."})]}),Object(k.jsx)(ua,{kickbackRate:r})]})},ca=function(e){var t=e.onDismiss;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(u.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",m:3,mt:4,mb:4,p:4,maxWidth:"500px",bg:"rgba(40, 192, 129, 0.05)",color:"success",border:1,borderRadius:"8px",borderColor:"success",boxShadow:2},children:[Object(k.jsxs)(u.f,{sx:{alignItems:"center",mx:3,mb:4,fontSize:5},children:[Object(k.jsx)(F,{name:"check"}),Object(k.jsx)(u.g,{sx:{ml:3,fontSize:4},children:"Success!"})]}),Object(k.jsx)(u.m,{sx:{fontSize:2},children:"Your frontend is now ready to receive ZERO rewards."})]}),Object(k.jsx)(u.b,{onClick:t,children:"Go to Dashboard"})]})},da=function(e){return e.frontend},pa=function(){var e=R(),t=e.account,n=e.config.frontendTag,r=Object(Ze.useLiquitySelector)(da),i=n!==T.a&&"unregistered"===r.status,s=Object(a.useState)(!1),o=Object(p.a)(s,2),u=o[0],l=o[1];return Object(a.useEffect)((function(){i&&l(!0)}),[i]),u||i?"registered"===r.status?Object(k.jsx)(ca,{onDismiss:function(){return l(!1)}}):t===n?Object(k.jsx)(la,{}):Object(k.jsx)(oa,{}):Object(k.jsx)(sa,{})},ya=function(){var e=R().liquity.send,t=Object(a.useState)("90"),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Liquidate"}),Object(k.jsx)(u.a,{sx:{p:[2,3]},children:Object(k.jsxs)(u.f,{sx:{alignItems:"stretch"},children:[Object(k.jsx)(u.j,{children:"Up to"}),Object(k.jsx)(u.i,{type:"number",min:"1",step:"1",value:r,onChange:function(e){return i(e.target.value)}}),Object(k.jsx)(u.j,{children:"Troves"}),Object(k.jsx)(u.f,{sx:{ml:2,alignItems:"center"},children:Object(k.jsx)(ue,{id:"batch-liquidate",tooltip:"Liquidate",tooltipPlacement:"bottom",send:function(t){if(!r)throw new Error("Invalid number");return e.liquidateUpTo(parseInt(r,10),t)},children:Object(k.jsx)(u.b,{variant:"dangerIcon",children:Object(k.jsx)(F,{name:"trash",size:"lg"})})})})]})})]})},ba=n(154),fa=n.n(ba),ma=function(e){var t=e.children,n=e.short,a=Object(A.a)(e,["children","short"]);return Object(k.jsxs)(u.a,Object(v.a)(Object(v.a)({as:"span"},a),{},{children:[Object(k.jsx)(u.a,{as:"span",sx:{display:["none","unset"]},children:t}),Object(k.jsx)(u.a,{as:"span",sx:{display:["unset","none"]},children:n})]}))},ha="40px",va=function(e,t){return[e.collateralRatioIsBelowMinimum(t),"Collateral ratio not low enough"]},Ta=function(e,t,n,a){var r=e.collateralRatio(t);return r.gte(Me.MINIMUM_COLLATERAL_RATIO)&&r.lt(n)?[e.debt.lte(a),"There's not enough ZUSD in the Stability pool to cover the debt"]:va(e,t)},ja=function(e){var t=e.numberOfTroves,n=e.price,a=e.total,r=e.zusdInStabilityPool,i=e.blockTag;return{numberOfTroves:t,price:n,recoveryMode:a.collateralRatioIsBelowCritical(n),totalCollateralRatio:a.collateralRatio(n),zusdInStabilityPool:r,blockTag:i}},ga=function(e){var t=e.pageSize,n=Object(Ze.useLiquitySelector)(ja),r=n.blockTag,i=n.numberOfTroves,s=n.recoveryMode,o=n.totalCollateralRatio,l=n.zusdInStabilityPool,c=n.price,d=R().liquity,y=Object(a.useState)(!0),b=Object(p.a)(y,2),f=b[0],m=b[1],h=Object(a.useState)(),v=Object(p.a)(h,2),T=v[0],j=v[1],g=Object(a.useState)({}),O=Object(p.a)(g,2),x=O[0],w=O[1],_=Object(a.useCallback)((function(){return w({})}),[]),S=Object(a.useState)(0),E=Object(p.a)(S,2),D=E[0],C=E[1],M=Math.ceil(i/t)||1,A=Math.min(D,M-1);Object(a.useEffect)((function(){D!==A&&C(A)}),[D,A]),Object(a.useEffect)((function(){var e=!0;return m(!0),d.getTroves({first:t,sortedBy:"ascendingCollateralRatio",startingAt:A*t},{blockTag:r}).then((function(t){e&&(j(t),m(!1))})),function(){e=!1}}),[d,A,t,x]),Object(a.useEffect)((function(){_()}),[_,i]);var P=Object(a.useState)(),I=Object(p.a)(P,2),Z=I[0],U=I[1];return Object(a.useEffect)((function(){if(void 0!==Z){var e=!1;return setTimeout((function(){e||U(void 0)}),2e3),function(){e=!0}}}),[Z]),Object(k.jsxs)(u.c,{sx:{width:"100%"},children:[Object(k.jsxs)(u.g,{children:[Object(k.jsx)(ma,{short:"Troves",children:"Risky Troves"}),Object(k.jsxs)(u.f,{sx:{alignItems:"center"},children:[0!==i&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(ma,{short:"page ".concat(A+1," / ").concat(M),sx:{mr:[0,3],fontWeight:"body",fontSize:[1,2],letterSpacing:[-1,0]},children:[A*t+1,"-",Math.min((A+1)*t,i)," ","of ",i]}),Object(k.jsx)(u.b,{variant:"titleIcon",onClick:function(){A>0&&C(A-1)},disabled:A<=0,children:Object(k.jsx)(F,{name:"chevron-left",size:"lg"})}),Object(k.jsx)(u.b,{variant:"titleIcon",onClick:function(){A<M-1&&C(A+1)},disabled:A>=M-1,children:Object(k.jsx)(F,{name:"chevron-right",size:"lg"})})]}),Object(k.jsx)(u.b,{variant:"titleIcon",sx:{opacity:f?0:1,ml:[0,3]},onClick:_,children:Object(k.jsx)(F,{name:"redo",size:"lg"})})]})]}),T&&0!==T.length?Object(k.jsx)(u.a,{sx:{p:[2,3]},children:Object(k.jsxs)(u.a,{as:"table",sx:{mt:2,pl:[1,4],width:"100%",textAlign:"center",lineHeight:1.15},children:[Object(k.jsxs)("colgroup",{children:[Object(k.jsx)("col",{style:{width:"50px"}}),Object(k.jsx)("col",{}),Object(k.jsx)("col",{}),Object(k.jsx)("col",{}),Object(k.jsx)("col",{style:{width:ha}})]}),Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Owner"}),Object(k.jsxs)("th",{children:[Object(k.jsx)(ma,{short:"Coll.",children:"Collateral"}),Object(k.jsx)(u.a,{sx:{fontSize:[0,1],fontWeight:"body",opacity:.5},children:"RBTC"})]}),Object(k.jsxs)("th",{children:["Debt",Object(k.jsx)(u.a,{sx:{fontSize:[0,1],fontWeight:"body",opacity:.5},children:Ue})]}),Object(k.jsxs)("th",{children:["Coll.",Object(k.jsx)("br",{}),"Ratio"]}),Object(k.jsx)("th",{})]})}),Object(k.jsx)("tbody",{children:T.map((function(e){return!e.isEmpty&&Object(k.jsxs)("tr",{children:[Object(k.jsxs)("td",{style:{display:"flex",alignItems:"center",height:ha},children:[Object(k.jsx)(X,{message:e.ownerAddress,placement:"top",children:Object(k.jsxs)(u.o,{variant:"address",sx:{width:["73px","unset"],overflow:"hidden",position:"relative"},children:[Ne(e.ownerAddress),Object(k.jsx)(u.a,{sx:{display:["block","none"],position:"absolute",top:0,right:0,width:"50px",height:"100%",background:"linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)"}})]})}),Object(k.jsx)(fa.a,{text:e.ownerAddress,onCopy:function(){return U(e.ownerAddress)},children:Object(k.jsx)(u.b,{variant:"icon",sx:{width:"24px",height:"24px"},children:Object(k.jsx)(F,{name:Z===e.ownerAddress?"clipboard-check":"clipboard",size:"sm"})})})]}),Object(k.jsx)("td",{children:Object(k.jsx)(ma,{short:e.collateral.shorten(),children:e.collateral.prettify(4)})}),Object(k.jsx)("td",{children:Object(k.jsx)(ma,{short:e.debt.shorten(),children:e.debt.prettify()})}),Object(k.jsx)("td",{children:(t=e.collateralRatio(c),Object(k.jsx)(u.o,{color:t.gt(Me.CRITICAL_COLLATERAL_RATIO)?"success":t.gt(1.2)?"warning":"danger",children:new Me.Percent(t).prettify()}))}),Object(k.jsx)("td",{children:Object(k.jsx)(ue,{id:"liquidate-".concat(e.ownerAddress),tooltip:"Liquidate",requires:[s?Ta(e,c,o,l):va(e,c)],send:d.send.liquidate.bind(d.send,e.ownerAddress),children:Object(k.jsx)(u.b,{variant:"dangerIcon",children:Object(k.jsx)(F,{name:"trash"})})})})]},e.ownerAddress);var t}))})]})}):Object(k.jsx)(u.a,{sx:{p:[2,3]},children:Object(k.jsx)(u.a,{sx:{p:4,fontSize:3,textAlign:"center"},children:T?"There are no Troves yet":"Loading..."})}),f&&Object(k.jsx)(mt,{})]})},Oa=function(){return Object(k.jsxs)(u.e,{variant:"columns",children:[Object(k.jsxs)(u.e,{variant:"left",children:[Object(k.jsx)(u.c,{children:Object(k.jsx)(u.a,{sx:{p:[2,3]},children:Object(k.jsxs)(Yt,{title:"Bot functionality",children:[Object(k.jsx)(u.m,{children:"Liquidation is expected to be carried out by bots."}),Object(k.jsx)(u.m,{children:"Early on you may be able to manually liquidate Troves, but as the system matures this will become less likely."})]})})}),Object(k.jsx)(ya,{})]}),Object(k.jsx)(u.e,{variant:"right",children:Object(k.jsx)(Qe,{})}),Object(k.jsx)(ga,{pageSize:10})]})},xa=function(e){var t=e.disabledDays,n=e.unlockDate;return Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.g,{children:"Redeem"}),Object(k.jsx)(u.a,{sx:{p:[2,3]},children:Object(k.jsxs)(Yt,{title:"Redemption is not enabled yet.",icon:Object(k.jsx)(u.a,{sx:{color:"warning"},children:Object(k.jsx)(F,{name:"exclamation-triangle"})}),children:[Object(k.jsxs)(u.m,{children:["ZUSD redemption is disabled for the first ",t," days after launch."]}),Object(k.jsxs)(u.m,{sx:{mt:3},children:["It will be unlocked at"," ",Object(k.jsx)(u.o,{sx:{fontWeight:"medium"},children:n.toLocaleString()}),"."]})]})})]})},wa=function(e){var t=e.transactionId,n=e.disabled,a=e.zusdAmount,r=e.maxRedemptionRate,i=R().liquity.send,s=oe(t,i.redeemZUSD.bind(i,a,r)),o=Object(p.a)(s,1)[0];return Object(k.jsx)(u.b,{disabled:n,onClick:o,children:"Confirm"})},_a=new Me.Percent(Me.MINIMUM_COLLATERAL_RATIO).toString(0),Sa=function(e){return{price:e.price,fees:e.fees,total:e.total,zusdBalance:e.zusdBalance}},ka="redemption",Ea=function(){var e=Object(Ze.useLiquitySelector)(Sa),t=e.price,n=e.fees,r=e.total,i=e.zusdBalance,s=Object(a.useState)(Me.Decimal.ZERO),o=Object(p.a)(s,2),l=o[0],c=o[1],d=Object(a.useState)(!1),y=Object(p.a)(d,2),b=y[0],f=y[1],m=Object(a.useState)(),h=!l.isZero,v=l.div(t),T=n.redemptionRate(l.div(r.debt)),j=new Me.Percent(T),g=v.mul(T),O=T.add(.001),x=se(ka);Object(a.useEffect)((function(){"waitingForApproval"===x.type||"waitingForConfirmation"===x.type?f(!0):"failed"===x.type||"cancelled"===x.type?f(!1):"confirmed"===x.type&&(c(Me.Decimal.ZERO),f(!1))}),[x.type,f,c]);var w=r.collateralRatioIsBelowMinimum(t)?[!1,Object(k.jsxs)(wt,{children:["You can't redeem ZUSD when the total collateral ratio is less than"," ",Object(k.jsx)(ot,{children:_a}),". Please try again later."]})]:l.gt(i)?[!1,Object(k.jsxs)(wt,{children:["The amount you're trying to redeem exceeds your balance by"," ",Object(k.jsxs)(ot,{children:[l.sub(i).prettify()," ",Ue]}),"."]})]:[!0,Object(k.jsxs)(st,{children:["You will receive ",Object(k.jsxs)(ot,{children:[v.sub(g).prettify(4)," ETH"]})," in exchange for"," ",Object(k.jsxs)(ot,{children:[l.prettify()," ",Ue]}),"."]})],_=Object(p.a)(w,2),S=_[0],E=_[1];return Object(k.jsxs)(u.c,{children:[Object(k.jsxs)(u.g,{children:["Redeem",h&&!b&&Object(k.jsx)(u.b,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return c(Me.Decimal.ZERO)},children:Object(k.jsx)(F,{name:"history",size:"lg"})})]}),Object(k.jsxs)(u.a,{sx:{p:[2,3]},children:[Object(k.jsx)(ft,{label:"Redeem",inputId:"redeem-zusd",amount:l.prettify(),maxAmount:i.toString(),maxedOut:l.eq(i),unit:Ue,editingState:m,editedAmount:l.toString(2),setEditedAmount:function(e){return c(Me.Decimal.from(e))}}),Object(k.jsx)(yt,{label:"Redemption Fee",inputId:"redeem-fee",amount:g.toString(4),pendingAmount:j.toString(2),unit:"ETH",infoIcon:Object(k.jsx)(He,{tooltip:Object(k.jsx)(u.c,{variant:"tooltip",sx:{minWidth:"240px"},children:"The Redemption Fee is charged as a percentage of the redeemed Ether. The Redemption Fee depends on ZUSD redemption volumes and is 0.5% at minimum."})})}),(h||!S)&&E||Object(k.jsxs)(st,{children:["Enter the amount of ",Ue," you'd like to redeem."]}),Object(k.jsx)(u.f,{variant:"layout.actions",children:Object(k.jsx)(wa,{transactionId:ka,disabled:!h||!S,zusdAmount:l,maxRedemptionRate:O})})]}),b&&Object(k.jsx)(mt,{})]})},Da=function(e){return e.blockTimestamp},Ca=function(){var e=R().liquity.connection,t=e.deploymentDate,n=e.bootstrapPeriod,a=Object(Ze.useLiquitySelector)(Da),r=Math.round(n/86400),i=t.getTime()/1e3+n,s=new Date(1e3*i);return a<i?Object(k.jsx)(xa,{disabledDays:r,unlockDate:s}):Object(k.jsx)(Ea,{})},Ra=function(){var e,t=R().liquity.connection.addresses;return Object(k.jsxs)(u.e,{variant:"columns",children:[Object(k.jsxs)(u.e,{variant:"left",children:[Object(k.jsx)(u.c,{children:Object(k.jsx)(u.a,{sx:{p:[2,3]},children:Object(k.jsxs)(Yt,{title:"Bot functionality",children:[Object(k.jsx)(u.m,{children:"Redemptions are expected to be carried out by bots when arbitrage opportunities emerge."}),Object(k.jsxs)(u.m,{sx:{mt:2},children:["Most of the time you will get a better rate for converting ZUSD to RBTC on"," ",Object(k.jsxs)(u.k,{href:(e=t.zusdToken,"https://app.uniswap.org/#/swap?inputCurrency=".concat(e,"&outputCurrency=ETH")),target:"_blank",children:["Uniswap ",Object(k.jsx)(F,{name:"external-link-alt",size:"xs"})]})," ","or other exchanges."]}),Object(k.jsxs)(u.m,{sx:{mt:2},children:[Object(k.jsx)("strong",{children:"Note"}),": Redemption is not for repaying your loan. To repay your loan, adjust your Trove on the ",Object(k.jsx)(u.k,{href:"#/",children:"Dashboard"}),"."]})]})})}),Object(k.jsx)(Ca,{})]}),Object(k.jsx)(u.e,{variant:"right",children:Object(k.jsx)(Qe,{})})]})},Ma={NONE:{OPEN_TROVE_PRESSED:"OPENING",TROVE_OPENED:"ACTIVE"},LIQUIDATED:{OPEN_TROVE_PRESSED:"OPENING",TROVE_SURPLUS_COLLATERAL_CLAIMED:"NONE",TROVE_OPENED:"ACTIVE"},REDEEMED:{OPEN_TROVE_PRESSED:"OPENING",TROVE_SURPLUS_COLLATERAL_CLAIMED:"NONE",TROVE_OPENED:"ACTIVE"},OPENING:{CANCEL_ADJUST_TROVE_PRESSED:"NONE",TROVE_OPENED:"ACTIVE"},ADJUSTING:{CANCEL_ADJUST_TROVE_PRESSED:"ACTIVE",TROVE_ADJUSTED:"ACTIVE",TROVE_CLOSED:"NONE",TROVE_LIQUIDATED:"LIQUIDATED",TROVE_REDEEMED:"REDEEMED"},CLOSING:{CANCEL_ADJUST_TROVE_PRESSED:"ACTIVE",TROVE_CLOSED:"NONE",TROVE_ADJUSTED:"ACTIVE",TROVE_LIQUIDATED:"LIQUIDATED",TROVE_REDEEMED:"REDEEMED"},ACTIVE:{ADJUST_TROVE_PRESSED:"ADJUSTING",CLOSE_TROVE_PRESSED:"CLOSING",TROVE_CLOSED:"NONE",TROVE_LIQUIDATED:"LIQUIDATED",TROVE_REDEEMED:"REDEEMED"}},Aa={open:"TROVE_OPENED",closedByOwner:"TROVE_CLOSED",closedByLiquidation:"TROVE_LIQUIDATED",closedByRedemption:"TROVE_REDEEMED"},Pa=function(e){return e.trove.status},Ia=function(e){var t=e.children,n=Object(Ze.useLiquitySelector)(Pa),r=Object(a.useState)(function(e){return"closedByLiquidation"===e?"LIQUIDATED":"closedByRedemption"===e?"REDEEMED":"open"===e?"ACTIVE":"NONE"}(n)),i=Object(p.a)(r,2),s=i[0],o=i[1],u=Object(a.useRef)(s),l=Object(a.useCallback)((function(e){var t=function(e,t){var n;return null!==(n=Ma[e][t])&&void 0!==n?n:e}(u.current,e);console.log("dispatchEvent() [current-view, event, next-view]",u.current,e,t),o(t)}),[]);Object(a.useEffect)((function(){u.current=s}),[s]),Object(a.useEffect)((function(){var e,t=null!==(e=Aa[n])&&void 0!==e?e:null;null!==t&&l(t)}),[n,l]);var c={view:s,dispatchEvent:l};return Object(k.jsx)(Ot.Provider,{value:c,children:t})},Za={NONE:{DEPOSIT_PRESSED:"DEPOSITING"},DEPOSITING:{CANCEL_PRESSED:"NONE",DEPOSIT_CONFIRMED:"ACTIVE"},ACTIVE:{REWARDS_CLAIMED:"ACTIVE",ADJUST_DEPOSIT_PRESSED:"ADJUSTING",DEPOSIT_EMPTIED:"NONE"},ADJUSTING:{CANCEL_PRESSED:"ACTIVE",DEPOSIT_CONFIRMED:"ACTIVE",DEPOSIT_EMPTIED:"NONE"}},Ua=function(e){return e.stabilityDeposit},Ba=function(e){var t=e.children,n=Object(Ze.useLiquitySelector)(Ua),r=Object(a.useState)(function(e){return e.isEmpty?"NONE":"ACTIVE"}(n)),i=Object(p.a)(r,2),s=i[0],o=i[1],u=Object(a.useRef)(s),l=Object(a.useCallback)((function(e){var t=function(e,t){var n;return null!==(n=Za[e][t])&&void 0!==n?n:e}(u.current,e);console.log("dispatchEvent() [current-view, event, next-view]",u.current,e,t),o(t)}),[]);Object(a.useEffect)((function(){u.current=s}),[s]),Object(a.useEffect)((function(){n.isEmpty&&l("DEPOSIT_EMPTIED")}),[n.isEmpty,l]);var c={view:s,dispatchEvent:l};return Object(k.jsx)(hn.Provider,{value:c,children:t})},Fa=function(e){return{zeroStake:e.zeroStake,changePending:!1,adjusting:!1}},Na=function(e,t){switch(t.type){case"startAdjusting":return Object(v.a)(Object(v.a)({},e),{},{adjusting:!0});case"cancelAdjusting":return Object(v.a)(Object(v.a)({},e),{},{adjusting:!1});case"startChange":return Object(v.a)(Object(v.a)({},e),{},{changePending:!0});case"abortChange":return Object(v.a)(Object(v.a)({},e),{},{changePending:!1});case"updateStore":var n=t.oldState.zeroStake,a=t.stateChange.zeroStake;if(a){var r=!a.stakedZERO.eq(n.stakedZERO)||a.collateralGain.lt(n.collateralGain)||a.zusdGain.lt(n.zusdGain);return Object(v.a)(Object(v.a)({},e),{},{zeroStake:a,adjusting:!1,changePending:!r&&e.changePending})}}return e},La=function(e){var t=e.children,n=se("stake"),r=Object(Ze.useLiquityReducer)(Na,Fa),i=Object(p.a)(r,2),s=i[0],o=s.adjusting,u=s.changePending,l=s.zeroStake,c=i[1];return Object(a.useEffect)((function(){"waitingForApproval"===n.type||"waitingForConfirmation"===n.type?c({type:"startChange"}):"failed"!==n.type&&"cancelled"!==n.type||c({type:"abortChange"})}),[n.type,c]),Object(k.jsx)(Hn.Provider,{value:{view:o?"ADJUSTING":l.isEmpty?"NONE":"ACTIVE",changePending:u,dispatch:c},children:t})},za=function(e){var t=e.loader,n=R(),a=n.account,r=n.provider,i=n.liquity;return Object.assign(window,{account:a,provider:r,liquity:i,Trove:Me.Trove,Decimal:Me.Decimal,Difference:Me.Difference,Wallet:Re.a}),Object(k.jsxs)(Ze.LiquityStoreProvider,{loader:t,store:i.store,children:[Object(k.jsx)(Pe.a,{children:Object(k.jsx)(Ia,{children:Object(k.jsx)(Ba,{children:Object(k.jsx)(La,{children:Object(k.jsxs)(u.f,{sx:{flexDirection:"column",minHeight:"100%"},children:[Object(k.jsxs)(it,{children:[Object(k.jsx)(ze,{}),Object(k.jsx)($e,{})]}),Object(k.jsx)(u.e,{variant:"main",sx:{display:"flex",flexGrow:1,flexDirection:"column",alignItems:"center"},children:Object(k.jsxs)(Ie.c,{children:[Object(k.jsx)(Ie.a,{path:"/",exact:!0,children:Object(k.jsx)(pa,{})}),Object(k.jsx)(Ie.a,{path:"/farm"}),Object(k.jsx)(Ie.a,{path:"/risky-troves",children:Object(k.jsx)(Oa,{})}),Object(k.jsx)(Ie.a,{path:"/redemption",children:Object(k.jsx)(Ra,{})})]})})]})})})})}),Object(k.jsx)(pe,{})]})};if(window.ethereum&&Object.assign(window.ethereum,{autoRefreshOnNetworkChange:!1}),"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"c19514752536c76511bf2674bb5fee46bb6e16a7"}).REACT_APP_DEMO_MODE){var qa=new Ae("http://".concat(window.location.hostname,":4444"),"0x4d5db4107d237df6a3d58ee5f70ae63d73d7658d4026f2eefd2f204c81682cb7");Object.assign(window,{ethereum:qa})}S().then((function(e){Object.assign(window,{config:e})}));var Ha=function(e){var t=e.children;return Object(k.jsx)(o.a,{getLibrary:function(e){return new c.BatchedWebSocketAugmentedWeb3Provider(e)},children:t})},Wa=function(){return Object(k.jsxs)(u.f,{sx:{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",textAlign:"center"},children:[Object(k.jsxs)(u.g,{sx:{mb:3},children:[Object(k.jsx)(F,{name:"exclamation-triangle"})," This app is for testing purposes only."]}),Object(k.jsx)(u.m,{sx:{mb:3},children:"Please change your network to Ropsten, Rinkeby, Kovan or G\xf6rli."}),Object(k.jsxs)(u.m,{children:["If you'd like to use the Liquity Protocol on mainnet, please pick a frontend"," ",Object(k.jsxs)(u.k,{href:"https://www.liquity.org/frontend",children:["here ",Object(k.jsx)(F,{name:"external-link-alt",size:"xs"})]}),"."]})]})},Ga=function(){var e=Object(k.jsxs)(u.f,{sx:{alignItems:"center",justifyContent:"center",height:"100vh"},children:[Object(k.jsx)(u.n,{sx:{m:2,color:"text"},size:"32px"}),Object(k.jsx)(u.g,{children:"Loading..."})]});return Object(k.jsx)(Ha,{children:Object(k.jsx)(l.a,{theme:Ee,children:Object(k.jsx)(Y,{loader:e,children:Object(k.jsx)(C,{loader:e,unsupportedNetworkFallback:function(e){return Object(k.jsxs)(u.f,{sx:{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",textAlign:"center"},children:[Object(k.jsxs)(u.g,{sx:{mb:3},children:[Object(k.jsx)(F,{name:"exclamation-triangle"})," Liquity is not yet deployed to"," ",1===e?"mainnet":"this network","."]}),"Please switch to Ropsten, Rinkeby, Kovan or G\xf6rli."]})},unsupportedMainnetFallback:Object(k.jsx)(Wa,{}),children:Object(k.jsx)(re,{children:Object(k.jsx)(za,{loader:e})})})})})})};s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(Ga,{})}),document.getElementById("root"))}],[[250,1,2]]]);
//# sourceMappingURL=main.3536b3f2.chunk.js.map